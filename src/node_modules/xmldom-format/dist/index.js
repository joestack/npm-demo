"use strict";var c=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var k=(e,r)=>{for(var i in r)c(e,i,{get:r[i],enumerable:!0})},Y=(e,r,i,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of F(r))!P.call(e,a)&&a!==i&&c(e,a,{get:()=>r[a],enumerable:!(s=M(r,a))||s.enumerable});return e};var $=e=>Y(c({},"__esModule",{value:!0}),e);var K={};k(K,{XMLSerializer:()=>h,formatXml:()=>C});module.exports=$(K);function u(e){return e==="<"&&"&lt;"||e===">"&&"&gt;"||e==="&"&&"&amp;"||e==='"'&&"&quot;"||`&#${e.charCodeAt(0)};`}function d(e,r){return[" ",e,'="',r.replace(/[<>&"\t\n\r]/gu,u),'"']}function D(e){if(H(e))return d(e.name,e.value)}function H(e){return e.nodeType===2}function N(e){return e.nodeType===4}function g(e){if(N(e))return["<![CDATA[",e.data,"]]>"]}function l(e,r){if(r.formatOptions?.indentation){e.push(r.formatOptions.eol||`\r
`);for(let i=0;i<r.level;i++)e.push(r.formatOptions.indentation)}}function I(e,r){r.formatOptions?.useWhitespaceInAutoClosingNode&&e.push(" ")}function b(e){return!!e.data}function E(e,r){return(r.formatOptions?.inlineElements||G).indexOf(e.nodeName)>=0}var G=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function X(e){return e.nodeType===8}function O(e,r){if(X(e)){let i=[];return l(i,r),i.push("<!--",e.data,"-->"),i}}function x(e){return e.nodeType===9}function B(e){return e.nodeType===11}function T(e,r){if(x(e)||B(e)){let i=[],s=e.firstChild;for(;s;)i.push(...r.serializeNode(s,r)),s=s.nextSibling;return i}}function S(e,r){if(L(e)){let i=[];return l(i,r),i.push("<!DOCTYPE ",e.name),e.publicId?(i.push(" PUBLIC ",e.publicId),e.systemId&&e.systemId!=="."&&i.push(" ",e.systemId),i.push(">")):e.systemId&&e.systemId!=="."?i.push(" SYSTEM ",e.systemId,">"):(e.internalSubset&&i.push(" [",e.internalSubset,"]"),i.push(">")),i}}function L(e){return e.nodeType===10}function A(e){if(z(e))return[e.data.trim().replace(/[<&>]/gu,u)]}function z(e){return e.nodeType===3}function y(e,r){if(W(e)){let i=[],s=e.attributes,a=s.length,m=e.tagName;r.isHtml=e.namespaceURI==="http://www.w3.org/1999/xhtml"||r.isHtml;let p=m;if(!r.isHtml&&!e.prefix&&e.namespaceURI){let n;for(let t=0;t<s.length;t++)if(s.item(t)?.name==="xmlns"){n=s.item(t)?.value;break}if(!n)for(let t=r.visibleNamespaces.length-1;t>=0;t--){let o=r.visibleNamespaces[t];if(o.prefix===""&&o.namespace===e.namespaceURI){n=o.namespace;break}}if(n!==e.namespaceURI)for(let t=r.visibleNamespaces.length-1;t>=0;t--){let o=r.visibleNamespaces[t];if(o.namespace===e.namespaceURI){o.prefix&&(p=`${o.prefix}:${m}`);break}}}E(e,r)||l(i,r),i.push("<",p);for(let n=0;n<a;n++){let t=s.item(n);t?.prefix==="xmlns"?r.visibleNamespaces.push({prefix:t.localName,namespace:t.value}):t?.nodeName==="xmlns"&&r.visibleNamespaces.push({prefix:"",namespace:t.value})}for(let n=0;n<a;n++){let t=s.item(n);if(t){if(_(t,r.visibleNamespaces)&&t.namespaceURI){let o=t.prefix||"";i.push(...d(o?`xmlns:${o}`:"xmlns",t.namespaceURI)),r.visibleNamespaces.push({prefix:o,namespace:t.namespaceURI})}i.push(...r.serializeNode(t,r))}}if(m===p&&_(e,r.visibleNamespaces)&&e.namespaceURI){let n=e.prefix||"";i.push(...d(n?`xmlns:${n}`:"xmlns",e.namespaceURI)),r.visibleNamespaces.push({prefix:n,namespace:e.namespaceURI})}if(e.firstChild||r.isHtml&&!/^(?:meta|link|img|br|hr|input)$/iu.test(m)){i.push(">");let n=e.firstChild,t=!0,o=r.isHtml&&/^script$/iu.test(m);for(;n;)o&&b(n)&&n.data?i.push(n.data):(!z(n)&&!N(n)&&!E(n,r)&&(t=!1),i.push(...r.serializeNode(n,{...r,level:r.level+1}))),n=n.nextSibling;t||l(i,r),i.push("</",p,">")}else I(i,r),i.push("/>");return i}}function _(e,r){let i=e.prefix||"",s=e.namespaceURI;if(!s||i==="xml"&&s==="http://www.w3.org/XML/1998/namespace"||s==="http://www.w3.org/2000/xmlns/")return!1;let a=r.length;for(;a--;){let m=r[a];if(m.prefix===i)return m.namespace!==s}return!0}function W(e){return e.nodeType===1}function R(e){if(e.nodeType===5)return["&",e.nodeName,";"]}function j(e){return e.nodeType===7}function U(e,r){if(j(e)){let i=[];return l(i,r),i.push("<?",e.target," ",e.data,"?>"),i}}function v(e){return["??",e.nodeName]}function C(e,r){let i={isHtml:!1,visibleNamespaces:[],serializeNode:w,level:0,formatOptions:r};return x(e)&&e.documentElement&&!e.documentElement.prefix&&(e.documentElement.lookupPrefix(e.documentElement.namespaceURI)||i.visibleNamespaces.push({prefix:null,namespace:e.documentElement.namespaceURI})),w(e,i).join("").trim()}var J=[y,T,D,A,g,O,S,U,R,v];function w(e,r){let i={...r,visibleNamespaces:r.visibleNamespaces.slice()},s=[];for(let a of J){let m=a(e,i);if(m)return s.push(...m),s}return s}var h=class{constructor(r){this.formatOptions=r}serializeToString(r){return C(r,this.formatOptions)}};0&&(module.exports={XMLSerializer,formatXml});
//# sourceMappingURL=index.js.map
