{
  "version": 3,
  "sources": ["../src/index.ts", "../src/cli/index.ts", "../src/cli/cli.ts", "../src/utils/index.ts", "../src/utils/arrayUtils.ts", "../src/utils/requestUtils.ts", "../src/io/index.ts", "../src/io/completionItemProvider.ts", "../src/io/fileProvider.ts", "../src/io/httpClientProvider.ts", "../src/io/javascriptProvider.ts", "../src/models/hooks.ts", "../src/models/httpHooksApi.ts", "../src/models/httpSymbol.ts", "../src/models/httpSymbolKind.ts", "../src/models/logHandler.ts", "../src/models/protoDefinition.ts", "../src/models/repeatOptions.ts", "../src/models/requestClient.ts", "../src/models/testFunction.ts", "../src/models/testResult.ts", "../src/models/variableType.ts", "../src/io/logger.ts", "../src/io/userInteractionProvider.ts", "../src/utils/stringUtils.ts", "../src/utils/convertUtils.ts", "../src/utils/mimeTypeUtils.ts", "../src/utils/assertUtils.ts", "../src/utils/bufferEncodingUtils.ts", "../src/utils/fsUtils.ts", "../src/utils/configUtils.ts", "../src/utils/environmentUtils.ts", "../src/utils/errorUtils.ts", "../src/utils/httpRegionUtils.ts", "../src/utils/requestClientUtils.ts", "../src/utils/logUtils.ts", "../src/utils/repeatUtils.ts", "../src/utils/variableUtils.ts", "../src/utils/httpStringUtils.ts", "../src/utils/markdownUtils.ts", "../src/utils/modelUtils.ts", "../src/utils/parserUtils.ts", "../src/utils/parseRequestClientFactory.ts", "../src/utils/processorContextUtils.ts", "../src/utils/promiseUtils.ts", "../src/utils/randomUtils.ts", "../src/utils/testUtils.ts", "../src/cli/initCliProvider.ts", "../src/cli/oauth2/oauth2Command.ts", "../src/plugins/assert/assertHttpRegionParser.ts", "../src/plugins/assert/predicates/endsWithPredicate.ts", "../src/plugins/assert/predicates/equalsPredicate.ts", "../src/plugins/assert/predicates/existsPredicate.ts", "../src/plugins/assert/predicates/greaterEqualsPredicate.ts", "../src/plugins/assert/predicates/greaterPredicate.ts", "../src/plugins/assert/predicates/includesPredicate.ts", "../src/plugins/assert/predicates/isArrayPredicate.ts", "../src/plugins/assert/predicates/isBooleanPredicate.ts", "../src/plugins/assert/predicates/isFalsePredicate.ts", "../src/plugins/assert/predicates/isNumberPredicate.ts", "../src/plugins/assert/predicates/isStringPredicate.ts", "../src/plugins/assert/predicates/lowerEqualsPredicate.ts", "../src/plugins/assert/predicates/lowerPredicate.ts", "../src/plugins/assert/predicates/matchesPredicate.ts", "../src/plugins/assert/predicates/md5Predicate.ts", "../src/plugins/assert/predicates/notEqualsPredicate.ts", "../src/plugins/assert/predicates/sha256Predicate.ts", "../src/plugins/assert/predicates/sha512Predicate.ts", "../src/plugins/assert/predicates/startsWithPredicate.ts", "../src/plugins/assert/completionItemProvider.ts", "../src/plugins/assert/provideAssertValueDuration.ts", "../src/plugins/assert/provideAssertValueHeader.ts", "../src/plugins/assert/provideAssertValueJavascript.ts", "../src/plugins/assert/provideAssertValueStatus.ts", "../src/plugins/assert/testFailedInterceptor.ts", "../src/plugins/assert/registerAssertPlugin.ts", "../src/plugins/core/completionItemProvider.ts", "../src/plugins/core/environments/configVariableProvider.ts", "../src/store/index.ts", "../src/store/getEnvironmentConfig.ts", "../src/store/httpFile.ts", "../src/store/httpFileStore.ts", "../src/store/parser/closeHttpRegion.ts", "../src/store/parser/createReaderFactory.ts", "../src/store/parser/parseHttpFile.ts", "../src/store/httpRegion.ts", "../src/store/parser/setSource.ts", "../src/store/pluginStore.ts", "../src/store/userSessionStore.ts", "../src/plugins/core/environments/lastResponseVariableProvider.ts", "../src/plugins/core/execute/createRequestInterceptor.ts", "../src/plugins/core/execute/lazyVariableInterceptor.ts", "../src/plugins/core/execute/logResponseInterceptor.ts", "../src/plugins/core/execute/processedHttpRegionInterceptor.ts", "../src/plugins/core/execute/regionScopedVariablesInterceptor.ts", "../src/plugins/core/metaData/disabeldMetaDataHandler.ts", "../src/plugins/core/metaData/forceRegionDelimiterMetaDataHandler.ts", "../src/plugins/core/metaData/importMetaDataHandler.ts", "../src/plugins/core/metaData/jwtMetaDataHandler.ts", "../src/plugins/core/metaData/keepStreamingMetaDataHandler.ts", "../src/plugins/core/metaData/loopMetaDataHandler.ts", "../src/plugins/core/metaData/noRedirectMetaDataHandler.ts", "../src/plugins/core/metaData/noRejectUnauthorizedMetaDataHandler.ts", "../src/plugins/core/metaData/noteMetaDataHandler.ts", "../src/plugins/core/metaData/proxyMetaDataHandler.ts", "../src/plugins/core/metaData/rateLimitMetaDataHandler.ts", "../src/plugins/core/metaData/refMetaDataHandler.ts", "../src/plugins/core/metaData/responseRefMetaDataHandler.ts", "../src/plugins/core/metaData/sleepMetaDataHandler.ts", "../src/plugins/core/metaData/timeoutMetaDataHandler.ts", "../src/plugins/core/metaData/verboseMetaDataHandler.ts", "../src/plugins/core/parse/commentHttpRegionParser.ts", "../src/plugins/core/parse/metaHttpRegionParser.ts", "../src/plugins/core/parse/requestBodyHttpRegionParser.ts", "../src/plugins/core/parse/multipartMixedInterceptor.ts", "../src/plugins/core/parse/outputRedirectionHttpRegionParser.ts", "../src/plugins/core/parse/requestHttpRegionParser.ts", "../src/plugins/core/parse/responseHttpRegionParser.ts", "../src/plugins/core/parse/responseRefHttpRegionParser.ts", "../src/plugins/core/parse/variableHttpRegionParser.ts", "../src/plugins/core/parseEnd/cancelExecutionInterceptor.ts", "../src/plugins/core/request/attachDefaultHeaders.ts", "../src/plugins/core/request/encodeRequestBody.ts", "../src/plugins/core/request/excludeProxyInterceptor.ts", "../src/plugins/core/request/isTrustedInterceptor.ts", "../src/plugins/core/request/requestVariableReplacer.ts", "../src/plugins/core/request/resolveRequestBody.ts", "../src/plugins/core/request/setDefaultHttpyacHeaders.ts", "../src/plugins/core/request/setEnvRequestOptions.ts", "../src/plugins/core/request/transformRequestBodyToBuffer.ts", "../src/plugins/core/request/transfromMultilineFormUrlEncoded.ts", "../src/plugins/core/parseEnd/closeRequestBody.ts", "../src/plugins/core/parseEnd/closeResponseBody.ts", "../src/plugins/core/replacer/escapeVariableReplacer.ts", "../src/plugins/core/replacer/fileVariableReplacer.ts", "../src/plugins/core/replacer/hostVariableReplacer.ts", "../src/plugins/core/replacer/nameVariableReplacer.ts", "../src/plugins/core/replacer/restClientVariableReplacer.ts", "../src/plugins/core/replacer/showInputBoxVariableReplacer.ts", "../src/plugins/core/replacer/showQuickpickVariableReplacer.ts", "../src/plugins/core/response/handleNameMetaData.ts", "../src/plugins/core/response/jsonResponseInterceptor.ts", "../src/plugins/core/response/setLastResponseInVariables.ts", "../src/plugins/core/registerCorePlugin.ts", "../src/plugins/dotenv/dotenvVariableProvider.ts", "../src/plugins/dotenv/registerDotenvPlugin.ts", "../src/plugins/eventsource/eventSourceRequest.ts", "../src/plugins/eventsource/completionItemProvider.ts", "../src/plugins/eventsource/eventSourceRequestClient.ts", "../src/plugins/eventsource/eventSourceHttpRegionParser.ts", "../src/plugins/eventsource/eventSourceResponseHttpRegionParser.ts", "../src/plugins/eventsource/registerEventSourcePlugin.ts", "../src/plugins/graphql/gqlAction.ts", "../src/plugins/graphql/gqlHttpRegionParser.ts", "../src/plugins/graphql/graphqlProtocolReplacer.ts", "../src/plugins/graphql/registerGraphQL.ts", "../src/plugins/grpc/grpcRequest.ts", "../src/plugins/grpc/callOptionsRequestHook.ts", "../src/plugins/grpc/channelCredentialsRequestHook.ts", "../src/plugins/grpc/channelOptionsRequestHook.ts", "../src/plugins/grpc/completionItemProvider.ts", "../src/plugins/grpc/createGrpcService.ts", "../src/plugins/grpc/grpcRequestClient.ts", "../src/plugins/grpc/pathAwareChannel.ts", "../src/plugins/grpc/grpcHttpRegionParser.ts", "../src/plugins/grpc/grpcResponseHttpRegionParser.ts", "../src/plugins/grpc/protoHttpRegionParser.ts", "../src/plugins/grpc/grpcReflectionMetaDataHandler.ts", "../src/plugins/grpc/registerGrpcPlugin.ts", "../src/plugins/grpc/grpcReflectionRequestHook.ts", "../src/plugins/http/awsAuthVariableReplacer.ts", "../src/plugins/http/basicAuthVariableReplacer.ts", "../src/plugins/http/clientCertVariableReplacer.ts", "../src/plugins/http/completionItemProvider.ts", "../src/plugins/http/cookieJarInterceptor.ts", "../src/plugins/http/cookieVariableReplacer.ts", "../src/plugins/http/digestAuthVariableReplacer.ts", "../src/plugins/http/gotUtils.ts", "../src/plugins/http/httpRequestClient.ts", "../src/plugins/http/logHttpRedirect.ts", "../src/plugins/http/postRedirectGetMetaDataHandler.ts", "../src/plugins/http/registerHttpPlugin.ts", "../src/plugins/injection/codeBlocksInterceptor.ts", "../src/plugins/injection/asciidocInterceptor.ts", "../src/plugins/injection/markdownInterceptor.ts", "../src/plugins/injection/registerInjectionPlugin.ts", "../src/plugins/intellij/api/intellijCryptoSupport.ts", "../src/plugins/intellij/api/intellijHttpClient.ts", "../src/plugins/intellij/api/intellijVariables.ts", "../src/plugins/oauth2/flow/authorizationCodeFlow.ts", "../src/plugins/oauth2/openIdConfiguration.ts", "../src/plugins/oauth2/flow/openIdHttpServer.ts", "../src/plugins/oauth2/flow/requestOpenIdInformation.ts", "../src/plugins/oauth2/flow/clientCredentialsFlow.ts", "../src/plugins/oauth2/flow/deviceCodeFlow.ts", "../src/plugins/oauth2/flow/implicitFlow.ts", "../src/plugins/oauth2/flow/passwordFlow.ts", "../src/plugins/oauth2/flow/refreshTokenFlow.ts", "../src/plugins/oauth2/flow/tokenExchangeFlow.ts", "../src/plugins/oauth2/oauth2VariableReplacer.ts", "../src/plugins/oauth2/registerOAuth2Plugin.ts", "../src/plugins/intellij/replacer/replaceIntellijVariableAuth.ts", "../src/plugins/intellij/replacer/replaceIntellijVariableRandom.ts", "../src/plugins/intellij/replacer/intellijAuthReplacer.ts", "../src/plugins/intellij/api/intellijHttpRequest.ts", "../src/plugins/intellij/api/intellijHttpResponse.ts", "../src/plugins/intellij/completionItemProvider.ts", "../src/plugins/intellij/intellijAction.ts", "../src/plugins/intellij/intellijGlobalVariableProvider.ts", "../src/plugins/intellij/intellijHttpRegionParser.ts", "../src/plugins/intellij/intellijProjectContextReplacer.ts", "../src/plugins/intellij/intellijVariableProvider.ts", "../src/plugins/intellij/registerIntellijPlugin.ts", "../src/plugins/javascript/completionItemProvider.ts", "../src/plugins/javascript/globalVariableProvider.ts", "../src/plugins/javascript/httpyacJsApi.ts", "../src/plugins/javascript/moduleUtils.ts", "../src/plugins/javascript/javascriptHttpRegionParser.ts", "../src/plugins/javascript/javascriptVariableReplacer.ts", "../src/plugins/javascript/registerJavascriptPlugin.ts", "../src/plugins/mqtt/mqttRequest.ts", "../src/plugins/mqtt/completionItemProvider.ts", "../src/plugins/mqtt/mqttRequestClient.ts", "../src/plugins/mqtt/mqttHttpRegionParser.ts", "../src/plugins/mqtt/mqttResponseHttpRegionParser.ts", "../src/plugins/mqtt/registerMqttPlugin.ts", "../src/plugins/amqp/amqpMethods/amqpConstants.ts", "../src/plugins/amqp/amqpRequest.ts", "../src/plugins/amqp/amqpRequestClient.ts", "../src/plugins/amqp/amqpMethods/index.ts", "../src/plugins/amqp/amqpMethods/ack.ts", "../src/plugins/amqp/amqpMethods/amqpUtils.ts", "../src/plugins/amqp/amqpMethods/bind.ts", "../src/plugins/amqp/amqpMethods/cancel.ts", "../src/plugins/amqp/amqpMethods/consume.ts", "../src/plugins/amqp/amqpMethods/declare.ts", "../src/plugins/amqp/amqpMethods/deleteMessage.ts", "../src/plugins/amqp/amqpMethods/nack.ts", "../src/plugins/amqp/amqpMethods/publish.ts", "../src/plugins/amqp/amqpMethods/purge.ts", "../src/plugins/amqp/amqpMethods/unbind.ts", "../src/plugins/amqp/amqpHttpRegionParser.ts", "../src/plugins/amqp/amqpResponseHttpRegionParser.ts", "../src/plugins/amqp/completionItemProvider.ts", "../src/plugins/amqp/registerAmqpPlugin.ts", "../src/plugins/websocket/completionItemProvider.ts", "../src/plugins/websocket/registerWebsocketPlugin.ts", "../src/plugins/websocket/websocketRequest.ts", "../src/plugins/websocket/setWebsocketEnvRejectUnauthorized.ts", "../src/plugins/websocket/websocketRequestClient.ts", "../src/plugins/websocket/websocketHttpRegionParser.ts", "../src/plugins/websocket/websocketResponseHttpRegionParser.ts", "../src/plugins/xml/nodeUtils.ts", "../src/plugins/xml/provideAssertValueXPath.ts", "../src/plugins/xml/registerXmlPuglin.ts", "../src/plugins/xml/xmlResponseInterceptor.ts", "../src/plugins/xml/xpathNamespaceHttpRegionParser.ts", "../src/plugins/xml/xpathVariableReplacer.ts", "../src/registerPlugins.ts", "../src/httpYacApi.ts", "../src/cli/send/send.ts", "../src/cli/send/options.ts", "../src/cli/send/jsonOutput.ts", "../src/cli/send/plugin/bailOnFailedTestInterceptor.ts", "../src/cli/send/plugin/loggerFlushInterceptor.ts", "../src/cli/send/plugin/testExitCodeInterceptor.ts", "../src/cli/send/plugin/cliHttpyacPlugin.ts", "../src/cli/send/junitUtils.ts", "../src/cli/send/selectHttpFiles.ts"],
  "sourcesContent": ["export * as cli from './cli';\nexport * from './httpYacApi';\nexport * as io from './io';\nexport * from './models';\nexport * as store from './store';\nexport * as utils from './utils';\n", "export * from './cli';\nexport * from './initCliProvider';\n", "import { Command } from 'commander';\nimport { join } from 'path';\n\nimport * as utils from '../utils';\nimport { initIOProvider } from './initCliProvider';\nimport { oauth2Command } from './oauth2';\nimport { sendCommand } from './send';\n\nexport async function createProgram() {\n  const program = new Command();\n  const packageJson = await utils.parseJson<Record<string, string>>(join(__dirname, '../package.json'));\n  program\n    .version(packageJson?.version || '0.0.1')\n    .description('httpYac - Quickly and easily send REST, SOAP, GraphQL and gRPC requests')\n    .addCommand(oauth2Command())\n    .addCommand(sendCommand(), { isDefault: true });\n  return program;\n}\n\nexport async function execute(rawArgs: string[]): Promise<void> {\n  try {\n    await initIOProvider();\n    const program = await createProgram();\n    await program.parseAsync(rawArgs);\n  } catch (err) {\n    console.error(err);\n    if (!process.exitCode) {\n      process.exitCode = 1;\n    }\n    throw err;\n  } finally {\n    // needed because of async\n    // eslint-disable-next-line node/no-process-exit\n    process.exit();\n  }\n}\n", "export * from './arrayUtils';\nexport * from './assertUtils';\nexport * from './bufferEncodingUtils';\nexport * from './configUtils';\nexport * from './convertUtils';\nexport * from './environmentUtils';\nexport * from './errorUtils';\nexport * from './fsUtils';\nexport * from './httpRegionUtils';\nexport * from './httpStringUtils';\nexport * from './logUtils';\nexport * from './markdownUtils';\nexport * from './mimeTypeUtils';\nexport * from './modelUtils';\nexport * from './parseRequestClientFactory';\nexport * from './parserUtils';\nexport * from './processorContextUtils';\nexport * from './promiseUtils';\nexport * from './randomUtils';\nexport * from './repeatUtils';\nexport * from './requestClientUtils';\nexport * from './requestUtils';\nexport * from './stringUtils';\nexport * from './testUtils';\nexport * from './variableUtils';\n", "export function distinct<T>(array: Array<T>): Array<T> {\n  function onlyUnique(value: T, index: number, self: Array<T>) {\n    return self.indexOf(value) === index;\n  }\n\n  return array.filter(onlyUnique);\n}\n", "import { default as chalk } from 'chalk';\nimport { TextDecoder } from 'util';\n\nimport { log } from '../io';\nimport * as models from '../models';\nimport { toBoolean, toNumber } from './convertUtils';\nimport { parseMimeType } from './mimeTypeUtils';\nimport { isString, toMultiLineString } from './stringUtils';\n\nexport function isHttpRequestMethod(method: string | undefined): method is models.HttpMethod {\n  if (method) {\n    return [\n      'ACL',\n      'BASELINE-CONTROL',\n      'CHECKIN',\n      'CHECKOUT',\n      'CONNECT',\n      'COPY',\n      'DELETE',\n      'GET',\n      'GRAPHQL',\n      'HEAD',\n      'LOCK',\n      'MERGE',\n      'MKACTIVITY',\n      'MKCALENDAR',\n      'MKCOL',\n      'MKWORKSPACE',\n      'MOVE',\n      'OPTIONS',\n      'PATCH',\n      'POST',\n      'PROPFIND',\n      'PROPPATCH',\n      'PUT',\n      'REPORT',\n      'SEARCH',\n      'TRACE',\n      'UNLOCK',\n      'VERSION-CONTROL',\n    ].includes(method.toUpperCase());\n  }\n  return false;\n}\n\nexport function isHttpRequest(request: models.Request | undefined): request is models.HttpRequest {\n  return request?.protocol === 'HTTP';\n}\n\nexport function deleteHeader(headers: Record<string, unknown> | undefined, ...headerNames: string[]): void {\n  if (headers) {\n    for (const headerName of headerNames) {\n      const entry = Object.entries(headers).find(([key]) => key.toLowerCase() === headerName.toLowerCase());\n      if (entry && entry.length > 1) {\n        delete headers[entry[0]];\n      }\n    }\n  }\n}\n\nexport function getHeaderString(\n  headers: Record<string, string | string[] | undefined> | undefined,\n  headerName: string\n): string | undefined {\n  const value = getHeader(headers, headerName);\n\n  if (isString(value)) {\n    return value;\n  }\n  return undefined;\n}\n\nexport function getHeaderBoolean(\n  headers: Record<string, string | string[] | boolean | undefined> | undefined,\n  headerName: string,\n  defaultValue = false\n): boolean {\n  const value = getHeader(headers, headerName);\n\n  return toBoolean(value, defaultValue);\n}\n\nexport function getHeader<T>(headers: Record<string, T> | undefined, headerName: string): T | undefined {\n  if (headers) {\n    const entry = Object.entries(headers).find(([key]) => key.toLowerCase() === headerName.toLowerCase());\n    if (entry && entry.length > 1) {\n      return entry[1];\n    }\n  }\n  return undefined;\n}\n\nexport function getHeaderNumber<T>(headers: Record<string, T> | undefined, headerName: string): number | undefined {\n  const value = getHeader(headers, headerName);\n  return toNumber(value);\n}\n\nexport function getHeaderArray(\n  headers: Record<string, string | string[] | undefined> | undefined,\n  headerName: string,\n  defaultValue: Array<string> = []\n): Array<string> {\n  const value = getHeader(headers, headerName);\n  if (value) {\n    return isString(value) ? [value] : value;\n  }\n  return defaultValue;\n}\n\nexport function parseContentType(headers: Record<string, unknown>): models.ContentType | undefined {\n  const contentType = getHeader(headers, 'content-type');\n  if (isString(contentType)) {\n    return parseMimeType(contentType);\n  }\n  return undefined;\n}\n\nexport interface JWTToken {\n  iss?: string;\n  sub?: string;\n  aud?: string[];\n  exp?: number;\n  iat?: number;\n  jti?: string;\n  scope?: string;\n  name?: string;\n}\n\nexport function decodeJWT(str: string): JWTToken | null {\n  try {\n    const jwtComponents = str.split('.');\n    if (jwtComponents.length !== 3) {\n      return null;\n    }\n    let payload = jwtComponents[1];\n    payload = payload.replace(/-/gu, '+');\n    payload = payload.replace(/_/gu, '/');\n    switch (payload.length % 4) {\n      case 0:\n        break;\n      case 2:\n        payload += '==';\n        break;\n      case 3:\n        payload += '=';\n        break;\n      default:\n        return null;\n    }\n\n    const result = new TextDecoder().decode(Buffer.from(payload, 'base64'));\n    return JSON.parse(result);\n  } catch (err) {\n    log.warn(err);\n    return null;\n  }\n}\n\nexport function toQueryParams(\n  params: Record<string, undefined | string | number | boolean | null | Array<string | number | boolean>>\n): string {\n  return Object.entries(params)\n    .filter(([, value]) => !!value)\n    .map(([key, value]) => {\n      if (Array.isArray(value)) {\n        return value.map(val => `${key}=${encodeURIComponent(val || '')}`).join('&');\n      }\n      return `${key}=${encodeURIComponent(value || '')}`;\n    })\n    .join('&');\n}\n\nexport function requestLoggerFactory(\n  log: (args: string) => void,\n  options?: models.RequestLoggerFactoryOptions,\n  optionsFailed?: models.RequestLoggerFactoryOptions\n): models.RequestLogger {\n  return async function logResponse(\n    response: models.HttpResponse | undefined,\n    httpRegion?: models.HttpRegion\n  ): Promise<void> {\n    let opt = options;\n    if (\n      optionsFailed &&\n      httpRegion?.testResults &&\n      httpRegion.testResults.some(obj =>\n        [models.TestResultStatus.FAILED, models.TestResultStatus.ERROR].includes(obj.status)\n      )\n    ) {\n      opt = optionsFailed;\n    }\n\n    if (!opt) {\n      return;\n    }\n\n    if (\n      opt.onlyFailed &&\n      (!httpRegion?.testResults || httpRegion.testResults.every(obj => obj.status === models.TestResultStatus.SUCCESS))\n    ) {\n      return;\n    }\n\n    log('');\n    log('---------------------');\n    log('');\n    if (httpRegion?.metaData?.title || httpRegion?.metaData?.name || httpRegion?.metaData?.description) {\n      const title = httpRegion?.metaData?.title || httpRegion?.metaData?.name;\n      if (title) {\n        log(chalk`{gray === ${title} ===}`);\n      }\n      if (httpRegion?.metaData?.description) {\n        log(chalk`{gray ${httpRegion.metaData.description}}`);\n      }\n      log('');\n    }\n\n    const request = response?.request || httpRegion?.request;\n    if (request) {\n      if (opt.useShort) {\n        log(chalk`{yellow ${request?.method || 'GET'}} {gray ${request?.url || '?'}}`);\n      } else if (opt.requestOutput) {\n        logRequest(request, {\n          headers: opt.requestHeaders,\n          bodyLength: opt.requestBodyLength,\n        }).forEach(m => log(m));\n      }\n    }\n\n    if (response) {\n      if (opt.useShort) {\n        log(\n          chalk`{gray =>} {cyan.bold ${response.statusCode}} ({yellow ${response.timings?.total || '?'} ms}, {yellow ${\n            response.meta?.size || '?'\n          }})`\n        );\n      } else {\n        const result: Array<string> = [];\n\n        if (opt.responseHeaders) {\n          if (result.length > 0) {\n            result.push('');\n          }\n          result.push(...logResponseHeader(response));\n        }\n        if (opt.timings) {\n          if (result.length > 0) {\n            result.push('');\n          }\n          result.push(...logTimings(response));\n        }\n        if (isString(response.body) && opt.responseBodyLength !== undefined) {\n          let body: string | undefined = response.body;\n          if (opt.responseBodyPrettyPrint && response.prettyPrintBody) {\n            body = response.prettyPrintBody;\n          }\n          body = getPartOfBody(body, opt.responseBodyLength);\n          if (body) {\n            if (result.length > 0) {\n              result.push('');\n            }\n            result.push(body);\n          }\n        }\n        log(toMultiLineString(result));\n      }\n    }\n\n    if (httpRegion?.testResults) {\n      for (const testResult of httpRegion.testResults) {\n        let message = chalk`{green ${models.testSymbols.ok} ${testResult.message || 'Test passed'}}`;\n        if (testResult.status === models.TestResultStatus.SKIPPED) {\n          message = chalk`{yellow ${models.testSymbols.skipped} Test skipped}`;\n        } else if ([models.TestResultStatus.ERROR, models.TestResultStatus.FAILED].includes(testResult.status)) {\n          const errorMessage = testResult.error ? ` (${testResult.error?.displayMessage})` : '';\n          message = chalk`{red ${models.testSymbols.error} ${testResult.message || 'Test failed'}${errorMessage}}`;\n\n          if (!options?.useShort && testResult.error?.error.stack) {\n            message = [message, testResult.error?.error.stack].join('\\r\\n');\n          }\n        }\n        log(message);\n      }\n    }\n  };\n}\n\nexport function getPartOfBody(body: string, length: number | undefined) {\n  let result = body;\n  if (typeof length === 'undefined' || length < 0) {\n    return undefined;\n  }\n  if (length > 0) {\n    result = body.slice(0, Math.min(body.length, length));\n    if (body.length >= length) {\n      result += `... (${body.length - length} characters more)`;\n    }\n  }\n  return result;\n}\n\nfunction logRequest(\n  request: models.Request,\n  options: {\n    headers?: boolean;\n    bodyLength?: number;\n  }\n) {\n  const result: Array<string> = [];\n  result.push(chalk`{cyan.bold ${request.method} ${request.url}}`);\n  if (request.headers && options.headers) {\n    result.push(\n      ...Object.entries(request.headers)\n        .map(([key, value]) => chalk`{yellow ${key}}: ${value}`)\n        .sort()\n    );\n  }\n  if (isHttpRequest(request) && (request.options?.https?.certificate || request.options?.https?.pfx)) {\n    result.push(chalk`{yellow client-cert}: true`);\n  }\n  if (isString(request.body) && options.bodyLength !== undefined) {\n    result.push('');\n    result.push(chalk`{gray ${getPartOfBody(request.body, options.bodyLength)}}`);\n  }\n  return result;\n}\n\nfunction logResponseHeader(response: models.HttpResponse) {\n  const result: Array<string> = [];\n  result.push(\n    chalk`{cyan.bold ${response.protocol}} {cyan.bold ${response.statusCode}} {bold ${\n      response.statusMessage ? ` - ${response.statusMessage}` : ''\n    }}`\n  );\n  if (response.headers) {\n    result.push(\n      ...Object.entries(response.headers)\n        .filter(([key]) => !key.startsWith(':'))\n        .map(([key, value]) => chalk`{yellow ${key}}: ${value}`)\n        .sort()\n    );\n  }\n  return result;\n}\n\nfunction logTimings(response: models.HttpResponse) {\n  const result: Array<string> = [];\n\n  if (response.timings) {\n    result.push(chalk`{cyan.bold Timings}:`);\n    result.push(\n      ...Object.entries(response.timings)\n        .filter(([, value]) => !!value)\n        .map(([key, value]) => chalk`{yellow ${key}}: ${value}`)\n        .sort()\n    );\n  }\n  return result;\n}\n\nexport function cloneRequest(request: models.Request): models.Request {\n  const clone: models.Request = {\n    url: request.url,\n    method: request.method,\n    body: request.body,\n    contentType: request.contentType && {\n      ...request.contentType,\n    },\n    headers: request.headers && {\n      ...request.headers,\n    },\n    supportsStreaming: request.supportsStreaming,\n  };\n  return clone;\n}\n\nexport function isHttpResponse(val: unknown): val is models.HttpResponse {\n  const obj = val as models.HttpResponse;\n  return !!obj?.statusCode;\n}\n\nexport function shrinkCloneResponse(response: models.HttpResponse): models.HttpResponse {\n  const clone = cloneResponse(response);\n  delete clone.rawBody;\n  delete clone.prettyPrintBody;\n  delete clone.request;\n  return clone;\n}\n\nexport function cloneResponse(response: models.HttpResponse): models.HttpResponse {\n  const clone: models.HttpResponse = {\n    name: response.name,\n    protocol: response.protocol,\n    statusCode: response.statusCode,\n    statusMessage: response.statusMessage,\n    httpVersion: response.httpVersion,\n    headers: response.headers,\n    body: response.body,\n    rawHeaders: response.rawHeaders,\n    rawBody: response.rawBody,\n    parsedBody: response.parsedBody,\n    prettyPrintBody: response.prettyPrintBody,\n    contentType: response.contentType,\n    timings: response.timings && {\n      ...response.timings,\n    },\n    meta: response.meta,\n    tags: response.tags,\n    request: response.request && cloneRequest(response.request),\n  };\n  return clone;\n}\n\n/**\n * Merges a raw HTTP headers array from a got HTTP Response into a record that\n * groups same-named lower-cased HTTP Headers to arrays of values.\n * I.e. HTTP headers that only appear once will be associated with a single-item string-array,\n * Headers that appear multiple times (e.g. Set-Cookie) are stored in multi-item string-arrays in order of appearance.\n * @param rawHeaders A raw HTTP headers array, even numbered indices represent HTTP header names, odd numbered indices represent header values.\n */\nexport function mergeRawHttpHeaders(rawHeaders: string[]): Record<string, string[]> {\n  const mergedHeaders: Record<string, string[]> = {};\n  for (let i = 0; i < rawHeaders.length; i += 2) {\n    const headerRawName = rawHeaders[i];\n    const headerRawValue = rawHeaders[i + 1];\n    if (typeof headerRawValue === 'undefined') {\n      continue; // Likely at end of array, continue will make for-condition to evaluate falsy\n    }\n    const headerName = headerRawName.toLowerCase();\n    mergedHeaders[headerName] = mergedHeaders[headerName] || [];\n    mergedHeaders[headerName].push(headerRawValue);\n  }\n  return mergedHeaders;\n}\n", "export * from './completionItemProvider';\nexport * from './fileProvider';\nexport * from './httpClientProvider';\nexport * from './javascriptProvider';\nexport * from './logger';\nexport * from './userInteractionProvider';\n", "import * as models from '../models';\n\nexport type CompletionItem = {\n  name: string;\n  description: string;\n  text?: string;\n};\n\nexport const completionItemProvider: {\n  emptyLineProvider: Array<() => Array<CompletionItem>>;\n  variableProvider: Array<() => Array<CompletionItem>>;\n  requestHeaderProvider: Array<(request: models.Request) => Array<CompletionItem>>;\n} = {\n  emptyLineProvider: [],\n  variableProvider: [],\n  requestHeaderProvider: [],\n};\n", "import { FileProvider, PathLike } from '../models';\n\nexport const fileProvider: FileProvider = {\n  EOL: '\\r\\n',\n  exists: () => {\n    throw new Error('Not Implemented');\n  },\n  dirname: () => {\n    throw new Error('Not Implemented');\n  },\n  hasExtension: () => {\n    throw new Error('Not Implemented');\n  },\n  isAbsolute: () => {\n    throw new Error('Not Implemented');\n  },\n  joinPath: () => {\n    throw new Error('Not Implemented');\n  },\n  readFile: () => {\n    throw new Error('Not Implemented');\n  },\n  readBuffer: () => {\n    throw new Error('Not Implemented');\n  },\n  writeBuffer: () => {\n    throw new Error('Not Implemented');\n  },\n  readdir: () => {\n    throw new Error('Not Implemented');\n  },\n  fsPath: toString,\n  toString,\n};\n\nfunction toString(fileName: PathLike): string {\n  if (typeof fileName === 'string') {\n    return fileName;\n  }\n  return fileName.toString();\n}\n", "import * as models from '../models';\n\nexport const httpClientProvider: models.HttpClientProvider = {};\n", "import * as models from '../models';\n\nexport const javascriptProvider: models.JavascriptProvider = {\n  require: {},\n  evalExpression: async function evalExpression(expression: string, context: models.ProcessorContext) {\n    return context.variables[expression];\n  },\n};\n", "import { LastOutHook, SeriesHook, WaterfallHook } from 'hookpoint';\n\nimport { HttpRegionParserResult } from './httpRegionParserResult';\nimport { Request } from './httpRequest';\nimport { HttpResponse } from './httpResponse';\nimport { getHttpLineGenerator, ParserContext } from './parserContext';\nimport { ProcessorContext } from './processorContext';\nimport { VariableProviderContext } from './variableProviderContext';\nimport { Variables } from './variables';\n\nexport interface HttpFileHooks {\n  readonly parse: ParseHook;\n  readonly parseMetaData: ParseMetaDataHook;\n  readonly parseEndRegion: ParseEndRegionHook;\n  readonly replaceVariable: ReplaceVariableHook;\n  readonly provideEnvironments: ProvideEnvironmentsHook;\n  readonly provideVariables: ProvideVariablesHook;\n  readonly provideAssertValue: ProvideAssertValue;\n\n  readonly execute: ExecuteHook;\n  readonly onStreaming: OnStreaming;\n  readonly onRequest: OnRequestHook;\n  readonly onResponse: OnResponseHook;\n  readonly responseLogging: ResponseLoggingHook;\n}\n\nexport class ParseHook extends LastOutHook<[getHttpLineGenerator, ParserContext], HttpRegionParserResult | false> {\n  constructor() {\n    super(obj => !!obj);\n    this.id = 'ParseHook';\n  }\n}\n\nexport class ParseMetaDataHook extends LastOutHook<[string, string | undefined, ParserContext], boolean> {\n  constructor() {\n    super(obj => !!obj);\n    this.id = 'ParseMetaDataHook';\n  }\n}\n\nexport class ProvideAssertValue extends LastOutHook<\n  [string, string | undefined, HttpResponse, ProcessorContext],\n  unknown\n> {\n  constructor() {\n    super(obj => obj !== false);\n    this.id = 'ProvideAssertValue';\n  }\n}\nexport class ParseEndRegionHook extends SeriesHook<[ParserContext], void> {\n  constructor() {\n    super();\n    this.id = 'ParseEndRegionHook';\n  }\n}\nexport class ProvideVariablesHook extends SeriesHook<[string[] | undefined, VariableProviderContext], Variables> {\n  constructor() {\n    super();\n    this.id = 'ProvideVariablesHook';\n  }\n}\nexport class ProvideEnvironmentsHook extends SeriesHook<[VariableProviderContext], string[]> {\n  constructor() {\n    super();\n    this.id = 'ProvideEnvironmentsHook';\n  }\n}\nexport class ReplaceVariableHook extends WaterfallHook<[unknown, string, ProcessorContext], undefined> {\n  constructor() {\n    super(obj => obj === undefined);\n    this.id = 'ReplaceVariableHook';\n  }\n}\nexport class OnRequestHook extends SeriesHook<[Request, ProcessorContext], void> {\n  constructor() {\n    super();\n    this.id = 'BeforeRequestHook';\n  }\n}\nexport class OnResponseHook extends SeriesHook<[HttpResponse, ProcessorContext], void> {\n  constructor() {\n    super();\n    this.id = 'AfterRequestHook';\n  }\n}\n\nexport class OnStreaming extends SeriesHook<[ProcessorContext], void> {\n  constructor() {\n    super();\n    this.id = 'OnStreaming';\n  }\n}\nexport class ResponseLoggingHook extends SeriesHook<[HttpResponse, ProcessorContext], void> {\n  constructor() {\n    super();\n    this.id = 'ResponseLoggingHook';\n  }\n}\nexport class ExecuteHook extends SeriesHook<[ProcessorContext], boolean> {\n  constructor() {\n    super(obj => !obj);\n    this.id = 'ExecuteHook';\n  }\n}\n", "import { HookCancel as hookPointHookCancel } from 'hookpoint';\n\nimport * as utils from '../utils';\nimport { EnvironmentConfig } from './environmentConfig';\nimport { FileProvider } from './fileProvider';\nimport { HttpFileHooks } from './hooks';\nimport { HttpClientProvider } from './httpClientProvider';\nimport { HttpFile } from './httpFile';\nimport { JavascriptProvider } from './javascriptProvider';\nimport { LogHandler } from './logHandler';\nimport { PathLike } from './pathLike';\nimport { SessionStore } from './sessionStore';\nimport { UserInteractionProvider } from './userInteractionProvider';\n\nexport const HookCancel: typeof hookPointHookCancel = hookPointHookCancel;\n\nexport interface HttpyacHooksApi {\n  readonly version: string;\n  readonly rootDir?: PathLike;\n  readonly httpFile: Readonly<HttpFile>;\n  readonly config: EnvironmentConfig;\n  readonly hooks: HttpFileHooks;\n  readonly log: LogHandler;\n  readonly fileProvider: FileProvider;\n  readonly sessionStore: SessionStore;\n  readonly userInteractionProvider: UserInteractionProvider;\n  readonly httpClientProvider: HttpClientProvider;\n  readonly javascriptProvider: JavascriptProvider;\n  readonly utils: typeof utils;\n  getHookCancel(): typeof HookCancel;\n}\n", "import { HttpSymbolKind } from './httpSymbolKind';\n\nexport class HttpSymbol {\n  public name: string;\n  public description: string;\n  public kind: HttpSymbolKind;\n  public startLine: number;\n  public startOffset: number;\n  public endLine: number;\n  public endOffset: number;\n\n  public source?: string;\n  public children?: Array<HttpSymbol>;\n\n  constructor(options: {\n    name: string;\n    description: string;\n    kind: HttpSymbolKind;\n    source?: string;\n    startLine: number;\n    startOffset: number;\n    endLine: number;\n    endOffset: number;\n    children?: Array<HttpSymbol>;\n  }) {\n    this.name = options.name || 'symbol';\n    this.description = options.description;\n    this.kind = options.kind;\n    this.startLine = options.startLine;\n    this.startOffset = options.startOffset;\n    this.endLine = options.endLine;\n    this.endOffset = options.endOffset;\n    this.children = options.children;\n    this.source = options.source;\n  }\n\n  public getSymbolsForLine(line: number): Array<HttpSymbol> {\n    const result: Array<HttpSymbol> = [];\n    if (this.startLine <= line || this.endLine >= line) {\n      result.push(this);\n      if (this.children) {\n        for (const child of this.children) {\n          result.push(...child.getSymbolsForLine(line));\n        }\n      }\n    }\n\n    return result;\n  }\n\n  public filter(predicate: (symbol: HttpSymbol) => boolean): Array<HttpSymbol> {\n    const result: Array<HttpSymbol> = [];\n    if (predicate(this)) {\n      result.push(this);\n    }\n    if (this.children) {\n      for (const child of this.children) {\n        result.push(...child.filter(predicate));\n      }\n    }\n    return result;\n  }\n}\n", "export enum HttpSymbolKind {\n  request = 'request',\n  requestLine = 'requestLine',\n  requestHeader = 'requestHeader',\n  requestBody = 'requestBody',\n  response = 'response',\n  gql = 'gql',\n  proto = 'proto',\n  script = 'script',\n  metaData = 'metaData',\n  comment = 'comment',\n\n  url = 'url',\n  operator = 'operator',\n  key = 'key',\n  value = 'value',\n  variable = 'variable',\n  path = 'path',\n  variableDefinition = 'variableDefinition',\n  text = 'text',\n}\n", "import { HttpRegion } from './httpRegion';\nimport { HttpResponse, StreamResponse } from './httpResponse';\n\nexport const enum LogLevel {\n  trace = 1,\n  debug = 2,\n  warn = 5,\n  info = 10,\n  error = 100,\n  none = 1000,\n}\n\nexport interface LogHandler {\n  readonly options: {\n    level?: LogLevel;\n    logMethod?: (level: LogLevel, ...params: unknown[]) => void;\n  };\n  info(...params: unknown[]): void;\n  log(...params: unknown[]): void;\n  trace(...params: unknown[]): void;\n  debug(...params: unknown[]): void;\n  error(...params: unknown[]): void;\n  warn(...params: unknown[]): void;\n}\n\nexport interface ConsoleLogHandler extends LogHandler {\n  logPriority(message: string): void;\n  collectMessages(): void;\n  flush(): void;\n}\n\nexport type RequestLogger = (response: HttpResponse | undefined, httpRegion?: HttpRegion) => Promise<void>;\n\nexport type StreamLogger = (type: string, response: HttpResponse & StreamResponse) => Promise<void>;\n", "import { GrpcObject } from '@grpc/grpc-js';\nimport { PackageDefinition } from '@grpc/proto-loader';\n\nimport { ProcessorContext } from './processorContext';\n\nexport class ProtoDefinition {\n  loaderOptions?: Record<string, string>;\n\n  constructor(readonly fileName: string) {}\n  packageDefinition?: PackageDefinition;\n  grpcObject?: GrpcObject;\n}\n\nexport interface ProtoProcessorContext extends ProcessorContext {\n  options: {\n    protoDefinitions?: Record<string, ProtoDefinition>;\n  };\n}\n", "export enum RepeatOrder {\n  sequential,\n  parallel,\n}\n\nexport interface RepeatOptions {\n  type: RepeatOrder;\n  count: number;\n}\n", "import { HttpResponse, StreamResponse } from './httpResponse';\n\nexport type RequestClientResponse = undefined | void | HttpResponse;\n\nexport interface RequestClient<T = unknown> {\n  readonly supportsStreaming: boolean;\n  getSessionId?(): string;\n  reportMessage: string;\n  nativeClient: T;\n  connect(obj: T | undefined): Promise<T>;\n  send(body?: unknown): Promise<void>;\n  /**\n   * called after onStreaming finished using this client\n   */\n  streamEnded?(): void;\n  disconnect(err?: Error): void;\n  addEventListener<K extends keyof RequestClientEventMap>(\n    type: K,\n    listener: (ev: RequestClientEvent<RequestClientEventMap[K]>) => void\n  ): void;\n  removeEventListener<K extends keyof RequestClientEventMap>(\n    type: K,\n    listener: (ev: RequestClientEvent<RequestClientEventMap[K]>) => void\n  ): void;\n  triggerEnd(): void;\n}\n\ninterface RequestClientEventMap {\n  progress: number;\n  message: [string, HttpResponse & StreamResponse];\n  metaData: [string, HttpResponse & StreamResponse];\n  disconnect: void;\n  end: void;\n}\n\nexport class RequestClientEvent<T = undefined> extends Event {\n  constructor(\n    message: string,\n    public readonly detail: T\n  ) {\n    super(message);\n  }\n}\n\nexport abstract class AbstractRequestClient<T> implements RequestClient<T> {\n  abstract readonly supportsStreaming: boolean;\n  abstract disconnect(err?: Error): void;\n  abstract nativeClient: T;\n  abstract reportMessage: string;\n  abstract connect(obj: T | undefined): Promise<T>;\n  abstract send(body?: unknown): Promise<void>;\n  private eventEmitter = new EventTarget();\n\n  addEventListener<K extends keyof RequestClientEventMap>(\n    type: K,\n    listener: (evt: RequestClientEvent<RequestClientEventMap[K]>) => void\n  ): void {\n    this.eventEmitter.addEventListener(type, evt =>\n      this.isRequestClientEvent<RequestClientEventMap[K]>(evt) ? listener(evt) : undefined\n    );\n  }\n  removeEventListener<K extends keyof RequestClientEventMap>(\n    type: K,\n    listener: (evt: RequestClientEvent<RequestClientEventMap[K]>) => void\n  ) {\n    this.eventEmitter.removeEventListener(type, evt =>\n      this.isRequestClientEvent<RequestClientEventMap[K]>(evt) ? listener(evt) : undefined\n    );\n  }\n\n  private isRequestClientEvent<T>(evt: Event): evt is RequestClientEvent<T> {\n    return evt instanceof RequestClientEvent;\n  }\n  protected onMessage(type: string, response: HttpResponse & StreamResponse) {\n    this.eventEmitter.dispatchEvent(new RequestClientEvent('message', [type, response]));\n  }\n  protected onProgress(percent: number) {\n    this.eventEmitter.dispatchEvent(new RequestClientEvent('progress', percent));\n  }\n  protected onMetaData(type: string, response: HttpResponse & StreamResponse) {\n    this.eventEmitter.dispatchEvent(new RequestClientEvent('metaData', [type, response]));\n  }\n  protected onDisconnect() {\n    this.eventEmitter.dispatchEvent(new RequestClientEvent('disconnect', undefined));\n  }\n  public triggerEnd() {\n    this.eventEmitter.dispatchEvent(new RequestClientEvent('end', undefined));\n  }\n}\n", "export const testSymbols = {\n  ok: '\u2713',\n  error: '\u2716',\n  skipped: '\u25CB',\n};\n\nexport interface TestFunction {\n  (message: string, testMethod: () => void): void;\n  status(status: number): void;\n  header(headerKey: string, val: string | string[] | undefined): void;\n  headerContains(headerKey: string, val: string): void;\n  responseBody(val: unknown): void;\n  hasResponseBody(): void;\n  hasNoResponseBody(): void;\n}\n", "export interface ErrorDescription {\n  error: Error;\n  displayMessage: string;\n  errorType?: string;\n  message?: string;\n  file?: string;\n  line?: string;\n  offset?: string;\n}\n\nexport enum TestResultStatus {\n  SUCCESS = 'SUCCESS',\n  FAILED = 'FAILED',\n  SKIPPED = 'SKIPPED',\n  ERROR = 'ERROR',\n}\n\nexport interface TestResult {\n  message: string;\n  status: TestResultStatus;\n  error?: ErrorDescription;\n}\n", "export enum VariableType {\n  variable = 'Variable',\n  url = 'Url',\n  body = 'Body',\n  filePath = 'FilePath',\n}\n", "import { ConsoleLogHandler, LogHandler, LogLevel } from '../models';\n\ntype LogCache = Array<() => void> | undefined;\n\nexport class Logger implements ConsoleLogHandler {\n  private collectCache: LogCache;\n  private priorityCache: LogCache;\n  constructor(\n    readonly options: {\n      level?: LogLevel;\n      logMethod?: (level: LogLevel, ...params: unknown[]) => void;\n      onlyFailedTests?: boolean;\n      noTrace?: boolean;\n    }\n  ) {}\n\n  public collectMessages(): void {\n    this.collectCache = [];\n    this.priorityCache = [];\n  }\n\n  public flush(): void {\n    this.priorityCache = this.flushCache(this.priorityCache);\n    this.collectCache = this.flushCache(this.collectCache);\n  }\n\n  private flushCache(cache: LogCache) {\n    if (cache) {\n      for (const action of cache) {\n        action();\n      }\n      return [];\n    }\n    return undefined;\n  }\n\n  private writeLog(logLevel: LogLevel, cache: LogCache, action: (...params: unknown[]) => void, params: unknown[]) {\n    if (!this.options?.level || logLevel >= this.options.level) {\n      let log = () => action(...params);\n      if (this.options?.logMethod) {\n        log = () => this.options?.logMethod?.(logLevel, ...params);\n      }\n      if (cache) {\n        cache.push(log);\n      } else {\n        log();\n      }\n    }\n  }\n\n  public info(...params: unknown[]): void {\n    this.writeLog(LogLevel.info, this.collectCache, console.info, params);\n  }\n  public log(...params: unknown[]): void {\n    this.writeLog(LogLevel.info, this.collectCache, console.log, params);\n  }\n  public trace(...params: unknown[]): void {\n    this.writeLog(LogLevel.trace, this.collectCache, this.options.noTrace ? console.debug : console.trace, params);\n  }\n  public debug(...params: unknown[]): void {\n    this.writeLog(LogLevel.debug, this.collectCache, console.debug, params);\n  }\n  public error(...params: unknown[]): void {\n    this.writeLog(LogLevel.error, this.collectCache, console.error, params);\n  }\n  public warn(...params: unknown[]): void {\n    this.writeLog(LogLevel.warn, this.collectCache, console.warn, params);\n  }\n  public logPriority(...msg: Array<string>) {\n    this.writeLog(LogLevel.info, this.priorityCache, console.info, msg);\n  }\n  public clear(): void {\n    console.clear();\n  }\n}\n\nexport const log: LogHandler = new Logger({\n  level: LogLevel.warn,\n  noTrace: true,\n});\n", "import { UserInteractionProvider } from '../models';\n\nexport const userInteractionProvider: UserInteractionProvider = {\n  isTrusted: () => true,\n  showNote: async function showNote() {\n    throw new Error('Not Implemented');\n  },\n  showInputPrompt: async function showInputPrompt() {\n    throw new Error('Not Implemented');\n  },\n  showListPrompt: async function showListPrompt() {\n    throw new Error('Not Implemented');\n  },\n};\n", "import { fileProvider, log } from '../io';\n\nexport function toMultiLineString(lines: Array<string>): string {\n  return lines.join(fileProvider.EOL);\n}\n\nexport function toMultiLineArray(text: string): Array<string> {\n  return text.split(/\\r?\\n/gu);\n}\n\nexport function isUndefined(obj: unknown): obj is undefined {\n  return typeof obj === 'undefined';\n}\n\nexport function isString(text: unknown): text is string {\n  return typeof text === 'string';\n}\n\nexport function isStringEmpty(text: unknown): boolean {\n  return typeof text === 'string' && /^(\\s*)?$/u.test(text);\n}\n\nexport function stateGenerator(length = 30): string {\n  // unreserved characters according to RFC 3986\n  const chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-._~';\n  const result = [];\n  for (let i = length; i > 0; --i) {\n    result.push(chars[Math.floor(Math.random() * chars.length)]);\n  }\n  return result.join('');\n}\n\nexport function toString(value: unknown): string | undefined {\n  if (isString(value)) {\n    return value;\n  }\n  if (typeof value === 'number') {\n    return `${value}`;\n  }\n  if (value instanceof Date) {\n    return value.toISOString();\n  }\n  if (value instanceof Error) {\n    return value.message;\n  }\n  if (Buffer.isBuffer(value)) {\n    return value.toString('utf-8');\n  }\n  if (Array.isArray(value) && value.every(obj => Buffer.isBuffer(obj))) {\n    const jsonData = value.map(obj => Buffer.isBuffer(obj) && obj.toString('utf8'));\n    return stringifySafe(jsonData);\n  }\n  if (value) {\n    return stringifySafe(value);\n  }\n  return undefined;\n}\n\nexport function stringifySafe(obj: unknown, indent = 0) {\n  try {\n    return JSON.stringify(obj, null, indent);\n  } catch (err) {\n    log.debug(`JSON.stringify error`, err);\n    const getCircularReplacer = () => {\n      const seen = new WeakSet();\n      return (_key: string, value: unknown) => {\n        if (typeof value === 'object' && value !== null) {\n          if (seen.has(value)) {\n            return undefined;\n          }\n          seen.add(value);\n        }\n        return value;\n      };\n    };\n    return JSON.stringify(obj, getCircularReplacer(), indent);\n  }\n}\n\nexport function ensureString(value: unknown): string | null | undefined {\n  if (typeof value === 'undefined' || value === null) {\n    return value;\n  }\n  if (isString(value)) {\n    return value;\n  }\n  return `${value}`;\n}\n", "import { ensureString, toString } from './stringUtils';\n\nexport function toBoolean(value: unknown, defaultValue = false): boolean {\n  if (typeof value === 'boolean') return value;\n  if (typeof value === 'number') return !!value;\n  const stringValue = ensureString(value)?.trim();\n  if (!stringValue) {\n    return defaultValue;\n  }\n  if (/^true$/iu.test(stringValue)) {\n    return true;\n  }\n  if (/^false$/iu.test(stringValue)) {\n    return false;\n  }\n  const numberValue = parseFloat(stringValue);\n  if (isNaN(numberValue)) {\n    return defaultValue;\n  }\n  return !!numberValue;\n}\nexport function toNumber(value: unknown): number | undefined {\n  if (typeof value === 'number') {\n    return value;\n  }\n  const stringValue = ensureString(value);\n  if (stringValue) {\n    const numberValue = Number.parseFloat(stringValue.trim());\n    if (!Number.isNaN(numberValue)) {\n      return numberValue;\n    }\n  }\n  return undefined;\n}\n\nexport function toBufferLike(value: unknown): Buffer | string | undefined {\n  if (Buffer.isBuffer(value)) {\n    return value;\n  }\n  return toString(value);\n}\n", "import { ContentType } from '../models';\n\nexport function parseMimeType(contentType: string): ContentType {\n  const [mimeType, ...parameters] = contentType.split(';').map(v => v.trim());\n  const charset = parameters.find(p => p.startsWith('charset='))?.split('=')[1];\n  const boundary = parameters.find(p => p.startsWith('boundary='))?.split('=')[1];\n  return { mimeType, contentType, charset, boundary };\n}\n\nexport function isMimeTypeJSON(contentType: ContentType | undefined): boolean {\n  return (\n    !!contentType &&\n    (contentType.mimeType === 'application/json' ||\n      contentType.mimeType === 'text/json' ||\n      contentType.mimeType.indexOf('+json') >= 0 ||\n      contentType.mimeType.indexOf('x-amz-json') >= 0)\n  );\n}\nexport function isMimeTypeJavascript(contentType: ContentType | undefined): boolean {\n  return contentType?.mimeType === 'application/javascript' || contentType?.mimeType === 'text/x-javascript';\n}\nexport function isMimeTypeXml(contentType: ContentType | undefined): boolean {\n  return (\n    !!contentType &&\n    (contentType.mimeType === 'application/xml' ||\n      contentType.mimeType === 'text/xml' ||\n      contentType.mimeType.indexOf('+xml') >= 0)\n  );\n}\nexport function isMimeTypeHtml(contentType: ContentType | undefined): boolean {\n  return contentType?.mimeType === 'text/html';\n}\nexport function isMimeTypeCSS(contentType: ContentType | undefined): boolean {\n  return contentType?.mimeType === 'text/css';\n}\n\nexport function isMimeTypeMarkdown(contentType: ContentType | undefined): boolean {\n  return contentType?.mimeType === 'text/markdown';\n}\n\nexport function isMimeTypeMultiPartFormData(contentType: ContentType | undefined): boolean {\n  return contentType?.mimeType === 'multipart/form-data';\n}\n\nexport function isMimeTypeMultiPartMixed(contentType: ContentType | undefined): boolean {\n  return contentType?.mimeType === 'multipart/mixed';\n}\n\nexport function isMimeTypeNewlineDelimitedJSON(contentType: ContentType | undefined): boolean {\n  return contentType?.mimeType === 'application/x-ndjson';\n}\n\nexport function isMimeTypeFormUrlEncoded(contentType: ContentType | undefined): boolean {\n  return contentType?.mimeType === 'application/x-www-form-urlencoded';\n}\n\nexport function isMimeTypePdf(contentType: ContentType | undefined): boolean {\n  return contentType?.mimeType === 'application/pdf';\n}\n\nexport function isMimeTypeImage(contentType: ContentType | undefined): boolean {\n  if (contentType) {\n    return ['image/jpeg', 'image/gif', 'image/webp', 'image/png', 'image/bmp'].indexOf(contentType.mimeType) >= 0;\n  }\n  return false;\n}\n", "import { HttpResponse } from '../models';\nimport { getHeader } from './requestUtils';\nimport { isString } from './stringUtils';\n\nfunction assert(condition: boolean, message: string) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n\nexport function assertStatusEquals(response: HttpResponse, status: number): void {\n  assert(response.statusCode === status, `response status is ${response.statusCode} (expected: ${status})`);\n}\n\nexport function assertMaxTotalTime(response: HttpResponse, maxTotalTime: number): void {\n  assert(\n    response.timings?.total ? response.timings.total < maxTotalTime : true,\n    `total time is ${response.timings?.total} (expected max ${maxTotalTime})`\n  );\n}\n\nexport function assertHeaderEquals(\n  response: HttpResponse,\n  headerKey: string,\n  val: string | string[] | undefined\n): void {\n  const headerValue = getHeader(response.headers, headerKey);\n  assert(headerValue === val, `response header ${headerKey} is ${headerValue} (expected: ${val})`);\n}\n\nexport function assertHeaderContains(response: HttpResponse, headerKey: string, val: string): void {\n  const headerValue = getHeader(response.headers, headerKey);\n  if (isString(headerValue) || Array.isArray(headerValue)) {\n    assert(!!headerValue.indexOf(val), `response header contains ${val}`);\n  }\n}\n\nexport function assertHasResponseBody(response: HttpResponse): void {\n  console.assert(!!response.body, 'response body exists');\n}\nexport function assertHasNoResponseBody(response: HttpResponse): void {\n  assert(!response.body, 'response body does not exists');\n}\n\nexport function assertResponseBodyEquals(response: HttpResponse, val: unknown): void {\n  assert(response.body === val, `response body equals ${val}`);\n}\n", "export function isBufferEncoding(encoding: string): encoding is BufferEncoding {\n  return (\n    ['ascii', 'utf8', 'utf-8', 'utf16le', 'ucs2', 'ucs-2', 'base64', 'latin1', 'binary', 'hex'].indexOf(encoding) >= 0\n  );\n}\n\nexport function getBufferEncoding(encoding: string | undefined): BufferEncoding {\n  if (encoding && isBufferEncoding(encoding)) {\n    return encoding;\n  }\n  return 'utf8';\n}\n", "import { fileProvider } from '../io';\nimport { PathLike } from '../models';\nimport { isString } from './stringUtils';\n\nexport async function toAbsoluteFilename(\n  fileName: PathLike | undefined,\n  baseName: PathLike | undefined\n): Promise<PathLike | undefined> {\n  if (fileName) {\n    if ((await fileProvider.isAbsolute(fileName)) && (await fileProvider.exists(fileName))) {\n      return fileName;\n    }\n    if (baseName && isString(fileName)) {\n      const absolute = fileProvider.joinPath(baseName, fileName);\n      if (await fileProvider.exists(absolute)) {\n        return absolute;\n      }\n    }\n  }\n  return undefined;\n}\n\nexport function extensionName(fileName: PathLike) {\n  const file = fileProvider.toString(fileName);\n  const dotIndex = file.lastIndexOf('.');\n  if (dotIndex > 0 && dotIndex < file.length - 2) {\n    return file.slice(dotIndex + 1);\n  }\n  return undefined;\n}\n\nexport function replaceInvalidChars(fileName: string): string {\n  const result = fileName.replace(/[/\\\\?%*:|\"<>\\s()@\\-~,=$]/gu, '_');\n  return result\n    .split('_')\n    .filter(obj => obj.length > 0)\n    .join('_');\n}\n\nexport function shortenFileName(fileName: string, maxChars = 50): string {\n  const result: Array<string> = [];\n\n  let charLength = 0;\n  for (const item of fileName.split('_').reverse()) {\n    if (item.length + charLength < maxChars) {\n      result.push(item);\n      charLength += item.length + 1;\n    } else if (result.length === 0) {\n      result.push(item);\n    }\n  }\n  const joinedString = result.reverse().join('_');\n  return joinedString.slice(Math.max(joinedString.length - maxChars, 0));\n}\n\nexport async function findRootDirOfFile(\n  filename: PathLike,\n  workingDir?: PathLike,\n  ...files: Array<string>\n): Promise<PathLike | undefined> {\n  let file = filename;\n  const fsPath = fileProvider.fsPath(filename);\n  if (!(await fileProvider.isAbsolute(filename)) && workingDir && fsPath) {\n    file = fileProvider.joinPath(workingDir, fsPath);\n  }\n  const dirName = fileProvider.dirname(file);\n  return await findRootDir(dirName, ...files);\n}\n\nexport async function findRootDir(\n  currentDir: PathLike | undefined,\n  ...files: Array<string>\n): Promise<PathLike | undefined> {\n  return iterateDirectoryTree(currentDir, async (dir: PathLike) => {\n    const dirFiles = await fileProvider.readdir(dir);\n\n    if (dirFiles.some(file => files.indexOf(file) >= 0)) {\n      return true;\n    }\n    for (const file of files) {\n      if (dirFiles.some(obj => file.startsWith(obj))) {\n        if (await fileProvider.exists(fileProvider.joinPath(dir, file))) {\n          return true;\n        }\n      }\n    }\n    return false;\n  });\n}\n\nexport async function iterateUntilRoot(\n  currentDir: PathLike,\n  rootDir: PathLike | undefined,\n  action: (dir: PathLike) => Promise<void>\n) {\n  return iterateDirectoryTree(currentDir, async dir => {\n    await action(dir);\n    return !!rootDir && equalsPath(rootDir, dir);\n  });\n}\n\nexport async function iterateDirectoryTree(\n  currentDir: PathLike | undefined,\n  predicate: (dir: PathLike) => Promise<boolean>\n): Promise<PathLike | undefined> {\n  if (currentDir) {\n    if (await predicate(currentDir)) {\n      return currentDir;\n    }\n\n    if (!equalsPath(fileProvider.dirname(currentDir), currentDir)) {\n      return iterateDirectoryTree(fileProvider.dirname(currentDir), predicate);\n    }\n  }\n  return undefined;\n}\n\nexport function equalsPath(path: PathLike | undefined, path2: PathLike | undefined): boolean {\n  return !!path && !!path2 && fileProvider.toString(path) === fileProvider.toString(path2);\n}\n", "import * as io from '../io';\nimport { ConfigureHooks, EnvironmentConfig, PathLike } from '../models';\nimport { findRootDir, iterateUntilRoot, toAbsoluteFilename } from './fsUtils';\n\nexport async function getHttpyacConfig(\n  filename: PathLike,\n  rootDir: PathLike | undefined\n): Promise<EnvironmentConfig | undefined> {\n  let result: EnvironmentConfig | undefined;\n  if (rootDir) {\n    result = await loadFileConfig(rootDir);\n    if (!result) {\n      result = await loadPackageJsonConig(filename, rootDir);\n    }\n    if (result) {\n      await resolveClientCertificates(result, rootDir);\n    }\n  }\n  return result;\n}\n\nexport const defaultConfigFiles = [\n  '.httpyac.js',\n  '.httpyac.cjs',\n  '.httpyac.config.js',\n  '.httpyac.config.cjs',\n  'httpyac.config.js',\n  'httpyac.config.cjs',\n  '.httpyac.json',\n  'httpyac.config.json',\n];\n\nasync function loadFileConfig(rootDir: PathLike): Promise<EnvironmentConfig | undefined> {\n  let fileConfigPath: string | undefined;\n  for (const fileName of defaultConfigFiles) {\n    const resolvedPath = fileName && io.fileProvider.joinPath(rootDir, fileName);\n    if (resolvedPath && (await io.fileProvider.exists(resolvedPath))) {\n      fileConfigPath = io.fileProvider.fsPath(resolvedPath);\n      break;\n    }\n  }\n  if (fileConfigPath) {\n    const fsRoot = io.fileProvider.fsPath(rootDir);\n    if (fsRoot && io.javascriptProvider.loadModule) {\n      const fileConfig = io.javascriptProvider.loadModule<EnvironmentConfig | (() => EnvironmentConfig)>(\n        fileConfigPath,\n        fsRoot,\n        true\n      );\n      if (typeof fileConfig === 'function') {\n        return fileConfig();\n      }\n      return fileConfig;\n    }\n  }\n  return undefined;\n}\n\nasync function loadPackageJsonConig(filename: PathLike, rootDir: PathLike) {\n  const result: Array<EnvironmentConfig> = [];\n  await iterateUntilRoot(filename, rootDir, async dir => {\n    const config = (await parseJson<{ httpyac?: EnvironmentConfig }>(io.fileProvider.joinPath(dir, 'package.json')))\n      ?.httpyac;\n    if (config) {\n      result.push(config);\n    }\n  });\n  if (result.length > 0) {\n    return Object.assign({}, ...result.reverse());\n  }\n  return undefined;\n}\n\nexport async function parseJson<T>(fileName: PathLike): Promise<T | undefined> {\n  try {\n    if (await io.fileProvider.exists(fileName)) {\n      const text = await io.fileProvider.readFile(fileName, 'utf-8');\n      return JSON.parse(text);\n    }\n  } catch (err) {\n    io.log.debug(`json parse of ${fileName} failed`);\n  }\n  return undefined;\n}\n\nexport async function resolveClientCertificates(config: EnvironmentConfig, rootDir: PathLike): Promise<void> {\n  if (config.clientCertificates) {\n    for (const [, value] of Object.entries(config.clientCertificates)) {\n      if (value.cert) {\n        value.cert = (await toAbsoluteFilename(value.cert, rootDir)) || value.cert;\n      }\n      if (value.key) {\n        value.key = (await toAbsoluteFilename(value.key, rootDir)) || value.key;\n      }\n      if (value.pfx) {\n        value.pfx = (await toAbsoluteFilename(value.pfx, rootDir)) || value.pfx;\n      }\n    }\n  }\n}\n\ninterface PackageJson {\n  dependencies?: Record<string, unknown>;\n  devDependencies?: Record<string, unknown>;\n}\n\nexport async function getPlugins(rootDir: PathLike): Promise<Record<string, ConfigureHooks>> {\n  const packageJson = await getPackageJson(rootDir);\n  const hooks: Record<string, ConfigureHooks> = {};\n  if (packageJson?.json) {\n    const plugins = [\n      ...Object.keys(packageJson.json.dependencies || {}),\n      ...Object.keys(packageJson.json.devDependencies || {}),\n    ].filter(isPlugin);\n    for (const dep of plugins) {\n      const fsPath = io.fileProvider.fsPath(packageJson.dir);\n      if (fsPath && io.javascriptProvider.loadModule) {\n        const hook = io.javascriptProvider.loadModule<ConfigureHooks>(dep, fsPath);\n        if (hook) {\n          hooks[dep] = hook;\n        }\n      }\n    }\n  }\n  return hooks;\n}\nasync function getPackageJson(rootDir: PathLike) {\n  const packageDir = await findRootDir(rootDir, 'package.json');\n\n  if (packageDir) {\n    return {\n      dir: packageDir,\n      json: await parseJson<PackageJson>(io.fileProvider.joinPath(packageDir, 'package.json')),\n    };\n  }\n  return undefined;\n}\n\nfunction isPlugin(dep: string) {\n  return /^(httpyac-|@[\\w-]+(\\.)?[\\w-]+\\/httpyac-)plugin-/u.test(dep);\n}\n", "export const ENVIRONMENT_NONE = '__NONE__';\n\nexport function toEnvironmentKey(env: string[] | undefined): string {\n  if (env && env.length > 0) {\n    return env.sort().join(',');\n  }\n  return ENVIRONMENT_NONE;\n}\n", "import { log } from '../io';\nimport { ErrorDescription } from '../models';\nimport { stringifySafe, toString } from './stringUtils';\n\nexport function isError(val: unknown): val is Error & { handled?: boolean } {\n  if (!val) {\n    return false;\n  }\n  if (val instanceof Error) {\n    return true;\n  }\n  const err = val as Error;\n  return !!err.message && !!err.stack && !!err.name;\n}\n\nexport function parseError(err: Error): ErrorDescription {\n  if (err.stack) {\n    const match = /^(?<error>.*):\\s*(?<message>.*)\\r?\\n\\s*at (?<file>.*):(?<line>\\d*):(?<offset>\\d*)/mu.exec(err.stack);\n\n    if (match && match.groups?.error) {\n      return {\n        error: err,\n        errorType: match.groups.error,\n        message: match.groups.message,\n        file: match.groups.file,\n        line: match.groups.line,\n        offset: match.groups.offset,\n        displayMessage: `${match.groups.error}: ${match.groups.message} - ${match.groups.file}:${match.groups.line}:${match.groups.offset}`,\n      };\n    }\n  }\n  return {\n    error: err,\n    displayMessage: err.message,\n  };\n}\n\nexport function errorToString(err: unknown): string | undefined {\n  if (isError(err)) {\n    return stringifySafe({\n      message: err.message,\n      name: err.name,\n      stack: err.stack,\n    });\n  }\n  return toString(err);\n}\n\nexport async function useDefaultOnError<T>(promise: Promise<T>, defaultVal: T): Promise<T> {\n  try {\n    return await promise;\n  } catch (err) {\n    log.warn(`promise has read error`, err);\n    return defaultVal;\n  }\n}\n", "import { HookCancel } from 'hookpoint';\n\nimport * as models from '../models';\nimport { createResponseProxy } from './requestClientUtils';\nimport { cloneResponse } from './requestUtils';\nimport { isString } from './stringUtils';\n\nexport function getDisplayName(httpRegion?: models.HttpRegion, defaultName = 'global'): string {\n  if (httpRegion) {\n    if (isString(httpRegion.metaData.title)) {\n      return httpRegion.metaData.title;\n    }\n    if (isString(httpRegion.metaData.name)) {\n      return httpRegion.metaData.name;\n    }\n    if (httpRegion.request?.url) {\n      let indexQuery = httpRegion.request.url.indexOf('?');\n      if (indexQuery < 0) {\n        indexQuery = httpRegion.request.url.length;\n      }\n      const line =\n        httpRegion.symbol.children?.find?.(obj => obj.kind === models.HttpSymbolKind.requestLine)?.startLine ||\n        httpRegion.symbol.startLine;\n      return `${httpRegion.request.method} ${httpRegion.request.url.slice(0, indexQuery)} (line: ${line + 1})`;\n    }\n  }\n  return defaultName;\n}\n\nexport function getRegionDescription(httpRegion: models.HttpRegion, defaultName = '-'): string {\n  if (isString(httpRegion.metaData.description)) {\n    return httpRegion.metaData.description;\n  }\n  if (httpRegion.request?.url) {\n    return `${httpRegion.request.method} ${httpRegion.request.url}`;\n  }\n  return defaultName;\n}\n\nexport async function logResponse(\n  response: models.HttpResponse | undefined,\n  context: models.ProcessorContext\n): Promise<void> {\n  let clone: models.HttpResponse | undefined;\n  if (response) {\n    clone = cloneResponse(response);\n    const regionResult = await context.hooks.responseLogging.trigger(createResponseProxy(clone), context);\n    if (regionResult === HookCancel) {\n      return;\n    }\n  }\n  if (!context.httpRegion.metaData.noLog && context.logResponse) {\n    await context.logResponse(clone, context.httpRegion);\n  }\n}\n\nexport async function executeGlobalScripts(context: {\n  variables: models.Variables;\n  httpFile: models.HttpFile;\n  options: Record<string, unknown>;\n}): Promise<boolean> {\n  for (const httpRegion of context.httpFile.globalHttpRegions) {\n    if (!(await httpRegion.execute(context))) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function addHttpFileRequestClientHooks(\n  requestClientHooks: models.RequestClientHooks,\n  httpFile: models.HttpFile\n): models.RequestClientHooks {\n  return {\n    onRequest: httpFile.hooks.onRequest.merge(\n      ...httpFile.globalHttpRegions.map(obj => obj.hooks.onRequest),\n      requestClientHooks.onRequest\n    ) as models.OnRequestHook,\n    onResponse: httpFile.hooks.onResponse.merge(\n      requestClientHooks.onResponse,\n      ...httpFile.globalHttpRegions.map(obj => obj.hooks.onResponse)\n    ) as models.OnResponseHook,\n    onStreaming: httpFile.hooks.onStreaming.merge(\n      requestClientHooks.onStreaming,\n      ...httpFile.globalHttpRegions.map(obj => obj.hooks.onStreaming)\n    ) as models.OnStreaming,\n    responseLogging: httpFile.hooks.responseLogging.merge(\n      requestClientHooks.responseLogging,\n      ...httpFile.globalHttpRegions.map(obj => obj.hooks.responseLogging)\n    ) as models.ResponseLoggingHook,\n  };\n}\n", "import { HookCancel } from 'hookpoint';\n\nimport { log } from '../io';\nimport * as models from '../models';\nimport { isError } from './errorUtils';\nimport { report } from './logUtils';\nimport { mergeResponses, repeat } from './repeatUtils';\nimport { toString } from './stringUtils';\nimport { deleteVariableInContext, setVariableInContext } from './variableUtils';\nimport { v4 } from 'uuid';\n\nexport function executeRequestClientFactory<T extends models.RequestClient>(\n  requestClientFactory: (request: models.Request, context: models.ProcessorContext) => T,\n  sessionStore: models.SessionStore\n) {\n  return async function (context: models.ProcessorContext) {\n    const { request } = context;\n    if (request?.url) {\n      if (!(await onRequest(context))) {\n        return false;\n      }\n      const requestClient = requestClientFactory(request, context);\n      setVariableInContext(\n        {\n          $requestClient: requestClient,\n        },\n        context\n      );\n      context.requestClient = requestClient;\n      const dispose = registerCancellation(requestClient, context);\n      const connectionId = requestClient.getSessionId?.() || v4();\n      const connectionSession = getConnectionSession(sessionStore, connectionId, request, () => {\n        requestClient.disconnect(new Error('user cancellation'));\n      });\n      try {\n        const messagePromises: Array<Promise<models.HttpResponse | undefined>> = [];\n        addProgressEvent(requestClient, context);\n        addMessageEvent(requestClient, context, messagePromises);\n        addMetaDataEvent(requestClient, context, messagePromises);\n\n        report(context, requestClient.reportMessage);\n\n        const newClient = await requestClient.connect(connectionSession.connection);\n        log.debug(`requestClient ${request.url} connect`);\n\n        connectionSession.connectionCount++;\n        if (newClient !== connectionSession.connection) {\n          connectionSession.connection = newClient;\n        }\n\n        await Promise.all([\n          repeat(() => requestClient.send(), context),\n          onStreaming(context).then(() => {\n            requestClient.streamEnded?.();\n          }),\n        ]);\n\n        const messageResponses = await Promise.all(messagePromises);\n        const response = mergeResponses(toResponses(...messageResponses));\n        if (response) {\n          if (!(await onResponse(response, context))) {\n            return false;\n          }\n        }\n        connectionSession.connectionCount--;\n        if (shouldDisconnectConnection(sessionStore, connectionSession)) {\n          log.debug(`requestClient ${request.url} disconnect`);\n          requestClient.disconnect();\n        }\n\n        return true;\n      } catch (err) {\n        connectionSession.connectionCount--;\n        if (shouldDisconnectConnection(sessionStore, connectionSession)) {\n          (context.scriptConsole || log).error(context.request);\n          log.debug(`requestClient ${request.url} disconnect`);\n          if (isError(err)) {\n            requestClient.disconnect(err);\n          } else {\n            requestClient.disconnect(new Error(toString(err)));\n          }\n        }\n        throw err;\n      } finally {\n        requestClient.triggerEnd();\n        dispose?.();\n        delete context.requestClient;\n        deleteVariableInContext('$requestClient', context);\n      }\n    }\n    return false;\n  };\n}\n\nfunction toResponses(...responses: Array<models.HttpResponse | void | undefined>) {\n  const result: Array<models.HttpResponse> = [];\n\n  for (const response of responses) {\n    if (response) {\n      result.push(response);\n    }\n  }\n  return result;\n}\n\nfunction registerCancellation<T extends models.RequestClient>(client: T, context: models.ProcessorContext) {\n  if (context.progress?.register) {\n    return context.progress?.register(() => client.disconnect(new Error('user cancellation')));\n  }\n  return undefined;\n}\n\nfunction addProgressEvent<T extends models.RequestClient>(client: T, context: models.ProcessorContext) {\n  if (context.isMainContext && context.progress?.report) {\n    let prevPercent = 0;\n    client.addEventListener('progress', evt => {\n      const percent = evt.detail;\n      const newData = percent - prevPercent;\n      prevPercent = percent;\n      if (context.progress?.report) {\n        log.trace(`progress to ${percent}`);\n        const divider = context.progress.divider || 1;\n        context.progress.report({\n          message: 'request progress',\n          increment: (newData / divider) * 100,\n        });\n      }\n    });\n  }\n}\n\nfunction addMessageEvent<T extends models.RequestClient>(\n  client: T,\n  context: models.ProcessorContext,\n  loadingPromises: Array<Promise<models.HttpResponse | void | undefined>>\n) {\n  client.addEventListener('message', evt => {\n    const [type, response] = evt.detail;\n    log.debug(type, response?.message || response?.body);\n    loadingPromises.push(Promise.resolve(response));\n    if (client.supportsStreaming && !context.httpRegion.metaData.noStreamingLog && context.logStream) {\n      loadingPromises.push(context.logStream(type, { ...response }));\n    }\n  });\n}\nfunction addMetaDataEvent<T extends models.RequestClient>(\n  client: T,\n  context: models.ProcessorContext,\n  loadingPromises: Array<Promise<models.HttpResponse | void | undefined>>\n) {\n  client.addEventListener('metaData', evt => {\n    const [type, response] = evt.detail;\n    log.debug(`event ${type} for ${response.protocol}`, response?.message || response?.body);\n    if (context.httpRegion.metaData.metaDataLogging && context.logStream) {\n      loadingPromises.push(context.logStream(type, response));\n    }\n  });\n}\n\nasync function onRequest(context: models.ProcessorContext) {\n  const onRequest = context.hooks.onRequest;\n  if (context.progress) {\n    onRequest.addInterceptor(createIsCanceledInterceptor(() => !!context.progress?.isCanceled()));\n  }\n  return context.request && (await onRequest.trigger(context.request, context)) !== HookCancel;\n}\n\nasync function onStreaming(context: models.ProcessorContext) {\n  const onStreaming = context.hooks.onStreaming;\n  if (context.progress) {\n    onStreaming.addInterceptor(createIsCanceledInterceptor(() => !!context.progress?.isCanceled()));\n  }\n  await onStreaming.trigger(context);\n}\n\nasync function onResponse(response: models.HttpResponse, context: models.ProcessorContext) {\n  const onResponse = context.hooks.onResponse;\n  if ((await onResponse.trigger(createResponseProxy(response), context)) === HookCancel) {\n    return false;\n  }\n  context.httpRegion.response = response;\n  return true;\n}\nfunction createIsCanceledInterceptor(isCanceled: () => boolean) {\n  return {\n    id: 'isCanceled',\n    async beforeTrigger(): Promise<boolean> {\n      return !isCanceled();\n    },\n    async afterTrigger(): Promise<boolean> {\n      return !isCanceled();\n    },\n  };\n}\nexport function createResponseProxy(response: models.HttpResponse): models.HttpResponse {\n  const proxy = new Proxy(response, {\n    set(...args) {\n      const [target, property, value] = args;\n\n      const result = Reflect.set(...args);\n      if (property === 'body') {\n        delete target.prettyPrintBody;\n        delete target.parsedBody;\n        delete target.rawBody;\n        if (typeof value === 'string') {\n          target.rawBody = Buffer.from(value);\n        }\n      }\n      return result;\n    },\n  });\n  return proxy;\n}\n\ninterface ConnectionSession extends models.UserSession {\n  connection?: unknown;\n  connectionCount: number;\n}\n\nfunction getConnectionSession(\n  sessionStore: models.SessionStore,\n  id: string,\n  request: models.Request,\n  disconnect: () => void\n): ConnectionSession {\n  const result = sessionStore.getUserSession(id);\n  if ((result as ConnectionSession)?.connection) {\n    return result as ConnectionSession;\n  }\n  const newSession = {\n    id,\n    description: `Pending Connection`,\n    details: {\n      method: request.method,\n      url: request.url,\n    },\n    title: `${request.method} ${request.url}`,\n    type: 'Stream',\n    connectionCount: 0,\n    delete: disconnect,\n  };\n\n  sessionStore.setUserSession(newSession);\n  return newSession;\n}\n\nfunction shouldDisconnectConnection(sessionStore: models.SessionStore, connectionSession: ConnectionSession) {\n  if (connectionSession.connectionCount <= 0) {\n    delete connectionSession.delete;\n    sessionStore.removeUserSession(connectionSession.id);\n  }\n  return connectionSession.connectionCount === 0;\n}\n", "import { log } from '../io';\nimport * as models from '../models';\n\nexport function report(context: { progress?: models.Progress }, message: string) {\n  log.debug(message);\n  context.progress?.report?.({\n    message,\n  });\n}\n", "import * as models from '../models';\nimport { cloneResponse } from './requestUtils';\nimport { stringifySafe } from './stringUtils';\n\nexport async function repeat(\n  load: () => Promise<models.HttpResponse | void | undefined>,\n  context: { repeat?: models.RepeatOptions; isMainContext?: boolean }\n) {\n  const loader: Array<() => Promise<models.HttpResponse | void | undefined>> = [];\n  let repeatCount = 1;\n  if (context.repeat?.count && !!context.isMainContext) {\n    repeatCount = context.repeat.count;\n  }\n  for (let index = 0; index < repeatCount; index++) {\n    loader.push(load);\n  }\n  const responses = [];\n  if (context.repeat?.type === models.RepeatOrder.parallel) {\n    const responses = await Promise.all(loader.map(obj => obj()));\n    for (const result of responses) {\n      if (result) {\n        responses.push(result);\n      }\n    }\n  } else {\n    for (const load of loader) {\n      const response = await load();\n      if (response) {\n        responses.push(response);\n      }\n    }\n  }\n  return mergeResponses(responses);\n}\n\nexport function mergeResponses(responses: Array<models.HttpResponse>): models.HttpResponse | undefined {\n  if (responses.length > 1) {\n    const result: models.HttpResponse = cloneResponse(responses[0]);\n    delete result.prettyPrintBody;\n    delete result.rawBody;\n    delete result.meta;\n    delete result.timings;\n\n    const parsedBody: {\n      responses: Array<models.HttpResponse>;\n      statusCount: Record<string, number>;\n      count: number;\n    } = {\n      responses: [],\n      statusCount: {},\n      count: responses.length,\n    };\n    const responseTimings: Array<models.HttpTimings> = [];\n\n    for (const response of responses) {\n      if (response.statusCode > result.statusCode) {\n        result.statusCode = response.statusCode;\n        result.statusMessage = response.statusMessage;\n      }\n      const statusString = `${response.statusCode}`;\n      if (parsedBody.statusCount[statusString]) {\n        parsedBody.statusCount[statusString] += 1;\n      } else {\n        parsedBody.statusCount[statusString] = 1;\n      }\n      if (response.timings) {\n        responseTimings.push(response.timings);\n      }\n      delete response.prettyPrintBody;\n      delete response.parsedBody;\n      delete response.rawBody;\n      parsedBody.responses.push(cloneResponse(response));\n\n      if (responseTimings.length > 0) {\n        result.timings = mergeTimings(responseTimings);\n      }\n    }\n    result.parsedBody = parsedBody;\n    result.body = stringifySafe(parsedBody, 2);\n\n    return result;\n  }\n  return responses.pop();\n}\n\nfunction mergeTimings(timings: Array<models.HttpTimings>): models.HttpTimings {\n  const dns: Array<number> = [];\n  const download: Array<number> = [];\n  const firstByte: Array<number> = [];\n  const request: Array<number> = [];\n  const tcp: Array<number> = [];\n  const tls: Array<number> = [];\n  const total: Array<number> = [];\n  const wait: Array<number> = [];\n  for (const timing of timings) {\n    dns.push(timing.dns || 0);\n    download.push(timing.download || 0);\n    firstByte.push(timing.firstByte || 0);\n    request.push(timing.request || 0);\n    tcp.push(timing.tcp || 0);\n    tls.push(timing.tls || 0);\n    total.push(timing.total || 0);\n    wait.push(timing.wait || 0);\n  }\n\n  const sum = (arr: Array<number>) => {\n    const filtered = arr.filter(obj => obj > 0);\n    if (filtered.length > 0) {\n      return filtered.reduce((prev, curr) => prev + curr, 0) / filtered.length;\n    }\n    return undefined;\n  };\n\n  return {\n    dns: sum(dns),\n    download: sum(download),\n    firstByte: sum(firstByte),\n    request: sum(request),\n    tcp: sum(tcp),\n    tls: sum(tls),\n    total: sum(total),\n    wait: sum(wait),\n  };\n}\n", "import { HookCancel } from 'hookpoint';\n\nimport * as io from '../io';\nimport * as models from '../models';\nimport { toEnvironmentKey } from './environmentUtils';\nimport { toAbsoluteFilename } from './fsUtils';\nimport { isString } from './stringUtils';\n\nexport async function replaceVariables(\n  text: unknown,\n  type: models.VariableType | string,\n  context: models.ProcessorContext\n): Promise<typeof HookCancel | unknown> {\n  if (context.progress?.isCanceled?.()) {\n    io.log.trace('process canceled by user');\n    return HookCancel;\n  }\n  return await context.httpFile.hooks.replaceVariable.trigger(text, type, context);\n}\n\nexport async function replaceFilePath<T>(\n  fileName: string,\n  context: models.ProcessorContext,\n  action: (path: models.PathLike) => Promise<T>\n): Promise<T | undefined> {\n  const file = await replaceVariables(fileName, models.VariableType.filePath, context);\n  if (isString(file)) {\n    const normalizedPath = await toAbsoluteFilename(file, io.fileProvider.dirname(context.httpFile.fileName));\n    if (normalizedPath) {\n      return await action(normalizedPath);\n    }\n    const message = `file not found: ${fileName}`;\n    io.userInteractionProvider.showWarnMessage?.(message);\n    io.log.warn(message);\n  } else {\n    const message = `file replace made file invalid: ${fileName} <> ${file}`;\n    io.userInteractionProvider.showWarnMessage?.(message);\n    io.log.warn(message);\n  }\n  return undefined;\n}\n\nexport function expandVariable(value: unknown, variables: models.Variables): unknown {\n  if (value && isString(value)) {\n    let result = value;\n    let match: RegExpExecArray | null;\n    const variableRegex = /\\{{2}\\s*([a-zA-Z0-9_]+)\\s*\\}{2}/gu;\n    while ((match = variableRegex.exec(result)) !== null) {\n      const [searchValue, variableName] = match;\n      const val = expandVariable(variables[variableName], variables);\n      variables[variableName] = val;\n      result = result.replace(searchValue, () => `${val}`);\n    }\n    return result;\n  }\n  return value;\n}\n\nexport function setVariableInContext(variables: models.Variables, context: models.ProcessorContext) {\n  if (variables) {\n    const checkedVariables = cleanVariables(variables);\n    Object.assign(context.variables, checkedVariables);\n    const envKey = toEnvironmentKey(context.activeEnvironment);\n    if (!context.httpRegion.variablesPerEnv[envKey]) {\n      context.httpRegion.variablesPerEnv[envKey] = {};\n    }\n    Object.assign(context.httpRegion.variablesPerEnv[envKey], checkedVariables);\n  }\n}\n\nexport function cleanVariables(variables: models.Variables) {\n  return Object.fromEntries(\n    Object.entries(variables).filter(\n      ([key]) => !io.javascriptProvider.isAllowedKeyword || io.javascriptProvider.isAllowedKeyword(key)\n    )\n  );\n}\n\nexport function deleteVariableInContext(key: string, context: models.ProcessorContext) {\n  delete context.variables[key];\n\n  const envKey = toEnvironmentKey(context.activeEnvironment);\n  if (context.httpRegion.variablesPerEnv[envKey]) {\n    delete context.httpRegion.variablesPerEnv[envKey][key];\n  }\n}\n\nexport function unsetVariableInContext(variables: models.Variables, context: models.ProcessorContext) {\n  const envKey = toEnvironmentKey(context.activeEnvironment);\n  const envVariables = context.httpRegion.variablesPerEnv[envKey];\n  for (const key of Object.keys(variables)) {\n    delete context.variables[key];\n    if (envVariables) {\n      delete envVariables[key];\n    }\n  }\n}\n", "import { HttpResponse, Request } from '../models';\nimport { isString, stringifySafe, toMultiLineString } from './stringUtils';\n\nexport function toHttpString(\n  response: HttpResponse,\n  options?: {\n    responseBody?: boolean;\n    requestBody?: boolean;\n    prettyPrint?: boolean;\n  }\n): string {\n  const result: Array<string> = [];\n\n  if (response.request) {\n    result.push(\n      ...toHttpStringRequest(response.request, {\n        body: !!options?.requestBody,\n      })\n    );\n    result.push('');\n  }\n  result.push(\n    ...toHttpStringResponse(response, {\n      prettyPrint: !!options?.prettyPrint,\n      body: !!options?.responseBody,\n    })\n  );\n\n  return toMultiLineString(result);\n}\n\nexport function toHttpStringResponse(\n  response: HttpResponse,\n  options?: {\n    prettyPrint?: boolean;\n    body?: boolean;\n  }\n): Array<string> {\n  const result: Array<string> = [];\n  result.push(\n    `${response.protocol} ${response.statusCode} ${response.statusMessage ? ` - ${response.statusMessage}` : ''}`\n  );\n  if (response.headers) {\n    result.push(...toHttpStringHeader(response.headers));\n  }\n  if (options?.body && isString(response.body)) {\n    result.push('');\n    result.push(options?.prettyPrint && response.prettyPrintBody ? response.prettyPrintBody : response.body);\n  }\n  return result;\n}\n\nexport function toHttpStringRequest(\n  request: Request,\n  options?: {\n    body?: boolean;\n  }\n): Array<string> {\n  const result: Array<string> = [];\n  result.push(`${request.method} ${request.url}`);\n  if (request.headers) {\n    result.push(...toHttpStringHeader(request.headers));\n  }\n  if (options?.body && isString(request.body)) {\n    result.push('');\n    result.push(request.body);\n  }\n  return result;\n}\n\nexport function toHttpStringHeader(headers: Record<string, unknown>): Array<string> {\n  return Object.entries(headers).map(([key, value]) => {\n    let val = value || '';\n    if (value) {\n      if (Array.isArray(value)) {\n        val = value.join(', ');\n      } else if (!isString(value)) {\n        val = stringifySafe(value);\n      }\n    }\n    return `${key}: ${val}`;\n  });\n}\n", "import * as io from '../io';\nimport * as models from '../models';\nimport * as mimeTypeUtils from './mimeTypeUtils';\nimport { isString, stringifySafe, toMultiLineArray } from './stringUtils';\n\nexport function toMarkdown(\n  response: models.HttpResponse,\n  options?: {\n    responseBody?: boolean;\n    requestBody?: boolean;\n    timings?: boolean;\n    meta?: boolean;\n    prettyPrint?: boolean;\n    testResults?: Array<models.TestResult>;\n  }\n): string {\n  const result: Array<string> = [];\n\n  if (response.request) {\n    result.push(\n      ...toMarkdownRequest(response.request, {\n        body: !!options?.requestBody,\n      })\n    );\n    result.push('');\n  }\n  result.push(\n    ...toMarkdownResponse(response, {\n      prettyPrint: !!options?.prettyPrint,\n      body: !!options?.responseBody,\n    })\n  );\n\n  if (options?.testResults) {\n    result.push('');\n    result.push('');\n    result.push(...toMarkdownTestResults(options.testResults));\n  }\n\n  if (options?.timings && response.timings) {\n    result.push('');\n    result.push('');\n    result.push(...toMarkdownTimings(response.timings));\n  }\n\n  if (options?.meta && response.meta) {\n    result.push('');\n    result.push('');\n    result.push(...toMarkdownMeta(response.meta));\n  }\n\n  return joinMarkdown(result);\n}\n\nexport function toMarkdownResponse(\n  response: models.HttpResponse,\n  options?: {\n    prettyPrint?: boolean;\n    body?: boolean;\n  }\n): Array<string> {\n  const result: Array<string> = [];\n  result.push(\n    `\\`${response.protocol} ${response.statusCode}${response.statusMessage ? ` - ${response.statusMessage}` : ''}\\``\n  );\n  if (response.headers) {\n    result.push(...toMarkdownHeader(response.headers));\n  }\n  if (options?.body && isString(response.body)) {\n    result.push('');\n    result.push(`\\`\\`\\`${getMarkdownSyntax(response.contentType)}`);\n    const body = options.prettyPrint && response.prettyPrintBody ? response.prettyPrintBody : response.body;\n    result.push(joinMarkdown(toMultiLineArray(body)));\n    result.push('```');\n  }\n  return result;\n}\n\nexport function getMarkdownSyntax(contentType: models.ContentType | undefined): string {\n  if (mimeTypeUtils.isMimeTypeJSON(contentType)) {\n    return 'json';\n  }\n  if (mimeTypeUtils.isMimeTypeXml(contentType)) {\n    return 'xml';\n  }\n  if (mimeTypeUtils.isMimeTypeHtml(contentType)) {\n    return 'html';\n  }\n  if (mimeTypeUtils.isMimeTypeJavascript(contentType)) {\n    return 'js';\n  }\n  if (mimeTypeUtils.isMimeTypeCSS(contentType)) {\n    return 'css';\n  }\n  if (mimeTypeUtils.isMimeTypeMarkdown(contentType)) {\n    return 'markdown';\n  }\n  return '';\n}\n\nexport function toMarkdownRequest(\n  request: models.Request,\n  options?: {\n    body?: boolean;\n  }\n): Array<string> {\n  const result: Array<string> = [];\n  result.push(`\\`${request.method} ${request.url}\\``);\n  if (request.headers) {\n    result.push(...toMarkdownHeader(request.headers));\n  }\n  if (options?.body && isString(request.body)) {\n    result.push('');\n    result.push('```json');\n    result.push(joinMarkdown(toMultiLineArray(request.body)));\n    result.push('```');\n  }\n  return result;\n}\n\nexport function toMarkdownTestResults(testResults: Array<models.TestResult>): Array<string> {\n  const result: Array<string> = [];\n  result.push('`TestResults`');\n  result.push('');\n  for (const testResult of testResults) {\n    let message = `${models.testSymbols.ok}: ${testResult.message}`;\n    if (testResult.status === models.TestResultStatus.SKIPPED) {\n      message = `${models.testSymbols.skipped}: ${testResult.message}`;\n    } else if ([models.TestResultStatus.FAILED, models.TestResultStatus.ERROR].includes(testResult.status)) {\n      message = `${models.testSymbols.error}: ${testResult.message}`;\n      if (testResult.error) {\n        message += ` (${testResult.error.displayMessage})`;\n      }\n    }\n    result.push(message);\n  }\n  return result;\n}\n\nexport function toMarkdownHeader(headers: Record<string, unknown>): Array<string> {\n  return Object.entries(headers)\n    .map(([key, value]) => {\n      let val = value || '';\n      if (value) {\n        if (Array.isArray(value)) {\n          val = value.join(', ');\n        } else if (!isString(value)) {\n          val = stringifySafe(value);\n        }\n      }\n      return `*${key}*: ${val}`;\n    })\n    .sort();\n}\n\nexport function toMarkdownMeta(meta: Record<string, unknown>): Array<string> {\n  const result: Array<string> = [];\n  result.push('`Meta`');\n  result.push('');\n  for (const [key, value] of Object.entries(meta)) {\n    if (Array.isArray(value)) {\n      if (value.length > 0) {\n        result.push(`*${key}*: ${value.join(',')}`);\n      }\n    } else {\n      result.push(`*${key}*: ${value}`);\n    }\n  }\n  return result;\n}\n\nexport function toMarkdownTimings(timings: models.HttpTimings): Array<string> {\n  const result: Array<string> = [];\n\n  result.push('`Timings`');\n  result.push('');\n  if (timings.wait) {\n    result.push(`*Wait*: ${timings.wait} ms`);\n  }\n  if (timings.dns) {\n    result.push(`*DNS*: ${timings.dns} ms`);\n  }\n  if (timings.tcp) {\n    result.push(`*TCP*: ${timings.tcp} ms`);\n  }\n  if (timings.tls) {\n    result.push(`*TLS*: ${timings.tls} ms`);\n  }\n  if (timings.request) {\n    result.push(`*Request*: ${timings.request} ms`);\n  }\n  if (timings.firstByte) {\n    result.push(`*First Byte*: ${timings.firstByte} ms`);\n  }\n  if (timings.download) {\n    result.push(`*Download*: ${timings.download} ms`);\n  }\n  if (timings.total) {\n    result.push(`*Total*: ${timings.total} ms`);\n  }\n  return result;\n}\n\nexport function joinMarkdown(lines: string[]): string {\n  return lines.join(`  ${io.fileProvider.EOL}`);\n}\n", "import * as models from '../models';\n\nexport function isOpenIdInformation(\n  userSession: models.UserSession | undefined\n): userSession is models.OpenIdInformation {\n  const guard = userSession as models.OpenIdInformation;\n  return !!guard?.accessToken;\n}\n\nexport function isProcessorContext(context: unknown): context is models.ProcessorContext {\n  const guard = context as models.ProcessorContext;\n  return !!guard?.httpRegion && !!guard?.httpFile && !!guard?.variables && !!guard?.config;\n}\n", "import { javascriptProvider } from '../io';\nimport * as models from '../models';\nimport { getBufferEncoding } from './bufferEncodingUtils';\nimport { report } from './logUtils';\nimport { isString, toString } from './stringUtils';\n\nexport const HandlebarsSingleLine = /\\{{2}\\s*(.+?)\\s*\\}{2}/gu;\nexport const RegionSeparator = /^\\s*#{3,}(?<title>.*)$/u;\nexport const OAuth2Regex =\n  /^\\s*(?<type>openid|oauth2)(\\s+(?<flow>client(_credentials)?|(authorization_)?code|device(_code)?|password|implicit|hybrid))?(\\s+(?<variablePrefix>[^\\s]*))?\\s*((token_exchange)\\s+(?<tokenExchangePrefix>[^\\s]*))?\\s*$/iu;\n\nexport type ParseLineMethod = (\n  httpLine: models.HttpLine,\n  context: models.ParserContext\n) => Promise<models.SymbolParserResult | false>;\n\nexport interface ParseSubsequentLinesResult {\n  nextLine?: number;\n  parseResults: Array<models.SymbolParserResult>;\n}\n\nexport async function parseSubsequentLines(\n  lineReader: models.HttpLineGenerator,\n  requestLineParser: Array<ParseLineMethod>,\n  context: models.ParserContext\n): Promise<ParseSubsequentLinesResult> {\n  const result: ParseSubsequentLinesResult = {\n    parseResults: [],\n  };\n  let next = lineReader.next();\n  while (!next.done) {\n    let hasResult = false;\n    for (const lineParser of requestLineParser) {\n      const parseResult = await lineParser(next.value, context);\n      if (parseResult) {\n        result.parseResults.push(parseResult);\n        hasResult = true;\n        break;\n      }\n    }\n    if (!hasResult) {\n      break;\n    }\n    result.nextLine = next.value.line;\n\n    next = lineReader.next();\n  }\n\n  return result;\n}\n\nexport function parseRequestHeaderFactory(headers: Record<string, unknown>): ParseLineMethod {\n  return async function parseRequestHeader(httpLine: models.HttpLine) {\n    const headerMatch = /^\\s*(?<key>[!#$%&'*+\\-.^_`|~0-9A-Za-z]+)\\s*:\\s*(?<value>.*?),?\\s*$/u.exec(httpLine.textLine);\n    if (headerMatch?.groups?.key) {\n      const headerName = headerMatch.groups.key;\n      const headerValue = headerMatch.groups.value;\n\n      const existingHeader = headers[headerName];\n      if (existingHeader) {\n        if (Array.isArray(existingHeader)) {\n          existingHeader.push(headerValue);\n        } else {\n          headers[headerName] = [existingHeader, headerValue];\n        }\n      } else {\n        headers[headerName] = headerValue;\n      }\n\n      const valueOffset = httpLine.textLine.indexOf(headerValue);\n      return {\n        symbols: [\n          new models.HttpSymbol({\n            name: headerName,\n            description: headerValue,\n            kind: models.HttpSymbolKind.requestHeader,\n            startLine: httpLine.line,\n            startOffset: httpLine.textLine.indexOf(headerName),\n            endLine: httpLine.line,\n            endOffset: httpLine.textLine.length,\n            children: [\n              new models.HttpSymbol({\n                name: headerName,\n                description: 'request header key',\n                kind: models.HttpSymbolKind.key,\n                startLine: httpLine.line,\n                startOffset: httpLine.textLine.indexOf(headerName),\n                endLine: httpLine.line,\n                endOffset: httpLine.textLine.indexOf(headerName) + headerName.length,\n              }),\n              headerValue\n                ? new models.HttpSymbol({\n                    name: headerValue,\n                    description: 'request header value',\n                    kind: models.HttpSymbolKind.value,\n                    startLine: httpLine.line,\n                    startOffset: valueOffset,\n                    endLine: httpLine.line,\n                    endOffset: valueOffset + headerValue.length,\n                    children: parseHandlebarsSymbols(headerValue, httpLine.line, valueOffset),\n                  })\n                : undefined,\n            ].filter(s => !!s),\n          }),\n        ],\n      };\n    }\n    return false;\n  };\n}\n\nexport function parseDefaultHeadersFactory(\n  setHeaders: (headers: Record<string, unknown>, context: models.ProcessorContext) => void = (headers, context) => {\n    if (context.request) {\n      if (context.request.headers) {\n        Object.assign(context.request.headers, headers);\n      } else {\n        context.request.headers = headers;\n      }\n    }\n  }\n): ParseLineMethod {\n  return async function parseDefaultHeaders(\n    httpLine: models.HttpLine,\n    parserContext: models.ParserContext\n  ): Promise<models.SymbolParserResult | false> {\n    const fileHeaders = /^\\s*\\.{3}(?<variableName>[^\\s]+),?\\s*$/u.exec(httpLine.textLine);\n    if (fileHeaders?.groups?.variableName) {\n      const defaultsHeadersAction = new DefaultHeadersAction(fileHeaders.groups.variableName, setHeaders);\n      parserContext.httpRegion.hooks.execute.addObjHook(obj => obj.process, defaultsHeadersAction);\n      const val = httpLine.textLine.trim();\n      return {\n        symbols: [\n          new models.HttpSymbol({\n            name: val || 'hader variable',\n            description: 'Header Variable',\n            kind: models.HttpSymbolKind.requestHeader,\n            startLine: httpLine.line,\n            startOffset: httpLine.textLine.indexOf(val),\n            endOffset: httpLine.textLine.length,\n            endLine: httpLine.line,\n            children: [\n              new models.HttpSymbol({\n                name: fileHeaders.groups.variableName,\n                description: 'Header Variable',\n                kind: models.HttpSymbolKind.variable,\n                startLine: httpLine.line,\n                startOffset: fileHeaders.index,\n                endOffset: fileHeaders.groups.variableName.length,\n                endLine: httpLine.line,\n              }),\n            ],\n          }),\n        ],\n      };\n    }\n    return false;\n  };\n}\n\nclass DefaultHeadersAction {\n  id = 'defaultHeaders';\n\n  constructor(\n    private readonly data: string,\n    private readonly setHeaders: (headers: Record<string, unknown>, context: models.ProcessorContext) => void\n  ) {}\n\n  async process(context: models.ProcessorContext): Promise<boolean> {\n    if (this.data && context.variables) {\n      report(context, 'set request headers');\n      const headers = await javascriptProvider.evalExpression(this.data, context);\n      if (headers) {\n        this.setHeaders(Object.assign({}, headers), context);\n      }\n    }\n    return true;\n  }\n}\n\nexport function parseUrlLineFactory(attachUrl: (url: string) => void): ParseLineMethod {\n  return async function parseUrlLine(httpLine: models.HttpLine) {\n    if (/^\\s*(\\/)[^*]*$/u.test(httpLine.textLine)) {\n      const val = httpLine.textLine.trim();\n      attachUrl(val);\n      return {\n        symbols: [\n          new models.HttpSymbol({\n            name: val || 'URL Part',\n            description: 'URL Part',\n            kind: models.HttpSymbolKind.url,\n            startLine: httpLine.line,\n            startOffset: httpLine.textLine.indexOf(val),\n            endOffset: httpLine.textLine.length,\n            endLine: httpLine.line,\n            children: parseHandlebarsSymbols(httpLine.textLine, httpLine.line),\n          }),\n        ],\n      };\n    }\n    return false;\n  };\n}\n\nexport function parseQueryLineFactory(attachUrl: (url: string) => void): ParseLineMethod {\n  return async function parseQueryLine(httpLine: models.HttpLine): Promise<models.SymbolParserResult | false> {\n    if (/^\\s*(\\?|&)((([^(=?&)]+)=(.*))|\\{\\{.*\\}\\})\\s*$/u.test(httpLine.textLine)) {\n      const val = httpLine.textLine.trim();\n      attachUrl(val);\n      return {\n        symbols: [\n          new models.HttpSymbol({\n            name: val || 'Query',\n            description: 'Query',\n            kind: models.HttpSymbolKind.url,\n            startLine: httpLine.line,\n            startOffset: httpLine.textLine.indexOf(val),\n            endOffset: httpLine.textLine.length,\n            endLine: httpLine.line,\n            children: parseHandlebarsSymbols(httpLine.textLine, httpLine.line, 0),\n          }),\n        ],\n      };\n    }\n    return false;\n  };\n}\n\nexport async function parseComments(\n  httpLine: models.HttpLine,\n  context: models.ParserContext,\n  metaRegex = /^\\s*((#\\s+)|(\\/{2}))/u\n): Promise<models.SymbolParserResult | false> {\n  if (metaRegex.test(httpLine.textLine)) {\n    const result: models.SymbolParserResult = {\n      symbols: [\n        new models.HttpSymbol({\n          name: 'comment',\n          description: httpLine.textLine,\n          kind: models.HttpSymbolKind.metaData,\n          startLine: httpLine.line,\n          startOffset: 0,\n          endLine: httpLine.line,\n          endOffset: httpLine.textLine.length,\n        }),\n      ],\n    };\n    const match = /^\\s*(#+|\\/{2,})\\s+@(?<key>[^\\s]*)(\\s+)?\"?(?<value>.*)?\"?$/u.exec(httpLine.textLine);\n    if (match && match.groups && match.groups.key) {\n      const key = match.groups.key.replace(/-./gu, value => value[1].toUpperCase());\n      result.symbols[0].children = [\n        new models.HttpSymbol({\n          name: key || 'metadata',\n          description: match.groups.value || '-',\n          kind: models.HttpSymbolKind.metaData,\n          startLine: httpLine.line,\n          startOffset: 0,\n          endLine: httpLine.line,\n          endOffset: httpLine.textLine.length,\n          children: [\n            new models.HttpSymbol({\n              name: key || 'metadata key',\n              description: knownMetaData.find(obj => obj.name === key)?.description || 'key of meta data',\n              kind: models.HttpSymbolKind.key,\n              startLine: httpLine.line,\n              startOffset: httpLine.textLine.indexOf(match.groups.key),\n              endLine: httpLine.line,\n              endOffset: httpLine.textLine.indexOf(match.groups.key) + match.groups.key.length,\n            }),\n          ],\n        }),\n      ];\n      let val: string | undefined;\n      if (match.groups.value) {\n        val = match.groups.value.trim();\n        result.symbols[0].children.push(\n          new models.HttpSymbol({\n            name: match.groups.value || 'metadata value',\n            description: 'value of meta data',\n            kind: models.HttpSymbolKind.value,\n            startLine: httpLine.line,\n            startOffset: httpLine.textLine.indexOf(match.groups.value),\n            endLine: httpLine.line,\n            endOffset: httpLine.textLine.indexOf(match.groups.value) + match.groups.value.length,\n          })\n        );\n      }\n      context.httpRegion.metaData = Object.assign(context.httpRegion.metaData || {}, {\n        [key]: val || true,\n      });\n      await context.httpFile.hooks.parseMetaData.trigger(key, val, context);\n    }\n    return result;\n  }\n  return false;\n}\n\nexport const knownMetaData: Array<{\n  name: string;\n  description: string;\n  completions?: Array<string>;\n}> = [\n  {\n    name: 'name',\n    description:\n      'responses of a requests with a name are automatically added as variables and can be reused by other requests',\n    completions: ['${1}'],\n  },\n  {\n    name: 'debug',\n    description: 'enable debug log level',\n  },\n  {\n    name: 'description',\n    description: 'additional description of region',\n    completions: ['${1}'],\n  },\n  {\n    name: 'disabled',\n    description: 'requests can be disabled',\n  },\n  {\n    name: 'extension',\n    description: 'extension of file for save or openWith.',\n    completions: ['${1}'],\n  },\n  {\n    name: 'forceRef',\n    description: 'When the request is called, it is ensured that the referenced request is always called beforehand',\n    completions: ['${1}'],\n  },\n  {\n    name: 'import',\n    description: 'reference Requests from other files.',\n    completions: ['${1}'],\n  },\n  {\n    name: 'injectVariables',\n    description: 'Inject Variables in request body (needed because of compatibility with Intellij).',\n  },\n  {\n    name: 'jwt',\n    description: 'supports auto decode of jwt token.',\n  },\n  {\n    name: 'language',\n    description: 'language id of the response view',\n    completions: ['${1}'],\n  },\n  {\n    name: 'loop',\n    description: 'allows multiple Invocations of a Request with different parameters.',\n    completions: ['for ${1} of ${2}', 'for ${1}', 'while ${1}'],\n  },\n  {\n    name: 'keepStreaming',\n    description: 'keep streaming until the user session is ended manually',\n  },\n  {\n    name: 'noLog',\n    description: 'prevent logging of request data in output console',\n  },\n  {\n    name: 'noCookieJar',\n    description: 'cookieJar support is disabled for this request',\n  },\n  {\n    name: 'noClientCert',\n    description: 'SSL client certificate is not send for this request',\n  },\n  {\n    name: 'noProxy',\n    description: 'disable proxy for this request',\n  },\n  {\n    name: 'noRejectUnauthorized',\n    description: 'all invalid SSL certificates will be ignored and no error will be thrown.',\n  },\n  {\n    name: 'noResponseView',\n    description: 'prevent output in editor document.',\n  },\n  {\n    name: 'noStreamingLog',\n    description: 'prevent logging of streaming request data in output console',\n  },\n  {\n    name: 'note',\n    description: 'shows a confirmation dialog before sending request',\n    completions: ['${1}'],\n  },\n  {\n    name: 'openWith',\n    description: 'viewType of custom editor to preview files',\n    completions: ['${1}'],\n  },\n  {\n    name: 'ref',\n    description: 'When the request is called, it is ensured that the referenced request is called beforehand',\n    completions: ['${1}'],\n  },\n  {\n    name: 'ratelimit',\n    description: 'allows throttling requests',\n    completions: ['minIdleTime ${1}', 'max ${1} expire ${2}', 'minIdleTime ${1} max ${2} expire ${3}'],\n  },\n  {\n    name: 'save',\n    description: 'If specified, the response will not be displayed but saved directly.',\n  },\n  {\n    name: 'sleep',\n    description: 'wait specified milliseconds, before next step.',\n    completions: ['${1}'],\n  },\n  {\n    name: 'title',\n    description: 'additional title of region',\n    completions: ['${1}'],\n  },\n  {\n    name: 'timeout',\n    description: 'set timeout for request',\n    completions: ['${1}'],\n  },\n  {\n    name: 'verbose',\n    description: 'enable trace log level',\n  },\n];\n\nconst maxNestedVariables = 100;\nexport async function parseHandlebarsString(\n  text: unknown,\n  evalExpression: (variable: string, searchValue: string) => Promise<unknown>\n) {\n  if (!isString(text)) {\n    return text;\n  }\n  let match: RegExpExecArray | null;\n  let start;\n  let result = text;\n  let infiniteLoopStopper = 0;\n  while (start !== result && infiniteLoopStopper++ < maxNestedVariables) {\n    start = result;\n    while ((match = HandlebarsSingleLine.exec(start)) !== null) {\n      const [searchValue, variable] = match;\n      const value = await evalExpression(variable, searchValue);\n      if (typeof value !== 'undefined' && searchValue === text) {\n        return value;\n      }\n      const valueString = value === null ? 'null' : toString(value);\n      if (typeof valueString !== 'undefined') {\n        result = result.replace(searchValue, () => valueString);\n      }\n    }\n  }\n  return result;\n}\n\nexport function parseHandlebarsSymbols(line: string | undefined, startLine: number, offset = 0) {\n  const symbols: Array<models.HttpSymbol> = [];\n  if (line) {\n    let match: RegExpExecArray | null;\n    while ((match = HandlebarsSingleLine.exec(line)) !== null) {\n      const [searchValue, variable] = match;\n      symbols.push(\n        new models.HttpSymbol({\n          name: variable || 'variable',\n          description: variable,\n          startLine,\n          endLine: startLine,\n          kind: models.HttpSymbolKind.variable,\n          startOffset: offset + match.index,\n          endOffset: offset + match.index + searchValue.length,\n          source: variable,\n        })\n      );\n    }\n  }\n  return symbols;\n}\n\nexport async function parseInlineResponse(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext,\n  regex: RegExp\n) {\n  const lineReader = getLineReader();\n  const next = lineReader.next();\n  if (!next.done) {\n    if (context.data.httpResponseSymbol) {\n      const responseSymbol = context.data.httpResponseSymbol;\n      responseSymbol.body.push(next.value.textLine);\n      responseSymbol.symbol.endLine = next.value.line;\n      responseSymbol.symbol.endOffset = next.value.textLine.length;\n      return {\n        nextParserLine: next.value.line,\n        symbols: [],\n      };\n    }\n    const match = regex.exec(next.value.textLine);\n    if (match && match.groups?.statusCode) {\n      const headers: Record<string, unknown> = {};\n      context.httpRegion.response = {\n        protocol: `HTTP/${match.groups.httpVersion || '1.1'}`,\n        httpVersion: match.groups.httpVersion,\n        statusCode: +match.groups.statusCode,\n        statusMessage: match.groups.statusMessage,\n        headers,\n      };\n\n      const responseSymbol = new models.HttpSymbol({\n        name: 'response',\n        description: 'response',\n        kind: models.HttpSymbolKind.response,\n        startLine: next.value.line,\n        startOffset: 0,\n        endLine: next.value.line,\n        endOffset: next.value.textLine.length,\n        children: [],\n      });\n\n      context.data.httpResponseSymbol = {\n        symbol: responseSymbol,\n        body: [],\n      };\n      const symbols = [context.data.httpResponseSymbol.symbol];\n\n      const result: models.HttpRegionParserResult = {\n        nextParserLine: next.value.line,\n        symbols,\n      };\n\n      const headersResult = await parseSubsequentLines(lineReader, [parseRequestHeaderFactory(headers)], context);\n\n      result.nextParserLine = headersResult.nextLine || result.nextParserLine;\n      for (const parseResult of headersResult.parseResults) {\n        for (const child of parseResult.symbols) {\n          responseSymbol.children?.push(child);\n          responseSymbol.endLine = child.endLine;\n          responseSymbol.endOffset = child.endOffset;\n        }\n      }\n      return result;\n    }\n  }\n  return false;\n}\n\nexport function parseFileImport(text: string) {\n  const fileImport = /^<(?:(?<injectVariables>@)(?<encoding>\\w+)?)?\\s+(?<fileName>.+?)\\s*$/u.exec(text);\n  if (fileImport && fileImport.length === 4 && fileImport.groups) {\n    return {\n      fileName: fileImport.groups.fileName.trim(),\n      injectVariables: !!fileImport.groups.injectVariables,\n      encoding: getBufferEncoding(fileImport.groups.encoding),\n    };\n  }\n  return undefined;\n}\n", "import * as models from '../models';\nimport { parseMimeType } from './mimeTypeUtils';\nimport * as parser from './parserUtils';\nimport { executeRequestClientFactory } from './requestClientUtils';\nimport { getHeader } from './requestUtils';\nimport { isString, isStringEmpty } from './stringUtils';\n\ninterface RequestParserContext {\n  protocol: string;\n  method?: string;\n  requestClientFactory: (request: models.Request, context: models.ProcessorContext) => models.RequestClient;\n  modifyRequest?: (request: models.Request) => void;\n  methodRegex: RegExp;\n  protocolRegex?: RegExp;\n  sessionStore: models.SessionStore;\n}\n\nexport function parseRequestLineFactory(requestContext: RequestParserContext) {\n  return async function parseRequestLine(\n    getLineReader: models.getHttpLineGenerator,\n    context: models.ParserContext\n  ): Promise<models.HttpRegionParserResult> {\n    const lineReader = getLineReader();\n    const next = lineReader.next();\n    if (!next.done && isValidRequestLine(next.value, context, requestContext)) {\n      if (context.httpRegion.request) {\n        return {\n          endRegionLine: next.value.line - 1,\n          nextParserLine: next.value.line - 1,\n          symbols: [],\n        };\n      }\n\n      const requestLine = getRequestParseLine(next.value, requestContext);\n      if (!requestLine) {\n        return false;\n      }\n      context.httpRegion.request = requestLine.request;\n      const requestSymbol = new models.HttpSymbol({\n        name: next.value.textLine || 'request line',\n        description: `${requestContext.protocol} request-line`,\n        kind: models.HttpSymbolKind.requestLine,\n        startLine: next.value.line,\n        startOffset: 0,\n        endLine: next.value.line,\n        endOffset: next.value.textLine.length,\n        children: [requestLine.symbol],\n      });\n\n      const result: models.HttpRegionParserResult = {\n        nextParserLine: next.value.line,\n        symbols: [requestSymbol],\n      };\n\n      const headers = {};\n      requestLine.request.headers = headers;\n\n      const headersResult = await parser.parseSubsequentLines(\n        lineReader,\n        [\n          parser.parseComments,\n          parser.parseRequestHeaderFactory(headers),\n          parser.parseDefaultHeadersFactory(),\n          parser.parseQueryLineFactory(url => (requestLine.request.url += url)),\n          parser.parseUrlLineFactory(url => (requestLine.request.url += url)),\n        ],\n        context\n      );\n\n      result.nextParserLine = headersResult.nextLine || result.nextParserLine;\n      for (const parseResult of headersResult.parseResults) {\n        result.symbols?.push?.(...parseResult.symbols);\n      }\n      requestContext.modifyRequest?.(requestLine.request);\n      if (requestLine.request.headers) {\n        const contentType = getHeader(requestLine.request.headers, 'content-type');\n        if (isString(contentType)) {\n          requestLine.request.contentType = parseMimeType(contentType);\n        }\n      }\n\n      context.httpRegion.hooks.execute.addHook(\n        requestContext.protocol.toLowerCase(),\n        executeRequestClientFactory(requestContext.requestClientFactory, requestContext.sessionStore)\n      );\n\n      return result;\n    }\n    return false;\n  };\n}\nfunction getRequestParseLine(\n  httpLine: models.HttpLine,\n  context: RequestParserContext\n): { request: models.Request; symbol: models.HttpSymbol } | undefined {\n  const lineMatch = context.methodRegex.exec(httpLine.textLine);\n  if (lineMatch && lineMatch.length > 1 && lineMatch.groups) {\n    return {\n      request: {\n        url: lineMatch.groups.url,\n        protocol: context.protocol.toUpperCase(),\n        method: lineMatch.groups?.method || context.method || context.protocol,\n      },\n      symbol: new models.HttpSymbol({\n        name: lineMatch.groups.url || 'request',\n        description: `${context.protocol} Url`,\n        kind: models.HttpSymbolKind.url,\n        startLine: httpLine.line,\n        startOffset: 0,\n        endLine: httpLine.line,\n        endOffset: httpLine.textLine.length,\n        children: parser.parseHandlebarsSymbols(httpLine.textLine, httpLine.line),\n      }),\n    };\n  }\n  const protocolMatch = context.protocolRegex?.exec(httpLine.textLine);\n  if (protocolMatch && protocolMatch.length > 1 && protocolMatch.groups?.url) {\n    return {\n      request: {\n        url: protocolMatch.groups.url,\n        protocol: context.protocol.toUpperCase(),\n        method: protocolMatch.groups?.method || context.method || context.protocol,\n      },\n      symbol: new models.HttpSymbol({\n        name: protocolMatch.groups.url || 'request',\n        description: `${context.protocol} Url`,\n        kind: models.HttpSymbolKind.url,\n        startLine: httpLine.line,\n        startOffset: 0,\n        endLine: httpLine.line,\n        endOffset: httpLine.textLine.length,\n        children: parser.parseHandlebarsSymbols(httpLine.textLine, httpLine.line),\n      }),\n    };\n  }\n  return undefined;\n}\n\nfunction isValidRequestLine(\n  httpLine: models.HttpLine,\n  context: models.ParserContext,\n  requestContext: RequestParserContext\n): boolean {\n  if (isStringEmpty(httpLine.textLine)) {\n    return false;\n  }\n  if (context.forceRegionDelimiter && !!context.httpRegion.request) {\n    return false;\n  }\n  if (requestContext.methodRegex.exec(httpLine.textLine)?.groups?.url) {\n    return true;\n  }\n  if (!context.httpRegion.request && requestContext.protocolRegex) {\n    return !!requestContext.protocolRegex.exec(httpLine.textLine)?.groups?.url;\n  }\n  return false;\n}\n", "import { fileProvider, log } from '../io';\nimport * as models from '../models';\nimport { addHttpFileRequestClientHooks, executeGlobalScripts } from './httpRegionUtils';\nimport { replaceFilePath } from './variableUtils';\n\ninterface ImportProcessorContext extends models.ProcessorContext {\n  options: {\n    httpFiles?: Array<{ base: models.HttpFile; ref: models.HttpFile }>;\n    globalScriptsExecuted?: Array<models.HttpFile>;\n  };\n}\n\nexport function isHttpRegionSendContext(context: models.SendContext): context is models.HttpRegionSendContext {\n  const guard = context as models.HttpRegionSendContext;\n  return !!guard?.httpRegion;\n}\n\nexport function isHttpRegionsSendContext(context: models.SendContext): context is models.HttpRegionsSendContext {\n  const guard = context as models.HttpRegionsSendContext;\n  return Array.isArray(guard?.httpRegions);\n}\n\nexport function findHttpRegionInContext(name: string, context: ImportProcessorContext) {\n  const refHttpRegion = context.httpFile.findHttpRegion(name);\n  if (refHttpRegion) {\n    return refHttpRegion;\n  }\n  if (context.options.httpFiles) {\n    for (const { ref } of context.options.httpFiles.filter(obj => obj.base === context.httpFile)) {\n      const reference = ref.findHttpRegion(name);\n      if (reference) {\n        return reference;\n      }\n    }\n  }\n  return undefined;\n}\n\nexport async function importHttpFileInContext(\n  fileName: string,\n  httpFileStore: models.HttpFileStore,\n  context: ImportProcessorContext\n) {\n  const httpFile: models.HttpFile | undefined = await replaceFilePath(\n    fileName,\n    context,\n    async (absoluteFileName: models.PathLike) => {\n      log.debug(`parse imported file ${absoluteFileName}`);\n      if (!context.options.httpFiles) {\n        context.options.httpFiles = [];\n      }\n      const importedHttpFiles = context.options.httpFiles.filter(obj => obj.ref.fileName === absoluteFileName);\n      if (importedHttpFiles.length > 0) {\n        const ref = importedHttpFiles[0].ref;\n        if (!importedHttpFiles.some(obj => obj.base === context.httpFile)) {\n          context.options.httpFiles.push({ base: context.httpFile, ref });\n        }\n        return ref;\n      }\n      const ref = await httpFileStore.getOrCreate(\n        absoluteFileName,\n        async () => await fileProvider.readFile(absoluteFileName, 'utf-8'),\n        0,\n        {\n          workingDir: context.httpFile.rootDir,\n          config: context.config,\n        }\n      );\n      context.hooks = addHttpFileRequestClientHooks(context.hooks, ref);\n      context.options.httpFiles.push({ base: context.httpFile, ref });\n      return ref;\n    }\n  );\n\n  if (\n    httpFile &&\n    (!context.options.globalScriptsExecuted || context.options.globalScriptsExecuted.indexOf?.(httpFile) < 0)\n  ) {\n    if (!context.options.globalScriptsExecuted) {\n      context.options.globalScriptsExecuted = [];\n    }\n    log.debug(`execute global scripts for import ${httpFile.fileName}`);\n    context.options.globalScriptsExecuted.push(httpFile);\n    const cloneContext: ImportProcessorContext = {\n      ...context,\n      httpFile,\n    };\n    const globResult = await executeGlobalScripts(cloneContext);\n\n    return globResult;\n  }\n  return !!httpFile;\n}\n", "export function isPromise(obj: unknown): obj is Promise<unknown> {\n  const guard = obj as Promise<unknown>;\n  return guard && !!guard.then;\n}\n\nexport function sleep(timeout: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, timeout));\n}\n\nexport async function promiseQueue<T>(batchSize: number, ...promises: Array<() => Promise<T>>) {\n  const result: Array<T> = [];\n  const queue = async () => {\n    let promise: (() => Promise<T>) | undefined;\n    while ((promise = promises.shift())) {\n      result.push(await promise());\n    }\n  };\n\n  const queuePromises: Array<Promise<unknown>> = [];\n  for (let index = 0; index < batchSize; index++) {\n    queuePromises.push(queue());\n  }\n  await Promise.all(queuePromises);\n  return result;\n}\n", "import { default as dayjs } from 'dayjs';\nimport { v4 } from 'uuid';\n\nexport const randomData = {\n  alphabetic: (length = 10) => randomText(length, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'),\n  numeric: (length = 10) => randomText(length),\n  hexadecimal: (length = 10) => randomText(length, '1234567890ABCDEF'),\n  email: randomEmail,\n  float: (from = 0, to = 100) => Math.random() * (to - from) + from,\n  integer: (from = 0, to = 100) => Math.floor(Math.random() * (to - from) + from),\n  uuid: () => v4(),\n  date: (date: Date = new Date(), format: string | undefined = undefined) => dayjs(date).format(format),\n};\n\nexport function randomEmail() {\n  return `${randomText(30)}@${randomText(10)}.${randomArrayValue([\n    'com',\n    'org',\n    'at',\n    'de',\n    'fr',\n    'uk',\n    'it',\n    'ch',\n    'info',\n    'edu',\n    'asia',\n    'gov',\n    'app',\n    'io',\n  ])}`;\n}\n\nexport function randomText(length: number, chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_') {\n  const result = [];\n\n  if (length > 0) {\n    const abc = chars.split('');\n    for (let index = 0; index < length; index++) {\n      result.push(randomArrayValue(abc));\n    }\n  }\n\n  return result.join('');\n}\n\nexport function randomArrayValue(values: Array<unknown>) {\n  return values[Math.floor(Math.random() * (values.length - 1))];\n}\n", "import { HttpRegion, HttpResponse, ProcessorContext, TestFunction, TestResult, TestResultStatus } from '../models';\nimport {\n  assertHasNoResponseBody,\n  assertHasResponseBody,\n  assertHeaderContains,\n  assertHeaderEquals,\n  assertMaxTotalTime,\n  assertResponseBodyEquals,\n  assertStatusEquals,\n} from './assertUtils';\nimport { isError, parseError } from './errorUtils';\nimport { isHttpResponse } from './requestUtils';\n\nexport function testFactoryAsync({\n  httpRegion,\n}: ProcessorContext): (message: string, testMethod: (testResult: TestResult) => Promise<void>) => Promise<void> {\n  return async function test(\n    message: string,\n    testMethod: (testResult: TestResult) => Promise<void> | void\n  ): Promise<void> {\n    const testResult: TestResult = {\n      message,\n      status: TestResultStatus.SUCCESS,\n    };\n    if (typeof testMethod === 'function') {\n      try {\n        await testMethod(testResult);\n      } catch (err) {\n        setErrorInTestResult(testResult, err);\n      }\n    }\n    addTestResultToHttpRegion(httpRegion, testResult);\n  };\n}\n\nfunction setErrorInTestResult(testResult: TestResult, err: unknown) {\n  testResult.status = TestResultStatus.FAILED;\n  if (isError(err)) {\n    testResult.error = parseError(err);\n  } else {\n    testResult.error = {\n      displayMessage: `${err}`,\n      error: new Error(`${err}`),\n    };\n  }\n}\n\nexport function testFactory({ httpRegion, variables }: ProcessorContext): TestFunction {\n  const testFunction = function test(message: string, testMethod: () => void): void {\n    const testResult: TestResult = {\n      message,\n      status: TestResultStatus.SUCCESS,\n    };\n    if (typeof testMethod === 'function') {\n      try {\n        testMethod();\n      } catch (err) {\n        setErrorInTestResult(testResult, err);\n      }\n    }\n    addTestResultToHttpRegion(httpRegion, testResult);\n  };\n\n  function getHttpResponse(): HttpResponse | undefined {\n    if (isHttpResponse(variables.response)) {\n      return variables.response;\n    }\n    return httpRegion.response;\n  }\n\n  testFunction.status = (status: number) => {\n    const response = getHttpResponse();\n    if (response) {\n      testFunction(`response status equals to ${status}`, () => assertStatusEquals(response, status));\n    }\n  };\n  testFunction.totalTime = (maxTotalTime: number) => {\n    const response = getHttpResponse();\n    if (response) {\n      testFunction(`total time exceeded ${maxTotalTime}`, () => assertMaxTotalTime(response, maxTotalTime));\n    }\n  };\n  testFunction.header = (headerKey: string, val: string | string[] | undefined) => {\n    const response = getHttpResponse();\n    if (response) {\n      testFunction(`response header ${headerKey} equals ${val}`, () => assertHeaderEquals(response, headerKey, val));\n    }\n  };\n  testFunction.headerContains = (headerKey: string, val: string) => {\n    const response = getHttpResponse();\n    if (response) {\n      testFunction(`response header ${headerKey} contains ${val}`, () =>\n        assertHeaderContains(response, headerKey, val)\n      );\n    }\n  };\n  testFunction.responseBody = (val: unknown) => {\n    const response = getHttpResponse();\n    if (response) {\n      testFunction(`response body equals ${val}`, () => assertResponseBodyEquals(response, val));\n    }\n  };\n\n  testFunction.hasResponseBody = () => {\n    const response = getHttpResponse();\n    if (response) {\n      testFunction('response body exists', () => assertHasResponseBody(response));\n    }\n  };\n  testFunction.hasNoResponseBody = () => {\n    const response = getHttpResponse();\n    if (response) {\n      testFunction('response body does not exists', () => assertHasNoResponseBody(response));\n    }\n  };\n  return testFunction;\n}\nexport function addTestResultToHttpRegion(httpRegion: HttpRegion, testResult: TestResult) {\n  if (!httpRegion.testResults) {\n    httpRegion.testResults = [];\n  }\n  httpRegion.testResults.push(testResult);\n}\n\nexport function addSkippedTestResult(httpRegion: HttpRegion, message: string = 'request is skipped') {\n  addTestResultToHttpRegion(httpRegion, {\n    message,\n    status: TestResultStatus.SKIPPED,\n  });\n}\n", "import { createReadStream, promises as fs } from 'fs';\nimport { EOL } from 'os';\nimport { dirname, extname, isAbsolute, join } from 'path';\n\nimport { fileProvider, log, userInteractionProvider } from '../io';\nimport * as models from '../models';\n\nexport async function initIOProvider(): Promise<void> {\n  initFileProvider();\n  await initUserInteractionProvider();\n  initFixTestSymbols();\n}\n\nfunction initFixTestSymbols() {\n  if (process.platform === 'win32') {\n    // https://github.com/nodejs/node-v0.x-archive/issues/7940\n    models.testSymbols.ok = '[x]';\n    models.testSymbols.error = '[-]';\n    models.testSymbols.skipped = '[*]';\n  }\n}\n\nexport function initFileProvider(): void {\n  fileProvider.EOL = EOL;\n  fileProvider.isAbsolute = async (path: models.PathLike) => isAbsolute(fileProvider.toString(path));\n  fileProvider.dirname = (path: string) => dirname(fileProvider.toString(path));\n  fileProvider.hasExtension = (fileName: models.PathLike, ...extensions: Array<string>) => {\n    let extension = extname(fileProvider.toString(fileName));\n    if (extension.startsWith('.')) {\n      extension = extension.slice(1);\n    }\n    return extensions.indexOf(extension) >= 0;\n  };\n  fileProvider.joinPath = (path: models.PathLike, joinPath: string): models.PathLike =>\n    join(fileProvider.toString(path), joinPath);\n\n  fileProvider.exists = async (path: models.PathLike): Promise<boolean> => {\n    try {\n      return !!(await fs.stat(fileProvider.toString(path)));\n    } catch (err) {\n      return false;\n    }\n  };\n  fileProvider.readFile = async (fileName: models.PathLike, encoding: models.FileEncoding): Promise<string> => {\n    const file = fileProvider.fsPath(fileName);\n    if (file) {\n      return fs.readFile(file, encoding);\n    }\n    throw new Error('No valid path for cli');\n  };\n  fileProvider.readBuffer = async (fileName: models.PathLike) => {\n    const file = fileProvider.fsPath(fileName);\n    if (file) {\n      const stream = createReadStream(file);\n      return toBuffer(stream);\n    }\n    throw new Error('No valid path for cli');\n  };\n  fileProvider.writeBuffer = (fileName: models.PathLike, buffer: Buffer) =>\n    fs.writeFile(fileProvider.toString(fileName), buffer);\n  fileProvider.readdir = async (dirname: models.PathLike): Promise<string[]> =>\n    fs.readdir(fileProvider.toString(dirname));\n}\n\nfunction toBuffer(stream: NodeJS.ReadableStream): Promise<Buffer> {\n  return new Promise<Buffer>((resolve, reject) => {\n    const buffers: Buffer[] = [];\n    stream.on('data', obj => {\n      if (Buffer.isBuffer(obj)) {\n        buffers.push(obj);\n      } else {\n        buffers.push(Buffer.from(obj));\n      }\n    });\n    stream.on('end', () => resolve(Buffer.concat(buffers)));\n    stream.on('error', error => reject(error));\n    stream.resume();\n  });\n}\n\nasync function initUserInteractionProvider() {\n  const inquirer = (await import('inquirer')).default;\n  userInteractionProvider.showNote = async function showNote(note: string) {\n    const answer = await inquirer.prompt([\n      {\n        type: 'confirm',\n        name: 'note',\n        message: note,\n      },\n    ]);\n    return answer.note;\n  };\n  userInteractionProvider.showInputPrompt = async function showInputPrompt(\n    message: string,\n    defaultValue?: string,\n    maskedInput?: boolean\n  ) {\n    if (maskedInput) {\n      const answer = await inquirer.prompt([\n        {\n          type: 'password',\n          name: 'placeholder',\n          message,\n          mask: '*',\n          default: defaultValue,\n        },\n      ]);\n      return answer.placeholder;\n    }\n\n    const answer = await inquirer.prompt([\n      {\n        type: 'input',\n        name: 'placeholder',\n        message,\n        default: defaultValue,\n      },\n    ]);\n    return answer.placeholder;\n  };\n  userInteractionProvider.showListPrompt = async function showListPrompt(message: string, values: string[]) {\n    const answer = await inquirer.prompt([\n      {\n        type: 'list',\n        name: 'placeholder',\n        message,\n        choices: values,\n      },\n    ]);\n    return answer.placeholder;\n  };\n  userInteractionProvider.getClipboard = async function getClipboard() {\n    try {\n      const clipboard = await import('clipboardy');\n      return await clipboard.default.read();\n    } catch (err) {\n      log.warn(err);\n      return '';\n    }\n  };\n  userInteractionProvider.setClipboard = async function setClipboard(message: string) {\n    try {\n      const clipboard = await import('clipboardy');\n      await clipboard.default.write(message);\n    } catch (err) {\n      log.warn(err);\n    }\n  };\n}\n", "import { Command } from 'commander';\n\nimport { createEmptyProcessorContext } from '../../httpYacApi';\nimport { getOAuth2Response } from '../../plugins/oauth2/oauth2VariableReplacer';\nimport { HttpFileStore } from '../../store';\n\nexport function oauth2Command() {\n  const program = new Command('oauth2')\n    .description('generate oauth2 token')\n    .option('-f, --flow <flow>', 'flow used for oauth2 token generation', 'client_credentials')\n    .option('--prefix <prefix>', 'variable prefix used for variables')\n    .option('-e, --env  <env...>', 'list of environments')\n    .option(\n      '-o, --output <output>',\n      'output format of response (access_token, refresh_token, response)',\n      'access_token'\n    )\n    .option('--var  <variables...>', 'list of variables (e.g foo=\"bar\")')\n    .action(execute);\n  return program;\n}\n\nexport interface OAuth2Options {\n  env?: Array<string>;\n  flow: string;\n  output?: 'access_token' | 'refresh_token' | 'response';\n  var?: Array<string>;\n  verbose?: boolean;\n  prefix?: string;\n}\n\nasync function execute(options: OAuth2Options): Promise<void> {\n  const httpFileStore = new HttpFileStore();\n\n  const context = await createEmptyProcessorContext({\n    activeEnvironment: options.env,\n    httpFile: await httpFileStore.initHttpFile('oauth2.http', {\n      workingDir: process.cwd(),\n    }),\n    variables: options.var\n      ? Object.fromEntries(\n          options.var.map(obj => {\n            const split = obj.split('=');\n            return [split[0], split.slice(1).join('=')];\n          })\n        )\n      : undefined,\n  });\n  const result = await getOAuth2Response(options.flow, options.prefix, context);\n  if (result) {\n    switch (options.output) {\n      case 'response':\n        console.info(\n          JSON.stringify(\n            {\n              access_token: result.accessToken,\n              expires_in: result.expiresIn,\n              refresh_token: result.refreshToken,\n              refresh_expires_in: result.refreshExpiresIn,\n            },\n            null,\n            2\n          )\n        );\n        break;\n      case 'refresh_token':\n        console.info(result.refreshToken);\n        break;\n      default:\n        console.info(result.accessToken);\n        break;\n    }\n  } else {\n    process.exitCode = 1;\n    console.info('no valid auth response');\n  }\n}\n", "import { ok } from 'assert';\n\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport * as p from './predicates';\n\nexport const predicates: Array<p.TestPredicate> = [\n  new p.EndsWithPredicate(),\n  new p.EqualsPredicate(),\n  new p.ExistsPredicate(),\n  new p.GreaterEqualsPredicate(),\n  new p.GreaterPredicate(),\n  new p.IncludesPredicate(),\n  new p.IsArrayPredicate(),\n  new p.IsBooleanPredicate(),\n  new p.IsNumberPredicate(),\n  new p.IsStringPredicate(),\n  new p.LowerEqualsPredicate(),\n  new p.LowerPredicate(),\n  new p.MatchesPredicate(),\n  new p.NotEqualsPredicate(),\n  new p.StartsWithPredicate(),\n  new p.SHA256Predicate(),\n  new p.MD5Predicate(),\n  new p.SHA512Predicate(),\n  new p.IsFalsePredicate(),\n];\n\nexport async function parseAssertLine(\n  getLineReader: models.getHttpLineGenerator,\n  { httpRegion }: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n  const next = lineReader.next();\n  if (!next.done && next.value.textLine) {\n    const textLine = next.value.textLine;\n\n    const idRegex = predicates\n      .reduce((prev, curr) => {\n        prev.push(...curr.id);\n        return prev;\n      }, [] as Array<string>)\n      .join('|');\n    const regex = `^\\\\s*\\\\?\\\\?\\\\s*(?<type>[^\\\\s]*)(\\\\s+(?<value>.*))?\\\\s+(?<predicate>(${idRegex}))\\\\s*(?<expected>.*)\\\\s*$`;\n    const match = new RegExp(regex, 'iu').exec(textLine);\n\n    if (match && match.groups && !!match.groups.type && match.groups.predicate) {\n      const type = match.groups.type;\n      const valueString = match.groups.value;\n      const expectedString = match.groups.expected;\n      const predicate = predicates.find(obj => match.groups?.predicate && obj.id.indexOf(match.groups.predicate) >= 0);\n      if (predicate) {\n        httpRegion.hooks.onResponse.addHook(`test ${textLine}`, async (response, context) => {\n          const test = utils.testFactoryAsync(context);\n          await test(`${valueString || type} ${predicate.id[0]} ${expectedString || ''}`.trim(), async testResult => {\n            const value = await context.httpFile.hooks.provideAssertValue.trigger(type, valueString, response, context);\n            const expected =\n              expectedString && (await utils.replaceVariables(expectedString, models.VariableType.variable, context));\n\n            if (expected !== expectedString) {\n              testResult.message = `${valueString || type} ${predicate.id[0]} ${expected}`;\n            }\n            const expectedConverted = predicate.noAutoConvert ? expected : convertToType(value, expected);\n            ok(\n              predicate.match(value, expectedConverted),\n              `${valueString || type} (${value}) ${predicate.id[0]} ${utils.toString(expectedConverted) || ''}`.trim()\n            );\n          });\n        });\n      }\n\n      return {\n        nextParserLine: next.value.line,\n        symbols: [\n          new models.HttpSymbol({\n            name: `assert ${match.groups.type}`,\n            description: `${match.groups.predicate} ${match.groups.expected || ''}`.trim(),\n            kind: models.HttpSymbolKind.script,\n            startLine: next.value.line,\n            startOffset: 0,\n            endLine: next.value.line,\n            endOffset: next.value.textLine.length,\n          }),\n        ],\n      };\n    }\n  }\n  return false;\n}\n\nfunction convertToType(target: unknown, value: unknown) {\n  if (value !== undefined && value !== null) {\n    if (typeof target === 'number') {\n      return utils.toNumber(value);\n    }\n    if (typeof target === 'boolean') {\n      return utils.toBoolean(value, !!value);\n    }\n    if (typeof target === 'string') {\n      return utils.toString(value);\n    }\n    if (target === null && value === 'null') {\n      return null;\n    }\n    if (target === undefined && value === 'undefined') {\n      return undefined;\n    }\n    if (typeof target === 'object' && typeof value === 'string') {\n      try {\n        return JSON.parse(value);\n      } catch {\n        return value;\n      }\n    }\n  }\n  return value;\n}\n", "import { toString } from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class EndsWithPredicate implements TestPredicate {\n  readonly id = ['endsWith'];\n  match(value: unknown, expected: unknown): boolean {\n    const valString = toString(value);\n    const expectedString = toString(expected);\n    if (valString && expectedString) {\n      return valString?.endsWith(expectedString);\n    }\n    return false;\n  }\n}\n", "import { stringifySafe } from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class EqualsPredicate implements TestPredicate {\n  readonly id = ['==', '===', 'equals'];\n  match(value: unknown, expected: unknown): boolean {\n    if (typeof value === 'object') {\n      return stringifySafe(value) === stringifySafe(expected);\n    }\n    return value === expected;\n  }\n}\n", "import { TestPredicate } from './testPredicate';\n\nexport class ExistsPredicate implements TestPredicate {\n  readonly id = ['exists', 'isTrue'];\n  match(value: unknown): boolean {\n    return !!value;\n  }\n}\n", "import { toNumber } from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class GreaterEqualsPredicate implements TestPredicate {\n  readonly id = ['>='];\n  match(value: unknown, expected: unknown): boolean {\n    const valNumber = toNumber(value);\n    const expectedNumber = toNumber(expected);\n    if (valNumber !== undefined && expectedNumber !== undefined) {\n      return valNumber >= expectedNumber;\n    }\n    return false;\n  }\n}\n", "import { toNumber } from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class GreaterPredicate implements TestPredicate {\n  readonly id = ['>'];\n  match(value: unknown, expected: unknown): boolean {\n    const valNumber = toNumber(value);\n    const expectedNumber = toNumber(expected);\n    if (valNumber !== undefined && expectedNumber !== undefined) {\n      return valNumber > expectedNumber;\n    }\n    return false;\n  }\n}\n", "import { toString } from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class IncludesPredicate implements TestPredicate {\n  readonly id = ['contains', 'includes'];\n  match(value: unknown, expected: unknown): boolean {\n    const valString = toString(value);\n    const expectedString = toString(expected);\n    if (valString && expectedString) {\n      return valString.includes(expectedString);\n    }\n    if (Array.isArray(value)) {\n      return value.indexOf(expected) >= 0;\n    }\n    return false;\n  }\n}\n", "import { TestPredicate } from './testPredicate';\n\nexport class IsArrayPredicate implements TestPredicate {\n  readonly id = ['isArray'];\n  match(value: unknown): boolean {\n    return Array.isArray(value);\n  }\n}\n", "import { TestPredicate } from './testPredicate';\n\nexport class IsBooleanPredicate implements TestPredicate {\n  readonly id = ['isBoolean'];\n  match(value: unknown): boolean {\n    return typeof value === 'boolean';\n  }\n}\n", "import { TestPredicate } from './testPredicate';\n\nexport class IsFalsePredicate implements TestPredicate {\n  readonly id = ['isFalse'];\n  match(value: unknown): boolean {\n    return !value;\n  }\n}\n", "import { TestPredicate } from './testPredicate';\n\nexport class IsNumberPredicate implements TestPredicate {\n  readonly id = ['isNumber'];\n  match(value: unknown): boolean {\n    return typeof value === 'number';\n  }\n}\n", "import { TestPredicate } from './testPredicate';\n\nexport class IsStringPredicate implements TestPredicate {\n  readonly id = ['isString'];\n  match(value: unknown): boolean {\n    return typeof value === 'string';\n  }\n}\n", "import { toNumber } from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class LowerEqualsPredicate implements TestPredicate {\n  readonly id = ['<='];\n  match(value: unknown, expected: unknown): boolean {\n    const valNumber = toNumber(value);\n    const expectedNumber = toNumber(expected);\n    if (valNumber !== undefined && expectedNumber !== undefined) {\n      return valNumber <= expectedNumber;\n    }\n    return false;\n  }\n}\n", "import { toNumber } from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class LowerPredicate implements TestPredicate {\n  readonly id = ['<'];\n  match(value: unknown, expected: unknown): boolean {\n    const valNumber = toNumber(value);\n    const expectedNumber = toNumber(expected);\n    if (valNumber !== undefined && expectedNumber !== undefined) {\n      return valNumber < expectedNumber;\n    }\n    return false;\n  }\n}\n", "import { toString } from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class MatchesPredicate implements TestPredicate {\n  readonly id = ['matches'];\n  readonly noAutoConvert = true;\n  match(value: unknown, expected: unknown): boolean {\n    const valString = toString(value);\n    const expectedString = toString(expected);\n    if (valString && expectedString) {\n      return new RegExp(expectedString, 'u').test(valString);\n    }\n    return false;\n  }\n}\n", "import { createHash } from 'crypto';\n\nimport * as utils from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class MD5Predicate implements TestPredicate {\n  readonly id = ['md5'];\n  noAutoConvert = true;\n  match(value: unknown, expected: unknown): boolean {\n    const val = utils.toBufferLike(value);\n    if (val) {\n      const hash = createHash('md5').update(val).digest('base64');\n      return hash === expected;\n    }\n    return false;\n  }\n}\n", "import { TestPredicate } from './testPredicate';\n\nexport class NotEqualsPredicate implements TestPredicate {\n  readonly id = ['!=', '!==', 'not equals'];\n  match(value: unknown, expected: unknown): boolean {\n    return value !== expected;\n  }\n}\n", "import { createHash } from 'crypto';\n\nimport * as utils from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class SHA256Predicate implements TestPredicate {\n  readonly id = ['sha256'];\n  noAutoConvert = true;\n  match(value: unknown, expected: unknown): boolean {\n    const val = utils.toBufferLike(value);\n    if (val) {\n      const hash = createHash('sha256').update(val).digest('base64');\n      return hash === expected;\n    }\n    return false;\n  }\n}\n", "import { createHash } from 'crypto';\n\nimport * as utils from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class SHA512Predicate implements TestPredicate {\n  readonly id = ['sha512'];\n  noAutoConvert = true;\n  match(value: unknown, expected: unknown): boolean {\n    const val = utils.toBufferLike(value);\n    if (val) {\n      const hash = createHash('sha512').update(val).digest('base64');\n      return hash === expected;\n    }\n    return false;\n  }\n}\n", "import { toString } from '../../../utils';\nimport { TestPredicate } from './testPredicate';\n\nexport class StartsWithPredicate implements TestPredicate {\n  readonly id = ['startsWith'];\n  match(value: unknown, expected: unknown): boolean {\n    const valString = toString(value);\n    const expectedString = toString(expected);\n    if (valString && expectedString) {\n      return valString?.startsWith(expectedString);\n    }\n    return false;\n  }\n}\n", "import { completionItemProvider } from '../../io';\n\ncompletionItemProvider.emptyLineProvider.push(() => [\n  {\n    name: '?? status == ',\n    description: 'Status assert (200)',\n  },\n  {\n    name: '?? status == 200',\n    description: 'Status assert (200)',\n  },\n  {\n    name: '?? duration <',\n    description: 'Duration assert',\n  },\n  {\n    name: '?? body contains',\n    description: 'Body assert',\n  },\n  {\n    name: '?? body matches',\n    description: 'Body assert',\n  },\n  {\n    name: '?? body md5',\n    description: 'Body assert',\n  },\n  {\n    name: '?? body sh256',\n    description: 'Body assert',\n  },\n  {\n    name: '?? header',\n    description: 'Header assert',\n  },\n]);\n", "import * as models from '../../models';\n\nexport function provideAssertValueDuration(type: string, value: string | undefined, response: models.HttpResponse) {\n  if (type === 'duration') {\n    switch (value) {\n      case 'firstByte':\n        return response?.timings?.firstByte;\n      case 'download':\n        return response?.timings?.download;\n      case 'wait':\n        return response?.timings?.wait;\n      case 'request':\n        return response?.timings?.request;\n      case 'tcp':\n        return response?.timings?.tcp;\n      case 'tls':\n        return response?.timings?.tls;\n      default:\n        return response?.timings?.total;\n    }\n  }\n  return false;\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport function provideAssertValueHeader(type: string, value: string | undefined, response: models.HttpResponse) {\n  if (type === 'header' && value) {\n    return utils.getHeader(response.headers, value);\n  }\n  return false;\n}\n", "import * as io from '../../io';\nimport * as models from '../../models';\n\nexport async function provideAssertValueJavascript(\n  type: string,\n  value: string | undefined,\n  response: models.HttpResponse,\n  context: models.ProcessorContext\n) {\n  if (type === 'js' && value) {\n    return await io.javascriptProvider.evalExpression(value, context, {\n      response,\n    });\n  }\n  if (type === 'body') {\n    if (value) {\n      return await io.javascriptProvider.evalExpression(`(response.parsedBody || response.body).${value}`, context, {\n        response,\n      });\n    }\n    return response.body;\n  }\n  return false;\n}\n", "import * as models from '../../models';\n\nexport function provideAssertValueStatus(type: string, _value: string | undefined, response: models.HttpResponse) {\n  if (type === 'status') {\n    return response?.statusCode;\n  }\n  return false;\n}\n", "import { HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../models';\nimport { addTestResultToHttpRegion, isError, parseError } from '../../utils';\n\nexport class TestFailedInterceptor implements HookInterceptor<[models.ProcessorContext], boolean | void> {\n  id = 'testFailed';\n  before = ['processedHttpRegion'];\n\n  public async onError(\n    err: unknown,\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    if (isError(err)) {\n      const { httpRegion } = hookContext.args[0];\n      addTestResultToHttpRegion(httpRegion, {\n        message: err.message,\n        error: parseError(err),\n        status: models.TestResultStatus.ERROR,\n      });\n    }\n    return true;\n  }\n}\n", "import './completionItemProvider';\n\nimport * as models from '../../models';\nimport { parseAssertLine } from './assertHttpRegionParser';\nimport { provideAssertValueDuration } from './provideAssertValueDuration';\nimport { provideAssertValueHeader } from './provideAssertValueHeader';\nimport { provideAssertValueJavascript } from './provideAssertValueJavascript';\nimport { provideAssertValueStatus } from './provideAssertValueStatus';\nimport { TestFailedInterceptor } from './testFailedInterceptor';\n\nexport function registerAssertPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.execute.addInterceptor(new TestFailedInterceptor());\n  api.hooks.provideAssertValue.addHook('status', provideAssertValueStatus, { before: ['request'] });\n  api.hooks.provideAssertValue.addHook('header', provideAssertValueHeader, { before: ['request'] });\n  api.hooks.provideAssertValue.addHook('javascript', provideAssertValueJavascript, { before: ['request'] });\n  api.hooks.provideAssertValue.addHook('duration', provideAssertValueDuration, { before: ['request'] });\n  api.hooks.parse.addHook('assert', parseAssertLine, { before: ['request'] });\n}\n", "import { completionItemProvider } from '../../io';\n\ncompletionItemProvider.variableProvider.push(() => [\n  {\n    name: '$prompt ',\n    description: 'Prompt',\n  },\n  {\n    name: '$input',\n    description: 'Input',\n  },\n  {\n    name: '$input-askonce',\n    description: 'Input',\n  },\n  {\n    name: '$password',\n    description: 'Password',\n  },\n  {\n    name: '$pick <placeholder> $value:',\n    description: 'Password',\n  },\n  {\n    name: '$pick-askonce <placeholder> $value:',\n    description: 'Password',\n  },\n  {\n    name: '$timestamp',\n    description: 'Timestamp',\n  },\n  {\n    name: '$datetime',\n    description: 'Datetime',\n  },\n  {\n    name: '$localDatetime',\n    description: 'Local Datetime',\n  },\n]);\n", "import { log } from '../../../io';\nimport { VariableProviderContext, Variables } from '../../../models';\n\nconst DEFAULT_ENV = '$default';\nconst SHARED_ENV = '$shared';\n\nexport async function provideConfigEnvironments(context: VariableProviderContext): Promise<string[]> {\n  if (context.config?.environments) {\n    const envs = Object.keys(context.config.environments).filter(obj => [DEFAULT_ENV, SHARED_ENV].indexOf(obj) < 0);\n\n    log.info('Config Env Provider found environments', envs);\n    return envs;\n  }\n  return [];\n}\n\nexport async function provideConfigVariables(\n  envs: string[] | undefined,\n  context: VariableProviderContext\n): Promise<Variables> {\n  const variables: Variables[] = [];\n\n  if (context.config?.environments) {\n    const environments = context.config.environments;\n\n    variables.push(environments[SHARED_ENV]);\n    if (envs && envs.length > 0) {\n      variables.push(...envs.map(env => environments[env]));\n    } else {\n      variables.push(environments[DEFAULT_ENV]);\n    }\n  }\n  return Object.assign({}, ...variables);\n}\n", "export * from './getEnvironmentConfig';\nexport * from './httpFile';\nexport * from './httpFileStore';\nexport * from './httpRegion';\nexport * from './parser';\nexport * from './pluginStore';\nexport * from './userSessionStore';\n", "import { default as chalk } from 'chalk';\nimport merge from 'lodash/merge';\n\nimport { log } from '../io';\nimport * as models from '../models';\nimport * as utils from '../utils';\n\nexport async function getEnvironmentConfig(\n  config?: models.EnvironmentConfig,\n  httpFile?: models.HttpFile\n): Promise<models.EnvironmentConfig> {\n  const environmentConfigs: Array<models.EnvironmentConfig> = [];\n  if (httpFile) {\n    const fileConfig = await utils.getHttpyacConfig(httpFile.fileName, httpFile.rootDir);\n    if (fileConfig) {\n      environmentConfigs.push(fileConfig);\n    }\n  }\n  if (config) {\n    environmentConfigs.push(config);\n  }\n\n  const result = merge(\n    {\n      log: {\n        level: models.LogLevel.warn,\n        supportAnsiColors: true,\n      },\n      cookieJarEnabled: true,\n      envDirName: 'env',\n    },\n    ...environmentConfigs\n  );\n\n  refreshStaticConfig(result);\n  return result;\n}\n\nfunction refreshStaticConfig(config: models.EnvironmentConfig) {\n  if (typeof config?.log?.level === 'undefined') {\n    log.options.level = models.LogLevel.warn;\n  } else {\n    log.options.level = config?.log?.level;\n  }\n  if (config?.log?.supportAnsiColors === false) {\n    chalk.level = 0;\n  }\n}\n", "import * as models from '../models';\n\nexport class HttpFile implements models.HttpFile {\n  constructor(\n    public fileName: models.PathLike,\n    public readonly rootDir?: models.PathLike\n  ) {}\n  readonly hooks = {\n    parse: new models.ParseHook(),\n    parseMetaData: new models.ParseMetaDataHook(),\n    parseEndRegion: new models.ParseEndRegionHook(),\n    provideAssertValue: new models.ProvideAssertValue(),\n    replaceVariable: new models.ReplaceVariableHook(),\n    provideEnvironments: new models.ProvideEnvironmentsHook(),\n    provideVariables: new models.ProvideVariablesHook(),\n    execute: new models.ExecuteHook(),\n    onStreaming: new models.OnStreaming(),\n    onRequest: new models.OnRequestHook(),\n    onResponse: new models.OnResponseHook(),\n    responseLogging: new models.ResponseLoggingHook(),\n  };\n  readonly httpRegions: Array<models.HttpRegion> = [];\n  activeEnvironment?: string[];\n\n  public findHttpRegion(name: string): models.HttpRegion | undefined {\n    return this.httpRegions.find(obj => obj.metaData?.name === name && !obj.metaData.disabled);\n  }\n\n  public get globalHttpRegions() {\n    return this.httpRegions.filter(obj => obj.isGlobal() && !obj.metaData.disabled);\n  }\n}\n", "import { HookCancel } from 'hookpoint';\n\nimport { fileProvider, httpClientProvider, javascriptProvider, log, userInteractionProvider } from '../io';\nimport * as models from '../models';\nimport { userSessionStore as sessionStore } from '../store';\nimport * as utils from '../utils';\nimport { getEnvironmentConfig } from './getEnvironmentConfig';\nimport { HttpFile } from './httpFile';\nimport { parseHttpFile } from './parser';\nimport { pluginStore } from './pluginStore';\n\ninterface HttpFileStoreEntry {\n  version: number;\n  cacheKey: string;\n  httpFile?: models.HttpFile;\n  promise?: Promise<models.HttpFile>;\n}\n\nexport class HttpFileStore implements models.HttpFileStore {\n  private readonly storeCache: Array<HttpFileStoreEntry> = [];\n\n  constructor(private readonly plugins: Record<string, models.ConfigureHooks> = {}) {}\n\n  private getFromStore(fileName: models.PathLike, version: number) {\n    const cacheKey = fileProvider.toString(fileName);\n    let httpFileStoreEntry = this.storeCache.find(obj => obj.cacheKey === cacheKey);\n    if (!httpFileStoreEntry) {\n      httpFileStoreEntry = {\n        cacheKey,\n        version,\n      };\n      this.storeCache.push(httpFileStoreEntry);\n    }\n    return httpFileStoreEntry;\n  }\n\n  get(fileName: models.PathLike): models.HttpFile | undefined {\n    const cacheKey = fileProvider.toString(fileName);\n    return this.storeCache.find(obj => obj.cacheKey === cacheKey)?.httpFile;\n  }\n\n  getAll(): Array<models.HttpFile> {\n    const result: Array<models.HttpFile> = [];\n    for (const store of this.storeCache) {\n      if (store.httpFile) {\n        result.push(store.httpFile);\n      }\n    }\n    return result;\n  }\n\n  getOrCreate(\n    fileName: models.PathLike,\n    getText: () => Promise<string>,\n    version: number,\n    options: models.HttpFileStoreOptions\n  ): Promise<models.HttpFile> {\n    const httpFileStoreEntry: HttpFileStoreEntry = this.getFromStore(fileName, version);\n    if (version > httpFileStoreEntry.version || !httpFileStoreEntry.httpFile) {\n      if (httpFileStoreEntry.promise && version <= httpFileStoreEntry.version) {\n        return httpFileStoreEntry.promise;\n      }\n\n      httpFileStoreEntry.promise = getText()\n        .then(text => this.parse(fileName, text, options))\n        .then(httpFile => {\n          delete httpFileStoreEntry.promise;\n          if (httpFileStoreEntry.httpFile) {\n            for (const httpRegion of httpFile.httpRegions) {\n              const prevHttpRegion = httpFileStoreEntry.httpFile.httpRegions.find(\n                obj => obj.symbol.source === httpRegion.symbol.source\n              );\n              if (prevHttpRegion) {\n                Object.assign(httpRegion.variablesPerEnv, prevHttpRegion.variablesPerEnv);\n              }\n            }\n          }\n          httpFileStoreEntry.version = version;\n          httpFileStoreEntry.httpFile = httpFile;\n          return httpFile;\n        })\n        .catch(err => {\n          delete httpFileStoreEntry.promise;\n          if (httpFileStoreEntry.httpFile) {\n            this.remove(httpFileStoreEntry.httpFile.fileName);\n          }\n          throw err;\n        });\n      return httpFileStoreEntry.promise;\n    }\n    return httpFileStoreEntry.promise || Promise.resolve(httpFileStoreEntry.httpFile);\n  }\n\n  async parse(fileName: models.PathLike, text: string, options: models.HttpFileStoreOptions): Promise<models.HttpFile> {\n    const httpFile = await this.initHttpFile(fileName, options);\n    return await parseHttpFile(httpFile, text, this);\n  }\n\n  remove(fileName: models.PathLike): boolean {\n    const cacheKey = fileProvider.toString(fileName);\n    const index = this.storeCache.findIndex(obj => obj.cacheKey === cacheKey);\n    if (index >= 0) {\n      this.storeCache.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  rename(oldFileName: models.PathLike, newFileName: models.PathLike): void {\n    const oldCacheKey = fileProvider.toString(oldFileName);\n    const httpFileStoreEntry = this.storeCache.find(obj => obj.cacheKey === oldCacheKey);\n    if (httpFileStoreEntry) {\n      httpFileStoreEntry.cacheKey = fileProvider.toString(newFileName);\n      if (httpFileStoreEntry.httpFile) {\n        httpFileStoreEntry.httpFile.fileName = newFileName;\n      }\n    }\n  }\n\n  public clear(): void {\n    this.storeCache.length = 0;\n  }\n\n  public async initHttpFile(fileName: models.PathLike, options: models.HttpFileStoreOptions): Promise<models.HttpFile> {\n    const absoluteFileName = (await utils.toAbsoluteFilename(fileName, options.workingDir)) || fileName;\n\n    const rootDir =\n      (await utils.findRootDirOfFile(absoluteFileName, options.workingDir, ...utils.defaultConfigFiles)) ||\n      (await utils.findRootDirOfFile(\n        absoluteFileName,\n        options.workingDir,\n        'package.json',\n        options.config?.envDirName || 'env'\n      )) ||\n      options.workingDir;\n\n    const httpFile = new HttpFile(absoluteFileName, rootDir);\n\n    options.config = await getEnvironmentConfig(options.config, httpFile);\n\n    const hooks: Record<string, models.ConfigureHooks> = { ...pluginStore, ...this.plugins };\n    if (rootDir) {\n      Object.assign(hooks, await utils.getPlugins(rootDir));\n      if (options.config?.configureHooks) {\n        hooks['.httpyac.js'] = options.config.configureHooks;\n      }\n    }\n    const envPluginLocation = process.env.HTTPYAC_PLUGIN;\n    if (envPluginLocation) {\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-var-requires\n        const envHook = require(envPluginLocation);\n        if (envHook.configureHooks) {\n          hooks.HTTPYAC_PLUGIN = envHook.configureHooks;\n        }\n      } catch (err) {\n        log.warn('Global Hook Plugin not loaded', err);\n      }\n    }\n    await this.configureHooks(httpFile, options, hooks);\n    return httpFile;\n  }\n\n  private async configureHooks(\n    httpFile: models.HttpFile,\n    options: models.HttpFileStoreOptions,\n    hooks: Record<string, models.ConfigureHooks>\n  ) {\n    if (options.config) {\n      const api: models.HttpyacHooksApi = {\n        version: '1.0.0',\n        rootDir: httpFile.rootDir,\n        config: options.config,\n        httpFile,\n        hooks: httpFile.hooks,\n        log,\n        fileProvider,\n        sessionStore,\n        userInteractionProvider,\n        httpClientProvider,\n        javascriptProvider,\n        utils,\n        getHookCancel: () => HookCancel,\n      };\n      for (const [plugin, hook] of Object.entries(hooks)) {\n        try {\n          const result = hook(api);\n          if (utils.isPromise(result)) {\n            await result;\n          }\n        } catch (err) {\n          log.error(`error in ${plugin}`, err);\n        }\n      }\n    }\n  }\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport async function closeHttpRegion(parserContext: models.ParserContext): Promise<void> {\n  await parserContext.httpFile.hooks.parseEndRegion.trigger(parserContext);\n\n  const { httpRegion } = parserContext;\n  parserContext.httpRegion.symbol.name = utils.getDisplayName(httpRegion);\n  parserContext.httpRegion.symbol.description = utils.getRegionDescription(httpRegion);\n  parserContext.httpFile.httpRegions.push(parserContext.httpRegion);\n  delete parserContext.forceRegionDelimiter;\n}\n", "import { RegionSeparator } from '../../utils';\n\nexport function createReaderFactory(startLine: number, lines: Array<string>) {\n  return function* createReader(noStopOnMetaTag?: boolean) {\n    for (let line = startLine; line < lines.length; line++) {\n      const textLine = lines[line];\n      yield {\n        textLine,\n        line,\n      };\n      if (!noStopOnMetaTag) {\n        // if parser region is not closed stop at delimiter\n        if (RegionSeparator.test(textLine)) {\n          break;\n        }\n      }\n    }\n  };\n}\n", "import { HookCancel } from 'hookpoint';\n\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { HttpRegion } from '../httpRegion';\nimport { closeHttpRegion } from './closeHttpRegion';\nimport { createReaderFactory } from './createReaderFactory';\nimport { setSource } from './setSource';\n\nexport async function parseHttpFile(\n  httpFile: models.HttpFile,\n  text: string,\n  httpFileStore: models.HttpFileStore\n): Promise<models.HttpFile> {\n  const lines = utils.toMultiLineArray(text);\n\n  const parserContext: models.ParserContext = {\n    lines,\n    httpFile,\n    httpRegion: new HttpRegion(httpFile, 0),\n    data: {},\n    httpFileStore,\n  };\n\n  for (let line = 0; line < lines.length; line++) {\n    const httpRegionParserResult = await httpFile.hooks.parse.trigger(createReaderFactory(line, lines), parserContext);\n    if (httpRegionParserResult && httpRegionParserResult !== HookCancel) {\n      if (httpRegionParserResult.endRegionLine !== undefined && httpRegionParserResult.endRegionLine >= 0) {\n        parserContext.httpRegion.symbol.endLine = httpRegionParserResult.endRegionLine;\n        parserContext.httpRegion.symbol.endOffset = lines[httpRegionParserResult.endRegionLine].length;\n        await closeHttpRegion(parserContext);\n        parserContext.httpRegion = new HttpRegion(httpFile, httpRegionParserResult.nextParserLine + 1);\n      }\n      if (httpRegionParserResult.symbols) {\n        if (parserContext.httpRegion.symbol.children) {\n          parserContext.httpRegion.symbol.children.push(...httpRegionParserResult.symbols);\n        } else {\n          parserContext.httpRegion.symbol.children = httpRegionParserResult.symbols;\n        }\n      }\n      line = httpRegionParserResult.nextParserLine;\n    }\n  }\n\n  await closeHttpRegion(parserContext);\n  parserContext.httpRegion.symbol.endLine = lines.length - 1;\n  parserContext.httpRegion.symbol.endOffset = lines[lines.length - 1].length;\n  setSource(httpFile.httpRegions, lines);\n  return httpFile;\n}\n", "import { Hook, HookCancel } from 'hookpoint';\n\nimport * as models from '../models';\nimport { addHttpFileRequestClientHooks, isError, toEnvironmentKey } from '../utils';\n\nexport class HttpRegion implements models.HttpRegion {\n  request?: models.Request<string, models.RequestBody> | undefined;\n  response?: models.HttpResponse | undefined;\n  testResults?: models.TestResult[] | undefined;\n  responseRefs?: string[] | undefined;\n  readonly variablesPerEnv: Record<string, models.Variables> = {};\n  readonly metaData: Record<string, string | true | undefined> = {};\n  readonly hooks = {\n    execute: new models.ExecuteHook(),\n    onRequest: new models.OnRequestHook(),\n    onStreaming: new models.OnStreaming(),\n    onResponse: new models.OnResponseHook(),\n    responseLogging: new models.ResponseLoggingHook(),\n  };\n  readonly symbol: models.HttpSymbol;\n\n  public constructor(\n    private readonly httpFile: models.HttpFile,\n    start = 0\n  ) {\n    this.symbol = new models.HttpSymbol({\n      name: '-',\n      description: '-',\n      kind: models.HttpSymbolKind.request,\n      startLine: start,\n      startOffset: 0,\n      endLine: start,\n      endOffset: 0,\n    });\n  }\n\n  public get id(): string {\n    return `${this.httpFile.fileName}_${this.symbol.startLine}`;\n  }\n\n  public isGlobal() {\n    return !(this.request || this.metaData.name);\n  }\n\n  public clone(httpFile?: models.HttpFile) {\n    const httpRegion = new HttpRegion(httpFile || this.httpFile);\n    httpRegion.request = this.request;\n    Object.assign(httpRegion.symbol, this.symbol);\n    Object.assign(httpRegion.hooks, this.hooks);\n    Object.assign(httpRegion.variablesPerEnv, this.variablesPerEnv);\n    Object.assign(httpRegion.metaData, this.metaData);\n    return httpRegion;\n  }\n\n  public async execute(\n    context: models.PartialProperty<models.ProcessorContext, 'httpRegion', 'hooks'>,\n    isMainContext?: boolean\n  ): Promise<boolean> {\n    delete this.response;\n    this.testResults = [];\n\n    if (context.httpRegion) {\n      this.registerRegionDependent(context.httpRegion);\n    }\n\n    context.progress?.report?.({\n      message: `${this.symbol.name}`,\n    });\n\n    let executeHook: Hook<[models.ProcessorContext], boolean, boolean[]> = this.hooks.execute;\n\n    if (!this.isGlobal()) {\n      executeHook = this.httpFile.hooks.execute.merge(executeHook);\n      for (const globalRegion of this.httpFile.httpRegions.filter(obj => obj.isGlobal())) {\n        if (globalRegion instanceof HttpRegion) {\n          globalRegion.registerRegionDependent(this);\n        }\n      }\n    }\n\n    try {\n      const result = await executeHook.trigger({\n        ...context,\n        httpFile: this.httpFile,\n        httpRegion: this,\n        hooks: addHttpFileRequestClientHooks(this.hooks, this.httpFile),\n        isMainContext,\n      });\n      if (!this.isGlobal()) {\n        this.resetDependentRegionsWithVisitor(toEnvironmentKey(context.activeEnvironment), this, []);\n      }\n      return result !== HookCancel && result.every(obj => !!obj);\n    } catch (err) {\n      if (isError(err)) {\n        if (!err.handled) {\n          await context.logResponse?.(this.response, this);\n          err.handled = true;\n        }\n      }\n      return false;\n    }\n  }\n  private dependentsPerEnv: Array<models.HttpRegion> = [];\n\n  private resetDependentRegionsWithVisitor(\n    envKey: string,\n    refRegion: HttpRegion,\n    visitedDependents: Array<models.HttpRegion>\n  ): void {\n    const unvisitedDependents = refRegion.dependentsPerEnv.filter(d => !visitedDependents.includes(d));\n    for (const httpRegion of unvisitedDependents) {\n      delete httpRegion.response;\n      delete httpRegion.variablesPerEnv[envKey];\n\n      visitedDependents.push(httpRegion);\n\n      if (httpRegion instanceof HttpRegion) {\n        this.resetDependentRegionsWithVisitor(envKey, httpRegion, visitedDependents);\n      }\n    }\n  }\n\n  private registerRegionDependent(httpRegion: models.HttpRegion): void {\n    if (httpRegion && !this.dependentsPerEnv.includes(httpRegion) && httpRegion !== this) {\n      this.dependentsPerEnv.push(httpRegion);\n    }\n  }\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport function setSource(httpRegions: Array<models.HttpRegion>, lines: Array<string>) {\n  for (const httpRegion of httpRegions) {\n    setSymbolSource(httpRegion.symbol, lines);\n  }\n}\n\nfunction setSymbolSource(symbol: models.HttpSymbol, lines: Array<string>): void {\n  symbol.source = utils.toMultiLineString(lines.slice(symbol.startLine, symbol.endLine + 1));\n  let endOffset: number | undefined = symbol.endOffset - lines[symbol.endLine].length;\n  if (endOffset >= 0) {\n    endOffset = undefined;\n  }\n  symbol.source = symbol.source.slice(symbol.startOffset, endOffset);\n  if (symbol.children) {\n    for (const child of symbol.children) {\n      setSymbolSource(child, lines);\n    }\n  }\n}\n", "import { ConfigureHooks } from '../models';\n\nexport const pluginStore: Record<string, ConfigureHooks> = {};\n", "import { Dispose, SessionStore, UserSession } from '../models';\n\nexport class UserSessionStore implements SessionStore {\n  readonly userSessions: Array<UserSession> = [];\n\n  private readonly sessionChangedListener: Array<() => void> = [];\n\n  onSessionChanged(listener: () => void): Dispose {\n    this.sessionChangedListener.push(listener);\n\n    return () => {\n      const index = this.sessionChangedListener.indexOf(listener);\n      if (index >= 0) {\n        this.sessionChangedListener.splice(index, 1);\n      }\n    };\n  }\n\n  async reset(): Promise<void> {\n    for (const userSession of this.userSessions) {\n      if (userSession.delete) {\n        userSession.delete();\n      }\n    }\n    this.userSessions.length = 0;\n    this.notifySessionChanged();\n  }\n\n  getUserSession<T extends UserSession>(id: string): T | undefined {\n    return this.userSessions.find(obj => obj.id === id) as T;\n  }\n\n  setUserSession<T extends UserSession>(userSession: T): void {\n    this.removeUserSession(userSession.id);\n    this.userSessions.push(userSession);\n    this.notifySessionChanged();\n  }\n\n  private notifySessionChanged() {\n    for (const listener of this.sessionChangedListener) {\n      listener();\n    }\n  }\n\n  removeUserSession(id: string): void {\n    const userSession = this.userSessions.find(obj => obj.id === id);\n    if (userSession) {\n      this.userSessions.splice(this.userSessions.indexOf(userSession), 1);\n      if (userSession.delete) {\n        userSession.delete();\n      }\n      this.notifySessionChanged();\n    }\n  }\n\n  isUserSession(obj: unknown): obj is UserSession {\n    const session = obj as UserSession;\n    return session && !!session.description && !!session.id && !!session.title && !!session.type && !!session.details;\n  }\n}\n\nexport const userSessionStore = new UserSessionStore();\n", "import * as models from '../../../models';\nimport { userSessionStore } from '../../../store';\n\nexport async function provideLastResponseVariables(): Promise<models.Variables> {\n  const userSession: (models.UserSession & { response?: models.HttpResponse }) | undefined =\n    userSessionStore.getUserSession('last_response');\n  if (userSession?.response) {\n    return {\n      response: userSession.response,\n    };\n  }\n  return {};\n}\n", "import { HookInterceptor, HookTriggerContext } from 'hookpoint';\nimport cloneDeep from 'lodash/cloneDeep';\n\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport class CreateRequestInterceptor implements HookInterceptor<[models.ProcessorContext], boolean | void> {\n  id = 'createRequest';\n  async beforeLoop(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const [context] = hookContext.args;\n    if (context.httpRegion.request) {\n      utils.report(context, 'init request');\n      context.request = cloneDeep(context.httpRegion.request);\n    }\n    return true;\n  }\n}\n", "import { HookCancel, HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nconst VariableHookId = 'variable';\n\nexport class LazyVariableInterceptor implements HookInterceptor<[models.ProcessorContext], boolean> {\n  id = 'variable';\n\n  async beforeLoop(hookContext: HookTriggerContext<[models.ProcessorContext], true>) {\n    const context = hookContext.args[0];\n    context.options.lazyVariables = true;\n    return true;\n  }\n\n  async beforeTrigger(hookContext: HookTriggerContext<[models.ProcessorContext], true>) {\n    const context = hookContext.args[0];\n    if (hookContext.hookItem?.id !== VariableHookId) {\n      if (context.options.lazyVariables) {\n        await this.replaceAllVariables(context);\n        delete context.options.lazyVariables;\n      }\n    }\n    return true;\n  }\n\n  private async replaceAllVariables(context: models.ProcessorContext): Promise<void> {\n    for (const [key, value] of Object.entries(context.variables)) {\n      const result = await utils.replaceVariables(value, models.VariableType.variable, context);\n      if (result !== HookCancel) {\n        context.variables[key] = result;\n      }\n    }\n  }\n}\n", "import { HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport class LogResponseInterceptor implements HookInterceptor<[models.ProcessorContext], boolean | void> {\n  id = 'logResponse';\n  async afterLoop(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const context = hookContext.args[0];\n    let clone: models.HttpResponse | undefined;\n    if (context.httpRegion.response) {\n      clone = utils.cloneResponse(context.httpRegion.response);\n      if (!clone.tags) {\n        clone.tags = [];\n      }\n      clone.tags.push('httpRegion', context.isMainContext ? 'mainResponse' : 'refResponse');\n      delete context.httpRegion.response;\n    }\n    await utils.logResponse(clone, context);\n    return true;\n  }\n}\n", "import { HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\n\nexport class ProcessedHttpRegionInterceptor implements HookInterceptor<[models.ProcessorContext], boolean | void> {\n  id = 'processedHttpRegion';\n\n  public getResponseLoggingInterceptor(): HookInterceptor<\n    [models.HttpResponse, models.ProcessorContext],\n    boolean | void\n  > {\n    return {\n      id: this.id,\n      afterLoop: this.afterResponseLoggingLoop.bind(this),\n    };\n  }\n\n  public async beforeLoop(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const [context] = hookContext.args;\n    if (context.processedHttpRegions) {\n      const processedHttpRegion = this.toProcessedHttpRegion(context);\n      context.processedHttpRegions.push(processedHttpRegion);\n    }\n    return true;\n  }\n\n  public async onError(\n    _err: unknown,\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    this.updateProcessedHttpRegionAfterLoop(hookContext.args[0]);\n    return true;\n  }\n\n  public async afterLoop(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    this.updateProcessedHttpRegionAfterLoop(hookContext.args[0]);\n    return true;\n  }\n\n  private updateProcessedHttpRegionAfterLoop(context: models.ProcessorContext) {\n    const processedHttpRegion = context.processedHttpRegions\n      ?.slice()\n      .reverse()\n      ?.find(obj => obj.id === context.httpRegion.id);\n    if (processedHttpRegion) {\n      processedHttpRegion.end = performance.now();\n      processedHttpRegion.duration = processedHttpRegion.end - processedHttpRegion.start;\n      processedHttpRegion.metaData = {\n        ...context.httpRegion.metaData,\n      };\n      processedHttpRegion.testResults = context.httpRegion.testResults;\n    }\n  }\n\n  private async afterResponseLoggingLoop(\n    hookContext: HookTriggerContext<[models.HttpResponse, models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const [response, context] = hookContext.args;\n\n    const processedHttpRegion = context.processedHttpRegions?.find(obj => obj.id === context.httpRegion.id);\n    if (processedHttpRegion) {\n      processedHttpRegion.request = response.request;\n      processedHttpRegion.response = response;\n    }\n    return true;\n  }\n\n  private toProcessedHttpRegion(context: models.ProcessorContext): models.ProcessedHttpRegion {\n    return {\n      id: context.httpRegion.id,\n      filename: context.httpFile.fileName,\n      symbol: context.httpRegion.symbol,\n      isGlobal: context.httpRegion.isGlobal(),\n      testResults: context.httpRegion.testResults,\n      start: performance.now(),\n    };\n  }\n}\n", "import { HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\nimport { toEnvironmentKey } from '../../../utils';\n\ninterface RegionScopedVariableOptions {\n  variables?: models.Variables;\n}\n\nexport class RegionScopedVariablesInterceptor implements HookInterceptor<[models.ProcessorContext], boolean | void> {\n  id = 'regionScopedVariables';\n  async beforeLoop(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const context = hookContext.args[0];\n    const env = toEnvironmentKey(context.activeEnvironment);\n    if (context.config?.useRegionScopedVariables) {\n      const regionScopedVariables: RegionScopedVariableOptions = context.options;\n      regionScopedVariables.variables = context.variables;\n      context.variables = Object.assign(\n        {},\n        context.variables,\n        ...context.httpFile.globalHttpRegions.map(obj => obj.variablesPerEnv[env])\n      );\n    } else {\n      context.variables = Object.assign(\n        context.variables,\n        ...context.httpFile.httpRegions.map(obj => obj.variablesPerEnv[env])\n      );\n    }\n\n    return true;\n  }\n  async afterLoop(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const context = hookContext.args[0];\n    if (context.config?.useRegionScopedVariables) {\n      const regionScopedVariables: RegionScopedVariableOptions = context.options;\n      if (regionScopedVariables.variables) {\n        const newVariables = context.variables;\n        context.variables = regionScopedVariables.variables;\n        this.autoShareNewVariables(newVariables, context);\n      }\n    }\n    return true;\n  }\n\n  private autoShareNewVariables(variables: models.Variables, context: models.ProcessorContext) {\n    for (const [key, value] of Object.entries(variables)) {\n      if (!context.variables[key]) {\n        context.variables[key] = value;\n      }\n    }\n  }\n}\n", "import { HookTriggerContext } from 'hookpoint';\nimport * as models from '../../../models';\n\nimport * as io from '../../../io';\nimport { addSkippedTestResult } from '../../../utils';\n\nexport function disabledMetaDataHandler(type: string, value: string | undefined, context: models.ParserContext) {\n  if (type === 'disabled') {\n    if (!value) {\n      context.httpRegion.hooks.execute.addInterceptor({\n        id: 'disabled',\n        async beforeLoop(\n          hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n        ): Promise<boolean | undefined> {\n          hookContext.bail = true;\n          const { httpRegion } = hookContext.args[0];\n          addSkippedTestResult(httpRegion);\n          return true;\n        },\n      });\n    } else if (typeof value === 'string') {\n      context.httpRegion.hooks.execute.addHook('disabled', async context => {\n        const result = await io.javascriptProvider.evalExpression(value, context);\n        if (result) {\n          addSkippedTestResult(context.httpRegion);\n        }\n        return !result;\n      });\n    }\n    return true;\n  }\n  return false;\n}\n", "import * as models from '../../../models';\n\nexport function forceRegionDelimiterMetaDataHandler(\n  type: string,\n  _value: string | undefined,\n  context: models.ParserContext\n) {\n  if (type === 'forceRegionDelimiter') {\n    context.forceRegionDelimiter = true;\n  }\n  return false;\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport function importMetaDataHandler(type: string, value: string | undefined, context: models.ParserContext) {\n  if (type === 'import' && value) {\n    context.httpRegion.hooks.execute.addObjHook(obj => obj.process, new ImportMetaAction(value, context.httpFileStore));\n    return true;\n  }\n  return false;\n}\n\nclass ImportMetaAction {\n  id = 'import';\n\n  constructor(\n    private readonly fileName: string,\n    private readonly httpFileStore: models.HttpFileStore\n  ) {}\n\n  async process(context: models.ProcessorContext): Promise<boolean> {\n    return utils.importHttpFileInContext(this.fileName, this.httpFileStore, context);\n  }\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport function jwtMetaDataHandler(type: string, value: string | undefined, context: models.ParserContext) {\n  if (type === 'jwt') {\n    context.httpRegion.hooks.onResponse.addHook('jwt', async response => {\n      const body = response.parsedBody || response.body;\n      if (body && typeof body === 'object') {\n        const entries = Object.entries(body);\n\n        let checkEntries = entries;\n        if (value) {\n          checkEntries = entries.filter(([key]) => value.indexOf(key) >= 0);\n        }\n        for (const [key, value] of checkEntries) {\n          const val = parseJwtToken(value);\n          if (val) {\n            entries.push([`${key}_parsed`, val]);\n          }\n        }\n        const result = Object.fromEntries(entries);\n        const resultString = utils.stringifySafe(result, 2);\n        response.body = resultString;\n        response.prettyPrintBody = resultString;\n        response.parsedBody = result;\n      }\n    });\n    return true;\n  }\n  return false;\n}\n\nfunction parseJwtToken(value: unknown): utils.JWTToken | null {\n  if (utils.isString(value)) {\n    return utils.decodeJWT(value);\n  }\n  return null;\n}\n", "import { v4 as uuid } from 'uuid';\n\nimport * as models from '../../../models';\nimport { userSessionStore } from '../../../store';\nimport * as utils from '../../../utils';\n\nexport function keepStreamingMetaDataHandler(type: string, _value: string | undefined, context: models.ParserContext) {\n  if (type === 'keepStreaming') {\n    const id = `keep_streaming_${uuid()}`;\n    context.httpRegion.hooks.onStreaming.addHook('keepStreaming', async (context: models.ProcessorContext) => {\n      if (context.request) {\n        utils.report(context, 'stream until manual cancellation');\n        await new Promise(resolve => {\n          if (context.requestClient) {\n            context.requestClient.addEventListener('disconnect', () => resolve(true));\n          }\n        });\n      }\n    });\n    context.httpRegion.hooks.onResponse.addHook('keepStreaming', () => {\n      userSessionStore.removeUserSession(id);\n    });\n    return true;\n  }\n  return false;\n}\n", "import { HookCancel, HookInterceptor, HookTriggerContext, IHook } from 'hookpoint';\nimport { v4 as uuid } from 'uuid';\n\nimport * as io from '../../../io';\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport function loopMetaDataHandler(type: string, value: string | undefined, context: models.ParserContext): boolean {\n  if (type === 'loop' && value) {\n    const forOfMatch = /^\\s*for\\s+(?<variable>.*)\\s+of\\s+(?<iterable>.*)\\s*/u.exec(value);\n    if (forOfMatch?.groups?.iterable && forOfMatch?.groups?.variable) {\n      addHook(context, {\n        type: LoopMetaType.forOf,\n        variable: forOfMatch.groups.variable,\n        iterable: forOfMatch.groups.iterable,\n      });\n      return true;\n    }\n    const forMatch = /^\\s*for\\s*(?<counter>\\d*)\\s*$/u.exec(value);\n    if (forMatch?.groups?.counter) {\n      addHook(context, {\n        type: LoopMetaType.for,\n        counter: Number.parseInt(forMatch.groups.counter, 10),\n      });\n      return true;\n    }\n    const whileMatch = /^\\s*while\\s*(?<expression>.*)\\s*$/u.exec(value);\n    if (whileMatch?.groups?.expression) {\n      addHook(context, {\n        type: LoopMetaType.while,\n        expression: whileMatch.groups.expression,\n      });\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction addHook(context: models.ParserContext, data: Omit<LoopMetaData, 'index'>) {\n  const loopAction = new LoopMetaInterceptor(data);\n  context.httpRegion.hooks.execute.addInterceptor(loopAction);\n  context.httpRegion.hooks.execute.addObjHook(obj => obj.process, loopAction);\n}\n\nenum LoopMetaType {\n  for,\n  forOf,\n  while,\n}\n\ninterface LoopMetaData {\n  type: LoopMetaType;\n  iterable?: string;\n  variable?: string;\n  counter?: number;\n  expression?: string;\n}\n\nclass LoopMetaInterceptor implements HookInterceptor<[models.ProcessorContext], boolean> {\n  id;\n  isInLoop = false;\n  hook: IHook<[models.ProcessorContext], boolean, unknown> | undefined;\n  constructor(private readonly data: LoopMetaData) {\n    this.id = `loop_${uuid()}`;\n  }\n\n  async beforeLoop(hookContext: HookTriggerContext<[models.ProcessorContext], boolean>): Promise<boolean> {\n    this.hook = hookContext.hook;\n    if (this.isInLoop) {\n      hookContext.index = hookContext.hook.items.findIndex(obj => obj.id === this.id);\n    }\n    return true;\n  }\n\n  async process(context: models.ProcessorContext): Promise<boolean> {\n    if (this.hook && !this.isInLoop) {\n      const responses = [];\n      try {\n        this.isInLoop = true;\n        const iteration = this.iterate(context);\n        let next = await iteration.next();\n        while (!next.done) {\n          utils.report(context, `${next.value.index + 1} loop pass`);\n          const loopContext = {\n            ...context,\n            httpRegion: this.createHttpRegionClone(context.httpRegion, next.value.index),\n            variables: Object.assign(context.variables, next.value.variables),\n          };\n          const result = await this.hook.trigger(loopContext);\n          if (result === HookCancel) {\n            return false;\n          }\n          responses.push(loopContext.variables.response);\n          next = await iteration.next();\n        }\n        if (context.httpRegion.metaData.name && responses.length > 0) {\n          utils.setVariableInContext(\n            {\n              [`${context.httpRegion.metaData.name}`]: responses[0],\n              [`${context.httpRegion.metaData.name}List`]: responses,\n            },\n            context\n          );\n        }\n      } finally {\n        this.isInLoop = false;\n      }\n    }\n    return true;\n  }\n\n  async afterTrigger?(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean>\n  ): Promise<boolean | undefined> {\n    if (!this.isInLoop && hookContext.hookItem?.id === this.id) {\n      hookContext.bail = true;\n    }\n    return true;\n  }\n\n  private async *iterate(context: models.ProcessorContext) {\n    switch (this.data.type) {\n      case LoopMetaType.forOf:\n        yield* this.iterateForOfLoop(context);\n        break;\n      case LoopMetaType.for:\n        yield* this.iterateForLoop();\n        break;\n      case LoopMetaType.while:\n        yield* this.iterateWhileLoop(context);\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async *iterateForOfLoop(context: models.ProcessorContext) {\n    if (this.data.variable && this.data.iterable) {\n      const array = await io.javascriptProvider.evalExpression(this.data.iterable, context);\n      let iterable: Array<unknown> | undefined;\n      if (Array.isArray(array)) {\n        iterable = array;\n      }\n      if (iterable) {\n        let index = 0;\n        for (const variable of iterable) {\n          const variables: models.Variables = {\n            $index: index,\n          };\n          variables[this.data.variable] = variable;\n          yield {\n            index,\n            variables,\n          };\n          index++;\n        }\n      }\n    }\n  }\n\n  private async *iterateWhileLoop(context: models.ProcessorContext) {\n    if (this.data.expression) {\n      let index = 0;\n      while (await io.javascriptProvider.evalExpression(this.data.expression, context)) {\n        yield {\n          index,\n          variables: {\n            $index: index,\n          },\n        };\n        index++;\n      }\n    }\n  }\n\n  private *iterateForLoop() {\n    if (this.data.counter) {\n      for (let index = 0; index < this.data.counter; index++) {\n        yield {\n          index,\n          variables: {\n            $index: index,\n          },\n        };\n      }\n    }\n  }\n\n  private createHttpRegionClone(httpRegion: models.HttpRegion, index: number): models.HttpRegion {\n    const clone = httpRegion.clone();\n    clone.metaData.name = httpRegion.metaData.name ? `${httpRegion.metaData.name}${index}` : undefined;\n    return clone;\n  }\n}\n", "import * as models from '../../../models';\n\nexport function noRedirectMetaDataHandler(type: string, _value: string | undefined, context: models.ParserContext) {\n  if (type === 'noRedirect') {\n    context.httpRegion.hooks.onRequest.addHook('noRedirect', async request => {\n      request.noRedirect = true;\n    });\n    return true;\n  }\n  return false;\n}\n", "import * as models from '../../../models';\n\nexport function noRejectUnauthorizedMetaDataHandler(\n  type: string,\n  _value: string | undefined,\n  context: models.ParserContext\n) {\n  if (type === 'noRejectUnauthorized') {\n    context.httpRegion.hooks.onRequest.addHook('noRejectUnauthorized', async request => {\n      request.noRejectUnauthorized = true;\n    });\n    return true;\n  }\n  return false;\n}\n", "import { userInteractionProvider } from '../../../io';\nimport * as models from '../../../models';\nimport { getDisplayName } from '../../../utils';\n\nexport function noteMetaDataHandler(type: string, value: string | undefined, context: models.ParserContext) {\n  if (type === 'note') {\n    const note = value || `Are you sure you want to send the request ${getDisplayName(context.httpRegion)}?`;\n\n    context.httpRegion.hooks.execute.addInterceptor({\n      id: 'note',\n      beforeLoop: () => userInteractionProvider.showNote(note),\n    });\n    return true;\n  }\n  return false;\n}\n", "import * as models from '../../../models';\n\nexport function proxyMetaDataHandler(type: string, value: string | undefined, context: models.ParserContext) {\n  if (type === 'proxy') {\n    context.httpRegion.hooks.onRequest.addHook('proxy', async request => {\n      request.proxy = value;\n    });\n    return true;\n  }\n  return false;\n}\n", "import { log } from '../../../io';\nimport * as models from '../../../models';\nimport { userSessionStore } from '../../../store';\nimport * as utils from '../../../utils';\n\nexport function rateLimitMetaDataHandler(\n  type: string,\n  value: string | undefined,\n  { httpRegion }: models.ParserContext\n) {\n  if (type === 'ratelimit' && value) {\n    const match =\n      /^\\s*(slot(:)?\\s*(?<slot>[^\\s]+))?\\s*(minIdleTime(:)?\\s*(?<minIdleTime>\\d*))?\\s*(max(:)?\\s*(?<max>\\d*))\\s*(expire(:)?\\s*(?<expire>\\d*))?\\s*$/iu.exec(\n        value\n      );\n    if (match?.groups) {\n      const slot = match.groups.slot || 'rateLimit';\n      const minIdleTime = match.groups.minIdleTime || '0';\n      const max = match.groups.max || '0';\n      const expire = match.groups.expire || '0';\n\n      httpRegion.hooks.execute.addHook('rateLimit', async context => {\n        const rateLimitSession = getRateLimitSession(\n          slot,\n          Number.parseInt(minIdleTime, 10),\n          Number.parseInt(max, 10),\n          Number.parseInt(expire, 10)\n        );\n\n        rateLimitSession.requests.push(await checkRateLimit(rateLimitSession, context));\n        return true;\n      });\n    }\n  }\n  return false;\n}\n\nasync function checkRateLimit(rateLimitSession: RateLimitSession, context: models.ProcessorContext) {\n  while (rateLimitSession.requests.length > 0) {\n    const currentRequest = new Date();\n    removeExpiredRequests(rateLimitSession.requests, currentRequest, rateLimitSession.expire);\n\n    if (rateLimitSession.max > 0 && rateLimitSession.requests.length >= rateLimitSession.max) {\n      const first = rateLimitSession.requests[0];\n      const freeSlotTime = rateLimitSession.expire + first.getTime() - currentRequest.getTime();\n\n      if (freeSlotTime > 0) {\n        utils.report(context, `rate limit max reached. wait for ${freeSlotTime}`);\n        log.debug(`rate limit max reached. wait for ${freeSlotTime} (slot ${rateLimitSession.slot})`);\n        await utils.sleep(freeSlotTime);\n        log.debug('rate limit max waited');\n      }\n      continue;\n    }\n    if (rateLimitSession.requests.length > 0) {\n      const lastRequest = rateLimitSession.requests[rateLimitSession.requests.length - 1];\n      if (lastRequest && rateLimitSession.minIdleTime > 0) {\n        const minIdleTime = lastRequest.getTime() + rateLimitSession.minIdleTime - currentRequest.getTime();\n        if (minIdleTime > 0) {\n          utils.report(context, `rate limit minIdleTime, wait for ${minIdleTime}`);\n          log.debug(`rate limit minIdleTime, wait for ${minIdleTime} (slot ${rateLimitSession.slot})`);\n          await utils.sleep(minIdleTime);\n          log.debug('rate limit minIdleTime waited');\n          continue;\n        }\n      }\n    }\n    return currentRequest;\n  }\n  return new Date();\n}\n\ninterface RateLimitSession extends models.UserSession {\n  slot: string;\n  minIdleTime: number;\n  max: number;\n  expire: number;\n  lastRequest?: Date;\n  requests: Array<Date>;\n}\n\nfunction isRateLimitSession(session: unknown): session is RateLimitSession {\n  const rateLimitSession = session as RateLimitSession;\n  return !!rateLimitSession?.requests && rateLimitSession.type === 'RateLimit';\n}\n\nfunction getRateLimitSession(slot: string, minIdleTime: number, max: number, expire: number) {\n  const sessionId = `ratelimit_${slot}`;\n  const session = userSessionStore.getUserSession(sessionId);\n\n  if (isRateLimitSession(session)) {\n    session.max = max;\n    session.minIdleTime = minIdleTime;\n    session.expire = expire;\n    return session;\n  }\n\n  const description = [];\n  if (minIdleTime > 0) {\n    description.push(`minIdleTime ${minIdleTime}ms`);\n  }\n  if (expire > 0) {\n    description.push(`max ${max} with expire ${expire}ms`);\n  }\n\n  const result: RateLimitSession = {\n    id: sessionId,\n    type: 'RateLimit',\n    title: `rate limit slot ${slot}`,\n    details: {\n      slot,\n      minIdleTime,\n      max,\n      expire,\n    },\n    description: description.join(', '),\n    slot,\n    minIdleTime,\n    max,\n    expire,\n    requests: [],\n  };\n  userSessionStore.setUserSession(result);\n  return result;\n}\n\nfunction removeExpiredRequests(requests: Array<Date>, current: Date, expire: number) {\n  if (expire > 0) {\n    let index = 0;\n    for (const request of requests) {\n      if (current.getTime() - request.getTime() >= expire) {\n        index++;\n      } else {\n        break;\n      }\n    }\n    requests.splice(0, index);\n  } else {\n    requests.splice(0, requests.length - 1);\n  }\n}\n", "import { log } from '../../../io';\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport function refMetaDataHandler(type: string, name: string | undefined, context: models.ParserContext): boolean {\n  if (['ref', 'forceRef'].indexOf(type) >= 0 && name) {\n    context.httpRegion.hooks.execute.addObjHook(\n      obj => obj.process,\n      new RefMetaAction({\n        name,\n        force: type === 'forceRef',\n      })\n    );\n    return true;\n  }\n  return false;\n}\n\nexport interface RefMetaHttpRegionData {\n  name: string;\n  force: boolean;\n}\n\nclass RefMetaAction {\n  id = 'ref';\n\n  constructor(private readonly data: RefMetaHttpRegionData) {}\n\n  async process(context: models.ProcessorContext): Promise<boolean> {\n    const name = await utils.replaceVariables(this.data.name, this.id, context);\n    if (typeof name !== 'string' || !name) {\n      log.error(`ref ${this.data.name} not resolvable to a valid name: ${this.data.name} -> ${name}`);\n      throw new Error(`ref ${this.data.name} not resolvable to a valid name: ${this.data.name} -> ${name}`);\n    }\n    let result = true;\n    utils.report(context, `load reference ${name}`);\n    const reference = utils.findHttpRegionInContext(name, context);\n    if (reference) {\n      const envKey = utils.toEnvironmentKey(context.activeEnvironment);\n      utils.setVariableInContext(reference.variablesPerEnv[envKey], context);\n      log.trace('import variables', reference.variablesPerEnv[envKey]);\n      if (this.data.force || utils.isUndefined(context.variables[name])) {\n        result = await reference.execute(context);\n        if (result) {\n          // ref to ref variable export\n          utils.setVariableInContext(reference.variablesPerEnv[envKey], context);\n        } else if (reference.testResults?.some(t => t.status === models.TestResultStatus.SKIPPED)) {\n          utils.addSkippedTestResult(context.httpRegion, 'ref is skipped');\n        }\n      }\n    } else {\n      log.error(`ref ${name} not found`);\n      throw new Error(`ref ${name} not found`);\n    }\n    return result;\n  }\n}\n", "import * as models from '../../../models';\n\nexport function responseRefMetaDataHandler(type: string, value: string | undefined, context: models.ParserContext) {\n  if (type === 'responseRef' && value) {\n    if (!context.httpRegion.responseRefs) {\n      context.httpRegion.responseRefs = [];\n    }\n    context.httpRegion.responseRefs.push(value);\n  }\n  return false;\n}\n", "import { javascriptProvider } from '../../../io';\nimport * as models from '../../../models';\nimport { report, sleep } from '../../../utils';\n\nexport function sleepMetaDataHandler(type: string, value: string | undefined, context: models.ParserContext) {\n  if (type === 'sleep' && value) {\n    context.httpRegion.hooks.execute.addHook('sleep', async ctx => {\n      const timeout = await javascriptProvider.evalExpression(value, ctx);\n      if (Number.isSafeInteger(timeout)) {\n        await report(ctx, `Sleep for ${timeout}ms`);\n        await sleep(timeout as number);\n      }\n      return true;\n    });\n    return true;\n  }\n  return false;\n}\n", "import * as models from '../../../models';\nimport { toNumber } from '../../../utils';\n\nexport function timeoutMetaDataHandler(type: string, value: string | undefined, context: models.ParserContext) {\n  const val = toNumber(value);\n  if (type === 'timeout' && val !== undefined) {\n    context.httpRegion.hooks.onRequest.addHook('timeout', async request => {\n      request.timeout = val;\n    });\n    return true;\n  }\n  return false;\n}\n", "import { log } from '../../../io';\nimport * as models from '../../../models';\n\nexport function verboseMetaDataHandler(type: string, _value: string | undefined, context: models.ParserContext) {\n  if (type === 'verbose' || type === 'debug') {\n    const level = type === 'debug' ? models.LogLevel.debug : models.LogLevel.trace;\n    log.options.level = level;\n    context.httpRegion.hooks.execute.addInterceptor({\n      id: 'verbose',\n      async beforeLoop() {\n        log.options.level = level;\n        return true;\n      },\n    });\n    return true;\n  }\n  return false;\n}\n", "import {\n  getHttpLineGenerator,\n  HttpLineGenerator,\n  HttpRegionParserResult,\n  HttpSymbol,\n  HttpSymbolKind,\n  ParserContext,\n} from '../../../models';\nimport { toMultiLineString } from '../../../utils';\n\nexport async function parseComment(\n  getLineReader: getHttpLineGenerator,\n  { httpRegion }: ParserContext\n): Promise<HttpRegionParserResult> {\n  const lineReader = getLineReader(true);\n  const comment = getCommentContent(lineReader);\n  if (comment) {\n    if (!httpRegion.metaData.description) {\n      // first comment gets description\n      httpRegion.metaData.description = comment.comment;\n    }\n    return {\n      nextParserLine: comment.endLine,\n      symbols: [\n        new HttpSymbol({\n          name: 'comment',\n          description: comment.comment,\n          kind: HttpSymbolKind.comment,\n          startLine: comment.startLine,\n          startOffset: 0,\n          endLine: comment.endLine,\n          endOffset: comment.endOffset,\n        }),\n      ],\n    };\n  }\n  return false;\n}\n\nexport interface CommentParserResult {\n  startLine: number;\n  endLine: number;\n  endOffset: number;\n  comment: string;\n}\n\nfunction getCommentContent(lineReader: HttpLineGenerator): CommentParserResult | false {\n  let next = lineReader.next();\n  if (!next.done) {\n    const startLine = next.value.line;\n    const singleLineMatch = /^\\s*\\/\\/\\s*(?<comment>.*)\\s*$/u.exec(next.value.textLine);\n    if (singleLineMatch?.groups?.comment) {\n      return {\n        startLine,\n        endLine: startLine,\n        endOffset: next.value.textLine.length,\n        comment: singleLineMatch.groups.comment,\n      };\n    }\n\n    const multiLineMatch = /^\\s*\\/\\*$/u.exec(next.value.textLine);\n    if (multiLineMatch) {\n      next = lineReader.next();\n      const lines: Array<string> = [];\n      while (!next.done) {\n        if (/^\\s*\\*\\/\\s*$/u.test(next.value.textLine)) {\n          return {\n            startLine,\n            endLine: next.value.line,\n            endOffset: next.value.textLine.length,\n            comment: toMultiLineString(lines),\n          };\n        }\n        lines.push(next.value.textLine);\n        next = lineReader.next();\n      }\n    }\n  }\n  return false;\n}\n", "import { log } from '../../../io';\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nconst MetaDataRegex = /^\\s*(#+|\\/{2})/u;\n\nexport async function parseMetaData(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n  const { httpRegion, data } = context;\n  if (data.metaTitle) {\n    httpRegion.metaData.title = data.metaTitle.trim();\n    if (!httpRegion.metaData.name) {\n      httpRegion.metaData.name = data.metaTitle.trim();\n    }\n    delete data.metaTitle;\n  }\n\n  const next = lineReader.next();\n  if (!next.done) {\n    const textLine = next.value.textLine;\n    if (MetaDataRegex.test(textLine)) {\n      if (isMarkdownRequest(context)) {\n        if (textLine.trim() !== '###') {\n          log.debug('request with markdown only supports delimiter after request line');\n          return false;\n        }\n      }\n\n      const result: models.HttpRegionParserResult = {\n        nextParserLine: next.value.line,\n        symbols: [],\n      };\n      const delimiterMatch = utils.RegionSeparator.exec(textLine);\n      if (delimiterMatch) {\n        result.endRegionLine = next.value.line - 1;\n        result.symbols.push(\n          new models.HttpSymbol({\n            name: 'separator',\n            description: delimiterMatch.groups?.title || '-',\n            kind: models.HttpSymbolKind.metaData,\n            startLine: next.value.line,\n            startOffset: 0,\n            endLine: next.value.line,\n            endOffset: textLine.length,\n          })\n        );\n        data.metaTitle = delimiterMatch.groups?.title;\n      } else {\n        const commentResult = await utils.parseComments(next.value, context, MetaDataRegex);\n        if (commentResult) {\n          result.symbols = commentResult.symbols;\n        }\n      }\n      return result;\n    }\n  }\n  return false;\n}\n\nfunction isMarkdownRequest(context: models.ParserContext) {\n  if (context.httpRegion.request?.headers) {\n    const contentType = utils.parseContentType(context.httpRegion.request.headers);\n    if (utils.isMimeTypeMarkdown(contentType)) {\n      return true;\n    }\n  }\n  return false;\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function parseRequestBody(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n\n  if (context.httpRegion.request) {\n    const requestBody = getRequestBody(context);\n    const next = lineReader.next();\n    if (!next.done) {\n      if (requestBody.rawBody.length > 0 || !utils.isStringEmpty(next.value.textLine)) {\n        const symbols: Array<models.HttpSymbol> = [];\n\n        if (!requestBody.symbol || requestBody.symbol.endLine !== next.value.line - 1) {\n          requestBody.symbol = new models.HttpSymbol({\n            name: 'request body',\n            description: 'request body',\n            kind: models.HttpSymbolKind.requestBody,\n            startLine: next.value.line,\n            startOffset: 0,\n            endLine: next.value.line,\n            endOffset: next.value.textLine.length,\n            children: utils.parseHandlebarsSymbols(next.value.textLine, next.value.line),\n          });\n          symbols.push(requestBody.symbol);\n        } else {\n          requestBody.symbol.endLine = next.value.line;\n          requestBody.symbol.endOffset = next.value.textLine.length;\n          requestBody.symbol.children?.push?.(...utils.parseHandlebarsSymbols(next.value.textLine, next.value.line));\n        }\n\n        const fileImport = utils.parseFileImport(next.value.textLine);\n        if (fileImport) {\n          requestBody.rawBody.push(fileImport);\n          requestBody.symbol.children?.push(\n            new models.HttpSymbol({\n              name: 'filename',\n              description: fileImport.fileName,\n              kind: models.HttpSymbolKind.path,\n              startLine: next.value.line,\n              startOffset: next.value.textLine.indexOf(fileImport.fileName),\n              endLine: next.value.line,\n              endOffset: next.value.textLine.indexOf(fileImport.fileName) + fileImport.fileName.length,\n            })\n          );\n        } else {\n          requestBody.rawBody.push(next.value.textLine);\n        }\n\n        return {\n          nextParserLine: next.value.line,\n          symbols,\n        };\n      }\n    }\n  }\n  return false;\n}\n\nexport function getRequestBody(context: models.ParserContext) {\n  let result = context.data.request_body;\n  if (!result) {\n    result = {\n      rawBody: [],\n    };\n    context.data.request_body = result;\n  }\n  return result;\n}\n", "import { HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { getRequestBody } from './requestBodyHttpRegionParser';\n\nexport class MultipartMixedInterceptor\n  implements HookInterceptor<[models.getHttpLineGenerator, models.ParserContext], undefined>\n{\n  get id() {\n    return 'multipart/mixed';\n  }\n\n  async beforeLoop(\n    hookContext: HookTriggerContext<[models.getHttpLineGenerator, models.ParserContext], undefined>\n  ): Promise<boolean | undefined> {\n    const context = hookContext.args[1];\n\n    if (context.httpRegion.request && utils.isMimeTypeMultiPartMixed(context.httpRegion.request.contentType)) {\n      if (context.forceRegionDelimiter === undefined) {\n        context.forceRegionDelimiter = true;\n      } else if (context.forceRegionDelimiter) {\n        const boundary = context.httpRegion.request.contentType?.boundary || '';\n        const lastline = getRequestBody(context).rawBody.slice().pop();\n        if (utils.isString(lastline) && lastline.includes(`--${boundary}--`)) {\n          context.forceRegionDelimiter = false;\n        }\n      }\n    }\n\n    return true;\n  }\n}\n", "import { fileProvider, log } from '../../../io';\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function parseOutputRedirection(\n  getLineReader: models.getHttpLineGenerator,\n  { httpRegion }: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n\n  const next = lineReader.next();\n  if (!next.done) {\n    const textLine = next.value.textLine;\n\n    const match = /^\\s*>>(?<force>!)?\\s+(?<fileName>.+)\\s*$/u.exec(textLine);\n    if (match && match.groups?.fileName) {\n      const fileName = match.groups.fileName.trim();\n      const force = !!match.groups.force;\n\n      httpRegion.hooks.onResponse.addHook('outputRedirection', async (response, context) => {\n        try {\n          if (response.rawBody) {\n            const fileNameReplaced = utils.toString(\n              await utils.replaceVariables(fileName, models.VariableType.variable, context)\n            );\n\n            if (fileNameReplaced) {\n              const file = await getOutputRedirectionFileName(fileNameReplaced, force, context.httpFile.fileName);\n              if (file) {\n                await fileProvider.writeBuffer(file, response.rawBody);\n              } else {\n                log.debug(`file ${fileName} not found`);\n              }\n            } else {\n              log.debug(`file ${fileName} not found`);\n            }\n          }\n        } catch (err) {\n          log.error(`output redirection failed for ${fileName}`, err);\n        }\n      });\n      return {\n        nextParserLine: next.value.line,\n        symbols: [\n          new models.HttpSymbol({\n            name: `outputredirection`,\n            description: match.groups.filename,\n            kind: models.HttpSymbolKind.response,\n            startLine: next.value.line,\n            startOffset: 0,\n            endLine: next.value.line,\n            endOffset: next.value.textLine.length,\n            children: [\n              new models.HttpSymbol({\n                name: 'filename',\n                description: fileName,\n                kind: models.HttpSymbolKind.path,\n                startLine: next.value.line,\n                startOffset: next.value.textLine.indexOf(fileName),\n                endLine: next.value.line,\n                endOffset: next.value.textLine.indexOf(fileName) + fileName.length,\n              }),\n            ],\n          }),\n        ],\n      };\n    }\n  }\n  return false;\n}\n\nasync function getOutputRedirectionFileName(fileName: string, force: boolean, baseName: models.PathLike) {\n  let file = await toAbsoluteFileName(fileName, baseName);\n\n  if (!force) {\n    if (await fileProvider.exists(file)) {\n      const dotIndex = fileName.lastIndexOf('.');\n      if (dotIndex > 0 && dotIndex < fileName.length - 2) {\n        const path = fileName.slice(0, dotIndex);\n        const extension = fileName.slice(dotIndex + 1);\n        let index = 1;\n\n        file = await toAbsoluteFileName(`${path}-${index}.${extension}`, baseName);\n        while (await fileProvider.exists(file)) {\n          file = await toAbsoluteFileName(`${path}-${index++}.${extension}`, baseName);\n        }\n      }\n    }\n  }\n  return file;\n}\nasync function toAbsoluteFileName(fileName: string, baseName: models.PathLike) {\n  if (!(await fileProvider.isAbsolute(fileName))) {\n    const dirName = fileProvider.dirname(baseName);\n    if (dirName) {\n      return fileProvider.joinPath(dirName, fileName);\n    }\n  }\n  return fileName;\n}\n", "import { httpClientProvider } from '../../../io';\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { userSessionStore } from '../../../store';\n\nexport const parseHttpRequestLine = utils.parseRequestLineFactory({\n  protocol: 'HTTP',\n  methodRegex:\n    /^\\s*(?<method>GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS|CONNECT|TRACE|PROPFIND|PROPPATCH|MKCOL|COPY|MOVE|LOCK|UNLOCK|CHECKOUT|CHECKIN|REPORT|MERGE|MKACTIVITY|MKWORKSPACE|VERSION-CONTROL|BASELINE-CONTROL|MKCALENDAR|ACL|SEARCH|GRAPHQL)\\s+(?<url>.+?)$/u,\n  protocolRegex: /^\\s*(?<url>.+)\\s*$/iu,\n  requestClientFactory(request, context) {\n    if (httpClientProvider.createRequestClient) {\n      return httpClientProvider.createRequestClient(request, context);\n    }\n    throw new Error('Missing Http Client Provider');\n  },\n  modifyRequest(request) {\n    if (request.method === 'HTTP') {\n      request.method = 'GET';\n    }\n    if (utils.isHttpRequest(request)) {\n      parseProtocol(request);\n    }\n  },\n  sessionStore: userSessionStore,\n});\n\nfunction parseProtocol(request: models.HttpRequest) {\n  if (request.url) {\n    const match = /(?<url>.*)\\s+HTTP\\/(?<version>(\\S+))/u.exec(request.url);\n    if (match?.groups?.version && match.groups.url) {\n      request.url = match.groups.url.trim();\n      if (['1.1', '1.0'].indexOf(match.groups.version) < 0) {\n        if (!request.options) {\n          request.options = {};\n        }\n        request.options.http2 = true;\n      }\n    }\n  }\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function parseResponse(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  return utils.parseInlineResponse(\n    getLineReader,\n    context,\n    /^\\s*HTTP\\/(?<httpVersion>\\S+)\\s*(?<statusCode>[1-5][0-9][0-9])\\s*(-)?\\s*(?<statusMessage>.*)$/u\n  );\n}\n", "import {\n  getHttpLineGenerator,\n  HttpRegionParserResult,\n  HttpSymbol,\n  HttpSymbolKind,\n  ParserContext,\n} from '../../../models';\n\nexport async function parseResponseRef(\n  getLineReader: getHttpLineGenerator,\n  { httpRegion }: ParserContext\n): Promise<HttpRegionParserResult> {\n  const lineReader = getLineReader();\n\n  const next = lineReader.next();\n  if (!next.done) {\n    const textLine = next.value.textLine;\n\n    const match = /^\\s*<>\\s*(?<fileName>.+?)\\s*$/u.exec(textLine);\n    if (match && match.groups?.fileName) {\n      if (!httpRegion.responseRefs) {\n        httpRegion.responseRefs = [];\n      }\n\n      const filename = match.groups.fileName;\n      httpRegion.responseRefs.push(filename);\n      return {\n        nextParserLine: next.value.line,\n        symbols: [\n          new HttpSymbol({\n            name: 'responseRef',\n            description: match.groups.filename,\n            kind: HttpSymbolKind.response,\n            startLine: next.value.line,\n            startOffset: 0,\n            endLine: next.value.line,\n            endOffset: next.value.textLine.length,\n            children: [\n              new HttpSymbol({\n                name: 'filename',\n                description: filename,\n                kind: HttpSymbolKind.path,\n                startLine: next.value.line,\n                startOffset: textLine.indexOf(filename),\n                endLine: next.value.line,\n                endOffset: textLine.indexOf(filename) + filename.length,\n              }),\n            ],\n          }),\n        ],\n      };\n    }\n  }\n  return false;\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function parseVariable(\n  getLineReader: models.getHttpLineGenerator,\n  { httpRegion }: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n  const next = lineReader.next();\n  if (!next.done) {\n    const textLine = next.value.textLine;\n\n    const match = /^\\s*@(?<useGlobal>global\\.)?(?<key>[^\\s=:]*)\\s*(?<lazyIndicator>:?)=*\\s*\"?(?<value>.*)\"?\\s*$/u.exec(\n      textLine\n    );\n\n    if (match && match.groups && match.groups.key && match.groups.value) {\n      const key = match.groups.key;\n      const isLazy = !!match.groups.lazyIndicator;\n      const useGlobal = !!match.groups.useGlobal;\n      const value = match.groups.value;\n      httpRegion.hooks.execute.addHook(`variable_${key}`, async context => {\n        let result: unknown = value;\n        if (isLazy) {\n          context.options.lazyVariables = true;\n        } else {\n          result = await utils.replaceVariables(value, models.VariableType.variable, context);\n        }\n        const globalVar = context.variables.$global;\n        if (useGlobal && globalVar && typeof globalVar === 'object') {\n          Object.assign(globalVar, { [key]: result });\n        } else {\n          utils.setVariableInContext(\n            {\n              [key]: result,\n            },\n            context\n          );\n        }\n        return true;\n      });\n\n      return {\n        nextParserLine: next.value.line,\n        symbols: [\n          new models.HttpSymbol({\n            name: match.groups.key,\n            description: match.groups.value,\n            kind: models.HttpSymbolKind.variableDefinition,\n            startLine: next.value.line,\n            startOffset: 0,\n            endLine: next.value.line,\n            endOffset: next.value.textLine.length,\n            children: [\n              new models.HttpSymbol({\n                name: match.groups.key,\n                description: 'key',\n                kind: models.HttpSymbolKind.key,\n                startLine: next.value.line,\n                startOffset: next.value.textLine.indexOf(match.groups.key),\n                endLine: next.value.line,\n                endOffset: next.value.textLine.indexOf(match.groups.key) + match.groups.key.length,\n              }),\n              new models.HttpSymbol({\n                name: match.groups.value,\n                description: 'value',\n                kind: models.HttpSymbolKind.value,\n                startLine: next.value.line,\n                startOffset: next.value.textLine.indexOf(match.groups.value),\n                endLine: next.value.line,\n                endOffset: next.value.textLine.indexOf(match.groups.value) + match.groups.value.length,\n              }),\n            ],\n          }),\n        ],\n      };\n    }\n  }\n  return false;\n}\n", "import { HookTriggerContext } from 'hookpoint';\n\nimport { log } from '../../../io';\nimport * as models from '../../../models';\n\nexport function registerCancelExecutionInterceptor(parserContext: models.ParserContext) {\n  parserContext.httpRegion.hooks.execute.addInterceptor({\n    id: 'cancel',\n    beforeLoop: async function checkUserCancellation(\n      hookContext: HookTriggerContext<[models.ProcessorContext], boolean>\n    ) {\n      const context = hookContext.args[0];\n      if (context.progress?.isCanceled?.()) {\n        log.debug('process canceled by user');\n        return false;\n      }\n      return true;\n    },\n  });\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function attachDefaultHeaders(request: models.Request, context: models.ProcessorContext): Promise<void> {\n  if (request && context.config?.defaultHeaders) {\n    utils.report(context, 'set default request headers');\n    const defaultHeaders = context.config.defaultHeaders;\n    if (!request.headers) {\n      request.headers = {\n        ...defaultHeaders,\n      };\n    } else {\n      for (const [key, value] of Object.entries(defaultHeaders)) {\n        if (!utils.getHeader(request.headers, key)) {\n          request.headers[key] = value;\n        }\n      }\n    }\n  }\n}\n", "import encodeUrl from 'encodeurl';\n\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function encodeRequestBody(request: models.Request): Promise<void> {\n  if (request.body && utils.isString(request.body) && utils.isMimeTypeFormUrlEncoded(request.contentType)) {\n    request.body = encodeUrl(request.body);\n  }\n}\n", "import { HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\n\nexport const excludeProxyInterceptor = {\n  id: 'excludeProxy',\n  afterLoop: async function excludeProxy(\n    hookContext: HookTriggerContext<[models.Request, models.ProcessorContext], void>\n  ): Promise<boolean> {\n    const [request, context] = hookContext.args;\n    if (!request.proxy) {\n      request.proxy = context.config?.proxy;\n    }\n\n    if (request.proxy) {\n      if (context.httpRegion.metaData.noProxy) {\n        delete request.proxy;\n      } else if (context.config?.proxyExcludeList) {\n        if (context.config.proxyExcludeList.some(proxyExclude => request.url.startsWith(proxyExclude))) {\n          delete request.proxy;\n        }\n      }\n    }\n    return true;\n  },\n};\n", "import { HookTriggerContext } from 'hookpoint';\n\nimport * as io from '../../../io';\nimport * as models from '../../../models';\n\nexport const isTrustedInterceptor = {\n  id: 'isTrusted',\n  afterLoop: async function isTrusted(\n    hookContext: HookTriggerContext<[models.Request, models.ProcessorContext], void>\n  ): Promise<boolean> {\n    if (!io.userInteractionProvider.isTrusted()) {\n      const [request] = hookContext.args;\n      return await io.userInteractionProvider.showNote(\n        `Is call to ${request.method} ${request.url} allowed, because workspace is not trusted.`\n      );\n    }\n    return true;\n  },\n};\n", "import { HookCancel } from 'hookpoint';\n\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function requestVariableReplacer(\n  request: models.Request,\n  context: models.ProcessorContext\n): Promise<void | typeof HookCancel> {\n  utils.report(context, 'replace variables in request');\n  if (request.url) {\n    const result = (await utils.replaceVariables(request.url, models.VariableType.url, context)) || request.url;\n    if (result === HookCancel) {\n      return HookCancel;\n    }\n    if (utils.isString(result)) {\n      request.url = result;\n    }\n  }\n  if ((await replaceVariablesInBody(request, context)) === false) {\n    return HookCancel;\n  }\n  if ((await replaceVariablesInHeader(request, context)) === false) {\n    return HookCancel;\n  }\n  return undefined;\n}\n\nexport async function replaceVariablesInBody(\n  request: { body?: models.RequestBody },\n  context: models.ProcessorContext\n): Promise<boolean> {\n  if (request.body) {\n    if (utils.isString(request.body)) {\n      const result = await utils.replaceVariables(request.body, models.VariableType.body, context);\n      if (result === HookCancel) {\n        return false;\n      }\n      if (utils.isString(result) || Buffer.isBuffer(result)) {\n        request.body = result;\n      } else {\n        request.body = utils.toString(result);\n      }\n    } else if (Array.isArray(request.body)) {\n      const replacedBody: Array<models.HttpRequestBodyLine> = [];\n      for (const obj of request.body) {\n        if (utils.isString(obj)) {\n          const result = await utils.replaceVariables(obj, models.VariableType.body, context);\n          if (result === HookCancel) {\n            return false;\n          }\n          if (utils.isString(result)) {\n            replacedBody.push(result);\n          }\n        } else {\n          replacedBody.push(obj);\n        }\n      }\n      request.body = replacedBody;\n    }\n  }\n  return true;\n}\n\nasync function replaceVariablesInHeader(request: models.Request, context: models.ProcessorContext): Promise<boolean> {\n  if (request.headers) {\n    for (const [headerName, headerValue] of Object.entries(request.headers)) {\n      if (Array.isArray(headerValue)) {\n        const result = [];\n        for (const headerVal of headerValue) {\n          const value = await utils.replaceVariables(headerVal, headerName, context);\n          if (value === HookCancel) {\n            return false;\n          }\n          result.push(value);\n        }\n        request.headers[headerName] = result;\n      } else {\n        const value = await utils.replaceVariables(headerValue, headerName, context);\n        if (value === HookCancel) {\n          return false;\n        }\n        request.headers[headerName] = value;\n      }\n    }\n  }\n  return true;\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function resolveRequestBody(request: models.Request, context: models.ProcessorContext): Promise<void> {\n  if (request.body && Array.isArray(request.body)) {\n    const buffers: Array<Buffer | string> = [];\n    for (const obj of request.body) {\n      if (utils.isString(obj)) {\n        buffers.push(obj);\n      } else if (Buffer.isBuffer(obj)) {\n        buffers.push(obj);\n      } else {\n        const result = await obj(context);\n        if (result) {\n          buffers.push(result);\n        }\n      }\n    }\n    request.body = buffers;\n  }\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function setDefaultHttpyacHeaders(request: models.Request): Promise<void> {\n  if (request) {\n    const httpyacHeaders = {\n      Accept: '*/*',\n      'User-Agent': 'httpyac',\n    };\n    if (!request.headers) {\n      request.headers = httpyacHeaders;\n    } else {\n      for (const [key, value] of Object.entries(httpyacHeaders)) {\n        if (!utils.getHeader(request.headers, key)) {\n          request.headers[key] = value;\n        }\n      }\n    }\n  }\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function setEnvRequestOptions(\n  request: models.Request,\n  { variables }: models.ProcessorContext\n): Promise<void> {\n  await setEnvRejectUnauthorized(request, variables);\n  await setEnvNoRedirect(request, variables);\n  await setEnvProxy(request, variables);\n  await setEnvRequestTimeout(request, variables);\n}\n\nasync function setEnvRejectUnauthorized(request: models.Request, variables: models.Variables): Promise<void> {\n  if (request && variables) {\n    if (typeof variables.request_rejectUnauthorized !== 'undefined') {\n      request.noRejectUnauthorized = !utils.toBoolean(variables.request_rejectUnauthorized);\n    }\n  }\n}\n\nasync function setEnvNoRedirect(request: models.Request, variables: models.Variables): Promise<void> {\n  if (request && variables) {\n    if (typeof variables.request_noRedirect !== 'undefined') {\n      request.noRedirect = utils.toBoolean(variables.request_noRedirect);\n    }\n  }\n}\n\nasync function setEnvProxy(request: models.Request, variables: models.Variables): Promise<void> {\n  if (utils.isString(variables?.request_proxy)) {\n    request.proxy = variables.request_proxy;\n  }\n}\n\nasync function setEnvRequestTimeout(request: models.Request, variables: models.Variables): Promise<void> {\n  const timeout = utils.toNumber(variables?.request_timeout);\n  if (timeout !== undefined) {\n    request.timeout = timeout;\n  }\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function transformRequestBodyToBuffer(\n  request: models.Request,\n  context: models.ProcessorContext\n): Promise<void> {\n  if (request.body) {\n    request.body = await transformToBufferOrString(request.body, context);\n  }\n}\n\nexport async function transformToBufferOrString(\n  body: models.RequestBody,\n  context: models.ProcessorContext\n): Promise<string | Buffer> {\n  if (utils.isString(body)) {\n    return body;\n  }\n  if (Buffer.isBuffer(body)) {\n    return body;\n  }\n  return await normalizeBody(body, context);\n}\n\nexport async function normalizeBody(\n  body: Array<models.HttpRequestBodyLine>,\n  context: models.ProcessorContext\n): Promise<Buffer | string> {\n  const buffers: Array<Buffer | string> = [];\n  for (const obj of body) {\n    if (utils.isString(obj)) {\n      buffers.push(obj);\n    } else if (Buffer.isBuffer(obj)) {\n      buffers.push(obj);\n    } else {\n      const result = await obj(context);\n      if (result) {\n        buffers.push(result);\n      }\n    }\n  }\n  if (buffers.some(obj => Buffer.isBuffer(obj))) {\n    return Buffer.concat(buffers.map(obj => (Buffer.isBuffer(obj) ? obj : Buffer.from(obj))));\n  }\n  return buffers.join('');\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function transfromMultilineFormUrlEncoded(request: models.Request): Promise<void> {\n  if (request.body && utils.isString(request.body) && utils.isMimeTypeFormUrlEncoded(request.contentType)) {\n    const lines = utils.toMultiLineArray(request.body);\n    if (lines.length > 0) {\n      const result = [];\n\n      for (const line of lines) {\n        result.push(\n          line\n            .split('=')\n            .map(t => t.trim())\n            .join('=')\n        );\n      }\n      request.body = result.join('');\n    }\n  }\n}\n", "import { fileProvider } from '../../../io';\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { replaceVariablesInBody, transformToBufferOrString } from '../request';\n\nexport async function closeRequestBody(context: models.ParserContext): Promise<void> {\n  const requestBody = getAndRemoveRequestBody(context);\n  if (context.httpRegion.request && !!requestBody) {\n    const request = context.httpRegion.request;\n    removeTrailingEmptyLines(requestBody.rawBody);\n\n    const requestBodyLines = await toHttpRequestBodyLineArray(requestBody.rawBody);\n    if (requestBodyLines.length > 0) {\n      const requestContents = splitRequestContents(requestBodyLines, request.contentType);\n      if (requestContents.length > 0 && !requestContents[0].wait) {\n        request.body = requestContents.shift()?.body;\n      }\n      if (requestContents.length > 0) {\n        createStreamingBodySendFactory(requestContents, context);\n      }\n    }\n  }\n}\n\nfunction transformLinesToBody(\n  requestBodyLines: models.HttpRequestBodyLine[],\n  contentType: models.ContentType | undefined\n) {\n  if (utils.isMimeTypeFormUrlEncoded(contentType)) {\n    return formUrlEncodedJoin(requestBodyLines);\n  }\n  addLineForNewlineDelimitedJSON(requestBodyLines, contentType);\n  return concatStrings(requestBodyLines, contentType);\n}\n\nfunction concatStrings(requestBodyLines: models.HttpRequestBodyLine[], contentType: models.ContentType | undefined) {\n  const body: Array<models.HttpRequestBodyLine> = [];\n  const strings: Array<string> = [];\n  const lineEnding = utils.isMimeTypeMultiPartFormData(contentType) ? '\\r\\n' : fileProvider.EOL;\n\n  for (const line of requestBodyLines) {\n    if (utils.isString(line)) {\n      strings.push(line);\n    } else {\n      if (strings.length > 0) {\n        strings.push('');\n        body.push(strings.join(lineEnding));\n        strings.length = 0;\n      }\n      body.push(line);\n      strings.push('');\n    }\n  }\n\n  if (strings.length > 0 && body.length === 0) {\n    return strings.join(lineEnding);\n  }\n  if (strings.length > 0) {\n    body.push(strings.join(lineEnding));\n  }\n  return body;\n}\n\nfunction getAndRemoveRequestBody(context: models.ParserContext) {\n  const result = context.data.request_body;\n  if (result) {\n    delete context.data.request_body;\n  }\n  return result;\n}\n\nfunction addLineForNewlineDelimitedJSON(\n  requestBodyLines: models.HttpRequestBodyLine[],\n  contentType: models.ContentType | undefined\n) {\n  if (requestBodyLines.every(obj => utils.isString(obj)) && utils.isMimeTypeNewlineDelimitedJSON(contentType)) {\n    requestBodyLines.push('');\n  }\n}\n\nfunction removeTrailingEmptyLines(lines: Array<unknown>): void {\n  while (lines.length > 0 && utils.isStringEmpty(lines[lines.length - 1])) {\n    lines.pop();\n  }\n  if (lines.length > 0) {\n    const lastLine = lines[lines.length - 1];\n    if (utils.isString(lastLine)) {\n      if (/\\s*<--->\\s*/u.test(lastLine)) {\n        lines.pop();\n      }\n    }\n  }\n}\n\nasync function toHttpRequestBodyLineArray(rawBody: Array<string | models.RequestBodyImport>) {\n  const result: Array<models.HttpRequestBodyLine> = [];\n  for (const line of rawBody) {\n    if (utils.isString(line)) {\n      result.push(line);\n    } else {\n      const { injectVariables, fileName } = line;\n      const forceInjectVariables = (file: string, context: models.ProcessorContext) => {\n        if (context.httpRegion.metaData.injectVariables) {\n          return true;\n        }\n        if (context.config?.requestBodyInjectVariablesExtensions) {\n          const extname = utils.extensionName(file);\n          if (extname) {\n            return context.config.requestBodyInjectVariablesExtensions.indexOf(extname) >= 0;\n          }\n        }\n        return false;\n      };\n      result.push(\n        async (context: models.ProcessorContext) =>\n          await utils.replaceFilePath(fileName, context, async (path: models.PathLike) => {\n            if (injectVariables || forceInjectVariables(line.fileName, context)) {\n              return await fileProvider.readFile(path, line.encoding);\n            }\n            return fileProvider.readBuffer(path);\n          })\n      );\n    }\n  }\n  return result;\n}\n\nfunction formUrlEncodedJoin(body: Array<models.HttpRequestBodyLine>): string {\n  const result = body.reduce((previousValue, currentValue, currentIndex) => {\n    let prev = previousValue;\n    if (utils.isString(currentValue)) {\n      prev += `${currentIndex === 0 || currentValue.startsWith('&') ? '' : fileProvider.EOL}${currentValue}`;\n    }\n    return prev;\n  }, '');\n  if (utils.isString(result)) {\n    return result;\n  }\n  return '';\n}\n\nfunction splitRequestContents(\n  requestBodyLines: Array<models.HttpRequestBodyLine>,\n  contentType: models.ContentType | undefined\n) {\n  const store: Array<models.HttpRequestBodyLine> = [];\n  const requestContents: Array<RequestContent> = [];\n  let wait = false;\n  for (const line of requestBodyLines) {\n    const match = separatorMatch(line);\n    if (match) {\n      requestContents.push({\n        wait,\n        body: transformLinesToBody(store, contentType),\n      });\n      wait = match.waitForServer;\n      store.length = 0;\n    } else {\n      store.push(line);\n    }\n  }\n  if (store.length > 0) {\n    requestContents.push({\n      wait,\n      body: transformLinesToBody(store, contentType),\n    });\n  }\n  return requestContents;\n}\n\ntype RequestContent = {\n  wait: boolean;\n  body?: string | Array<models.HttpRequestBodyLine>;\n};\n\nfunction separatorMatch(line: models.HttpRequestBodyLine) {\n  if (utils.isString(line)) {\n    const separatorMatch = /\\s*={3}\\s*(?<wait>wait-for-server)?\\s*$/u.exec(line);\n    if (separatorMatch) {\n      return {\n        waitForServer: !!separatorMatch?.groups?.wait,\n      };\n    }\n  }\n  return undefined;\n}\n\nfunction createStreamingBodySendFactory(streamingContents: Array<RequestContent>, context: models.ParserContext) {\n  context.httpRegion.hooks.onStreaming.addHook('streaming_body', async context => {\n    if (context.requestClient) {\n      return new Promise<void>(resolve => {\n        sendStreamingContents(streamingContents, context, resolve);\n      });\n    }\n    return undefined;\n  });\n}\n\nasync function sendStreamingContents(\n  streamingContents: Array<RequestContent>,\n  context: models.ProcessorContext,\n  resolve: () => void\n) {\n  let messageWaitCount = 0;\n  for (const streamingContent of streamingContents) {\n    const isLast = streamingContents.indexOf(streamingContent) === streamingContents.length - 1;\n    if (streamingContent.wait) {\n      messageWaitCount++;\n    }\n    if (messageWaitCount === 0) {\n      await sendWithRequestClient(streamingContent, context);\n      if (isLast) {\n        resolve();\n      }\n    } else {\n      let count = 0;\n      const messageCount = messageWaitCount;\n      context.requestClient?.addEventListener('message', async () => {\n        if (++count === messageCount) {\n          await sendWithRequestClient(streamingContent, context);\n          if (isLast) {\n            resolve();\n          }\n        }\n      });\n    }\n  }\n}\n\nasync function sendWithRequestClient(streamingContent: RequestContent, context: models.ProcessorContext) {\n  await replaceVariablesInBody(streamingContent, context);\n  if (streamingContent.body) {\n    const body = await transformToBufferOrString(streamingContent.body, context);\n    if (body) {\n      await context.requestClient?.send(body);\n    }\n  }\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function closeResponseBody(context: models.ParserContext): Promise<void> {\n  if (context.data.httpResponseSymbol) {\n    if (context.httpRegion.response && context.data.httpResponseSymbol.body.length > 0) {\n      const response = context.httpRegion.response;\n      const body = utils.toMultiLineString(context.data.httpResponseSymbol.body);\n      response.body = body;\n      response.rawBody = Buffer.from(body);\n      if (response.headers) {\n        response.contentType = utils.parseContentType(response.headers);\n      }\n      const symbol = context.data.httpResponseSymbol.symbol;\n      if (symbol.children) {\n        const lastLine = context.data.httpResponseSymbol.body.at(-1);\n        symbol.children.push(\n          new models.HttpSymbol({\n            name: 'response body',\n            description: 'response body',\n            kind: models.HttpSymbolKind.response,\n            startLine: symbol.endLine - context.data.httpResponseSymbol.body.length + 1,\n            startOffset: 0,\n            endLine: symbol.endLine,\n            endOffset: lastLine?.length || 0,\n          })\n        );\n      }\n    }\n\n    delete context.data.httpResponseSymbol;\n  }\n}\n", "import { HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\nimport { isString } from '../../../utils';\n\nexport const escapeVariableInterceptor = {\n  id: 'escapeVariable',\n  afterLoop: async function escapeVariable(\n    hookContext: HookTriggerContext<[unknown, string, models.ProcessorContext], unknown>\n  ): Promise<boolean> {\n    const [text] = hookContext.args;\n    if (isString(text)) {\n      const escapeRegex = /(?:\\\\\\{){2}([^}]+?)(?:\\\\\\}){2}/gu;\n      let match: RegExpExecArray | null;\n      let result = text;\n      while (isString(result) && (match = escapeRegex.exec(text)) !== null) {\n        const [searchValue, variable] = match;\n        result = result.replace(searchValue, () => `{{${variable}}}`);\n      }\n      if (result !== text) {\n        hookContext.results.push(result);\n      }\n    }\n    return true;\n  },\n};\n", "import { fileProvider } from '../../../io';\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function replaceFileImport(\n  text: unknown,\n  type: models.VariableType | string,\n  context: models.ProcessorContext\n): Promise<unknown> {\n  return utils.parseHandlebarsString(text, async (variable: string) => {\n    const fileImport = utils.parseFileImport(variable);\n    if (fileImport) {\n      let fileContent: unknown = await utils.replaceFilePath(\n        fileImport.fileName,\n        context,\n        async (path: models.PathLike) => {\n          if (fileImport.injectVariables || fileImport.encoding) {\n            return await fileProvider.readFile(path, fileImport.encoding);\n          }\n          return fileProvider.readBuffer(path);\n        }\n      );\n      if (fileImport.injectVariables) {\n        fileContent = await utils.replaceVariables(fileContent, type, context);\n      }\n      return fileContent;\n    }\n    return undefined;\n  });\n}\n", "import { ProcessorContext, VariableType } from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function hostVariableReplacer(\n  text: unknown,\n  type: VariableType | string,\n  { variables, request }: ProcessorContext\n): Promise<unknown> {\n  if (utils.isString(text) && VariableType.url === type) {\n    if (text.startsWith('/')) {\n      const host = utils.getHeader(request?.headers, 'Host');\n      if (utils.isString(host)) {\n        const [, port] = host.toString().split(':');\n        const scheme = port === '443' || port === '8443' ? 'https' : 'http';\n        return `${scheme}://${host}${text}`;\n      }\n      if (variables.host) {\n        return `${variables.host}${text}`;\n      }\n    }\n  }\n  return text;\n}\n", "import { ProcessorContext, VariableType } from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function replaceVariableNames(\n  text: unknown,\n  _type: VariableType | string,\n  context: ProcessorContext\n): Promise<unknown> {\n  return utils.parseHandlebarsString(text, async (variable: string) => context.variables[variable]);\n}\n", "import dayjs, { ManipulateType } from 'dayjs';\nimport utc from 'dayjs/plugin/utc';\nimport { v4 as uuid } from 'uuid';\n\nimport { ProcessorContext, VariableType } from '../../../models';\nimport * as utils from '../../../utils';\n\ndayjs.extend(utc);\n\nexport async function restClientVariableReplacer(\n  text: unknown,\n  _type: VariableType | string,\n  { variables }: ProcessorContext\n): Promise<unknown> {\n  return utils.parseHandlebarsString(text, async (variable: string) => {\n    const trimmedVariable = variable.trim();\n    if (trimmedVariable === '$guid') {\n      return uuid();\n    }\n    if (trimmedVariable.startsWith('$randomInt')) {\n      const valMatch = /^\\$randomInt\\s*(?<min>-?\\d+)?\\s*(?<max>-?\\d+)?\\s*$/u.exec(trimmedVariable);\n      if (valMatch && valMatch.groups?.min && valMatch.groups?.max) {\n        let min = utils.toNumber(valMatch.groups?.min) ?? 0;\n        let max = utils.toNumber(valMatch.groups?.max) ?? 100;\n        if (!Number.isNaN(min) && !Number.isNaN(max)) {\n          if (min > max) {\n            const temp = max;\n            max = min;\n            min = temp;\n          }\n          return `${Math.floor(Math.random() * (max - min)) + min}`;\n        }\n      }\n    } else if (trimmedVariable.startsWith('$timestamp')) {\n      const valMatch = /^\\$timestamp(?:\\s(?<offset>-?\\d+)\\s(?<option>y|Q|M|w|d|h|m|s|ms))?/u.exec(trimmedVariable);\n      if (valMatch) {\n        dayjs.extend(utc);\n\n        let date = dayjs.utc();\n        if (valMatch.groups?.offset && valMatch.groups?.option) {\n          date = date.add(Number(valMatch.groups.offset), valMatch.groups.option as ManipulateType);\n        }\n        return `${date.unix()}`;\n      }\n    } else if (trimmedVariable.startsWith('$datetime')) {\n      const valMatch =\n        /^\\$datetime\\s(?<type>rfc1123|iso8601|'.+'|\".+\")(?:\\s(?<offset>-?\\d+)\\s(?<option>y|Q|M|w|d|h|m|s|ms))?/u.exec(\n          trimmedVariable\n        );\n      if (valMatch?.groups?.type) {\n        let date = dayjs.utc();\n        if (valMatch.groups?.offset && valMatch.groups?.option) {\n          date = date.add(Number(valMatch.groups.offset), valMatch.groups.option as ManipulateType);\n        }\n\n        if (valMatch.groups.type === 'rfc1123') {\n          return date.toDate().toUTCString();\n        }\n        if (valMatch.groups.type === 'iso8601') {\n          return date.toISOString();\n        }\n        return date.format(valMatch.groups.type.slice(1, valMatch.groups.type.length - 1));\n      }\n    } else if (trimmedVariable.startsWith('$localDatetime')) {\n      const valMatch =\n        /^\\$localDatetime\\s(?<type>rfc1123|iso8601|'.+'|\".+\")(?:\\s(?<offset>-?\\d+)\\s(?<option>y|Q|M|w|d|h|m|s|ms))?/u.exec(\n          trimmedVariable\n        );\n      if (valMatch?.groups?.type) {\n        let date = dayjs.utc().local();\n        if (valMatch.groups?.offset && valMatch.groups?.option) {\n          date = date.add(Number(valMatch.groups.offset), valMatch.groups.option as ManipulateType);\n        }\n\n        if (valMatch.groups.type === 'rfc1123') {\n          return date.locale('en').format('ddd, DD MMM YYYY HH:mm:ss ZZ');\n        }\n        if (valMatch.groups.type === 'iso8601') {\n          return date.format();\n        }\n        return date.format(valMatch.groups.type.slice(1, valMatch.groups.type.length - 1));\n      }\n    } else if (trimmedVariable.startsWith('$processEnv')) {\n      return process.env[trimmedVariable.slice('$processEnv'.length).trim()] || '';\n    } else if (trimmedVariable.startsWith('$dotenv')) {\n      return variables[trimmedVariable.slice('$dotenv'.length).trim()] || '';\n    }\n    return undefined;\n  });\n}\n", "import { HookCancel } from 'hookpoint';\n\nimport { userInteractionProvider } from '../../../io';\nimport { ProcessorContext, UserSession } from '../../../models';\nimport { userSessionStore } from '../../../store';\nimport * as utils from '../../../utils';\n\ninterface InputSession extends UserSession {\n  answer?: string;\n}\n\nexport async function showInputBoxVariableReplacer(\n  text: unknown,\n  _type: string,\n  { variables }: ProcessorContext\n): Promise<unknown> {\n  return utils.parseHandlebarsString(text, async (variable: string) => {\n    const inputRegex =\n      /^\\$(?<type>(prompt|input|password))(?<askonce>-askonce)?\\s*(?<placeholder>[^$]*)(\\$value:\\s*(?<value>.*))?\\s*$/u;\n    const matchInput = inputRegex.exec(variable);\n\n    if (matchInput?.groups?.placeholder) {\n      const placeholder = matchInput.groups.placeholder.trim();\n      const inputType = matchInput.groups.type;\n\n      const id = `input_${placeholder}`;\n\n      const session = userSessionStore.getUserSession<InputSession>(id);\n\n      if (matchInput.groups.askonce) {\n        if (variables?.[placeholder] !== undefined) {\n          return variables[placeholder];\n        }\n        if (session?.answer) {\n          return session.answer;\n        }\n      }\n\n      const isPassword = inputType === 'password';\n      const answer = await userInteractionProvider.showInputPrompt(\n        placeholder,\n        session?.answer || matchInput.groups.value,\n        isPassword\n      );\n      if (answer !== undefined) {\n        userSessionStore.setUserSession({\n          id,\n          title: isPassword ? placeholder : `${placeholder}=${answer}`,\n          description: `Cache for ${inputType}`,\n          type: 'input',\n          details: {\n            placeholder,\n            inputType,\n            answer: isPassword ? undefined : answer,\n          },\n          answer,\n        });\n        return answer;\n      }\n      return HookCancel;\n    }\n    return undefined;\n  });\n}\n", "import { HookCancel } from 'hookpoint';\n\nimport { javascriptProvider, log, userInteractionProvider } from '../../../io';\nimport { ProcessorContext, UserSession } from '../../../models';\nimport { userSessionStore } from '../../../store';\nimport * as utils from '../../../utils';\n\ninterface PickSession extends UserSession {\n  answer?: string;\n}\n\nexport async function showQuickpickVariableReplacer(\n  text: unknown,\n  _type: string,\n  context: ProcessorContext\n): Promise<unknown> {\n  return utils.parseHandlebarsString(text, async (variable: string) => {\n    const matchInput = /^\\$pick(?<save>-askonce)?\\s*(?<placeholder>[^$]*)(\\$value:\\s*(?<value>.*))\\s*$/u.exec(variable);\n    if (matchInput?.groups?.placeholder && matchInput?.groups?.value) {\n      const placeholder = matchInput.groups.placeholder.trim();\n      const id = `input_${placeholder}`;\n\n      const session = userSessionStore.getUserSession<PickSession>(id);\n\n      if (session?.answer && matchInput.groups.save) {\n        return session.answer;\n      }\n\n      const items = await getArray(matchInput.groups.value, context);\n      const answer = await userInteractionProvider.showListPrompt(placeholder, items);\n      if (answer !== undefined) {\n        userSessionStore.setUserSession({\n          id,\n          title: `${placeholder}=${answer}`,\n          description: `Cache for $pick`,\n          type: 'input',\n          details: {\n            placeholder,\n            answer,\n          },\n          answer,\n        });\n        return answer;\n      }\n      return HookCancel;\n    }\n    return undefined;\n  });\n}\n\nasync function getArray(value: string, context: ProcessorContext): Promise<Array<string>> {\n  const result = value.split(',');\n\n  if (result.length === 1) {\n    try {\n      const jsResult = await javascriptProvider.evalExpression(value, context);\n      if (Array.isArray(jsResult)) {\n        return jsResult;\n      }\n    } catch (err) {\n      log.trace('error in quickpick', err);\n    }\n  }\n\n  return result;\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport function handleNameMetaData(response: models.HttpResponse, context: models.ProcessorContext) {\n  const { httpRegion } = context;\n  if (utils.isString(httpRegion.metaData.name)) {\n    const name = httpRegion.metaData.name\n      .trim()\n      .replace(/\\s/gu, '-')\n      .replace(/-./gu, value => value[1].toUpperCase());\n    utils.setVariableInContext(\n      { [name]: response.parsedBody || response.body, [`${name}Response`]: response },\n      context\n    );\n  }\n}\n", "import { HookTriggerContext } from 'hookpoint';\n\nimport * as io from '../../../io';\nimport * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport const jsonResponseInterceptor = {\n  id: 'jsonResponseBody',\n  beforeLoop: async function addXmlResponse(\n    hookContext: HookTriggerContext<[models.HttpResponse, models.ProcessorContext], void>\n  ): Promise<boolean> {\n    const [response] = hookContext.args;\n    if (response) {\n      if (utils.isMimeTypeJSON(response.contentType) && utils.isString(response.body) && response.body.length > 0) {\n        try {\n          if (!response.parsedBody) {\n            response.parsedBody = JSON.parse(response.body);\n          }\n          if (!response.prettyPrintBody) {\n            response.prettyPrintBody = utils.stringifySafe(response.parsedBody, 2);\n          }\n        } catch (err) {\n          io.log.warn('json parse error', response.body, err);\n        }\n      }\n    }\n    return true;\n  },\n};\n", "import * as models from '../../../models';\nimport { userSessionStore } from '../../../store';\nimport { shrinkCloneResponse } from '../../../utils';\n\nexport function setLastResponseInVariables(response: models.HttpResponse, context: models.ProcessorContext) {\n  const cloneResponse = shrinkCloneResponse(response);\n  userSessionStore.setUserSession({\n    id: 'last_response',\n    title: 'last response',\n    description: `response of ${context.httpRegion.symbol.name}`,\n    details: {},\n    type: 'LAST_RESPONSE',\n    response: cloneResponse,\n  });\n  context.variables.response = response;\n}\n", "import './completionItemProvider';\n\nimport * as models from '../../models';\nimport * as environments from './environments';\nimport * as execute from './execute';\nimport * as metaData from './metaData';\nimport * as parse from './parse';\nimport * as parseEnd from './parseEnd';\nimport * as replacer from './replacer';\nimport * as request from './request';\nimport * as response from './response';\n\nexport function registerCorePlugins(api: models.HttpyacHooksApi) {\n  initOnRequestHook(api);\n  initOnResponseHook(api);\n  initParseHook(api);\n  initExecuteInterceptor(api);\n  initParseMetData(api);\n  initParseEndHook(api);\n\n  initProvideEnvironmentsHook(api);\n  initReplaceVariableHook(api);\n}\n\nfunction initOnRequestHook(api: models.HttpyacHooksApi) {\n  api.hooks.onRequest.addHook('attachDefaultHeaders', request.attachDefaultHeaders);\n  api.hooks.onRequest.addHook('setEnvRequestOptions', request.setEnvRequestOptions);\n  api.hooks.onRequest.addHook('resolveRequestBody', request.resolveRequestBody);\n  api.hooks.onRequest.addHook('setDefaultHttpyacHeaders', request.setDefaultHttpyacHeaders);\n  api.hooks.onRequest.addHook('requestVariableReplacer', request.requestVariableReplacer);\n  api.hooks.onRequest.addHook('transformRequestBody', request.transformRequestBodyToBuffer);\n  api.hooks.onRequest.addHook('transfromMultilineFormUrlEncoded', request.transfromMultilineFormUrlEncoded);\n  api.hooks.onRequest.addHook('encodeRequestBody', request.encodeRequestBody);\n\n  api.hooks.onRequest.addInterceptor(request.isTrustedInterceptor);\n  api.hooks.onRequest.addInterceptor(request.excludeProxyInterceptor);\n}\n\nfunction initOnResponseHook(api: models.HttpyacHooksApi) {\n  api.hooks.onResponse.addHook('handleMetaDataName', response.handleNameMetaData);\n  api.hooks.onResponse.addHook('setLastResponseInVariables', response.setLastResponseInVariables);\n  api.hooks.onResponse.addInterceptor(response.jsonResponseInterceptor);\n}\n\nfunction initParseHook(api: models.HttpyacHooksApi) {\n  api.hooks.parse.addHook('meta', parse.parseMetaData);\n  api.hooks.parse.addHook('comment', parse.parseComment);\n  api.hooks.parse.addHook('variable', parse.parseVariable);\n  api.hooks.parse.addHook('request', parse.parseHttpRequestLine);\n  api.hooks.parse.addHook('outputRedirection', parse.parseOutputRedirection);\n  api.hooks.parse.addHook('responseRef', parse.parseResponseRef);\n  api.hooks.parse.addHook('response', parse.parseResponse);\n  api.hooks.parse.addHook('requestBody', parse.parseRequestBody);\n\n  api.hooks.parse.addInterceptor(new parse.MultipartMixedInterceptor());\n}\nfunction initParseEndHook(api: models.HttpyacHooksApi) {\n  api.hooks.parseEndRegion.addHook('registerCancelExecutionInterceptor', parseEnd.registerCancelExecutionInterceptor);\n  api.hooks.parseEndRegion.addHook('response', parseEnd.closeResponseBody);\n  api.hooks.parseEndRegion.addHook('requestBody', parseEnd.closeRequestBody);\n}\n\nfunction initReplaceVariableHook(api: models.HttpyacHooksApi) {\n  api.hooks.replaceVariable.addHook('host', replacer.hostVariableReplacer);\n  api.hooks.replaceVariable.addHook('name', replacer.replaceVariableNames);\n  api.hooks.replaceVariable.addHook('file', replacer.replaceFileImport);\n  api.hooks.replaceVariable.addHook('showInputBox', replacer.showInputBoxVariableReplacer);\n  api.hooks.replaceVariable.addHook('showQuickPick', replacer.showQuickpickVariableReplacer);\n  api.hooks.replaceVariable.addHook('restClientDynamic', replacer.restClientVariableReplacer);\n  api.hooks.replaceVariable.addInterceptor(replacer.escapeVariableInterceptor);\n}\nfunction initParseMetData(api: models.HttpyacHooksApi) {\n  api.hooks.parseMetaData.addHook('disabled', metaData.disabledMetaDataHandler);\n  api.hooks.parseMetaData.addHook('import', metaData.importMetaDataHandler);\n  api.hooks.parseMetaData.addHook('jwt', metaData.jwtMetaDataHandler);\n  api.hooks.parseMetaData.addHook('keepStreaming', metaData.keepStreamingMetaDataHandler);\n  api.hooks.parseMetaData.addHook('loop', metaData.loopMetaDataHandler);\n  api.hooks.parseMetaData.addHook('noRedirect', metaData.noRedirectMetaDataHandler);\n  api.hooks.parseMetaData.addHook('noRejectUnauthorized', metaData.noRejectUnauthorizedMetaDataHandler);\n  api.hooks.parseMetaData.addHook('timeout', metaData.timeoutMetaDataHandler);\n  api.hooks.parseMetaData.addHook('note', metaData.noteMetaDataHandler);\n  api.hooks.parseMetaData.addHook('proxy', metaData.proxyMetaDataHandler);\n  api.hooks.parseMetaData.addHook('rateLimit', metaData.rateLimitMetaDataHandler);\n  api.hooks.parseMetaData.addHook('ref', metaData.refMetaDataHandler);\n  api.hooks.parseMetaData.addHook('responseRef', metaData.responseRefMetaDataHandler);\n  api.hooks.parseMetaData.addHook('sleep', metaData.sleepMetaDataHandler);\n  api.hooks.parseMetaData.addHook('verbose', metaData.verboseMetaDataHandler);\n  api.hooks.parseMetaData.addHook('forceRegionDelimiter', metaData.forceRegionDelimiterMetaDataHandler);\n}\n\nfunction initExecuteInterceptor(api: models.HttpyacHooksApi) {\n  const processedHttpRegionInterceptor = new execute.ProcessedHttpRegionInterceptor();\n  api.hooks.execute.addInterceptor(new execute.RegionScopedVariablesInterceptor());\n  api.hooks.execute.addInterceptor(processedHttpRegionInterceptor);\n  api.hooks.responseLogging.addInterceptor(processedHttpRegionInterceptor.getResponseLoggingInterceptor());\n  api.hooks.execute.addInterceptor(new execute.CreateRequestInterceptor());\n  api.hooks.execute.addInterceptor(new execute.LazyVariableInterceptor());\n  api.hooks.execute.addInterceptor(new execute.LogResponseInterceptor());\n}\nfunction initProvideEnvironmentsHook(api: models.HttpyacHooksApi) {\n  api.hooks.provideEnvironments.addHook('config', environments.provideConfigEnvironments);\n  api.hooks.provideVariables.addHook('config', environments.provideConfigVariables);\n  api.hooks.provideVariables.addHook('response', environments.provideLastResponseVariables);\n}\n", "import { parse } from 'dotenv';\n\nimport { fileProvider, log } from '../../io';\nimport { PathLike, VariableProviderContext, Variables } from '../../models';\nimport * as utils from '../../utils';\n\nconst envFileName = '.env';\n\nexport async function provideDotenvEnvironments(context: VariableProviderContext): Promise<string[]> {\n  const files: Array<string> = [];\n\n  if (process.env.HTTPYAC_ENV) {\n    try {\n      files.push(...(await fileProvider.readdir(process.env.HTTPYAC_ENV)));\n    } catch (err) {\n      log.warn(`HTTPYAC_ENV ${process.env.HTTPYAC_ENV} has read error`, err);\n    }\n  }\n\n  const dirOfFile = fileProvider.dirname(context.httpFile.fileName);\n  if (dirOfFile) {\n    await utils.iterateUntilRoot(dirOfFile, context.httpFile.rootDir, async (dir: PathLike) => {\n      files.push(...(await readEnvDir(getEnvdirname(context), dir)));\n      files.push(...(await utils.useDefaultOnError(fileProvider.readdir(dir), [])));\n    });\n  }\n\n  const envs = [];\n  for (const file of files) {\n    let val: string | undefined;\n    if (file.startsWith(`${envFileName}.`)) {\n      val = file.slice(5);\n    } else if (file.endsWith(envFileName)) {\n      val = file.slice(0, file.length - 4);\n    }\n    if (val) {\n      envs.push(val);\n    }\n  }\n  log.info('dotenv Env Provider found environments', envs);\n  return envs;\n}\n\nasync function readEnvDir(dir: string | undefined, rootDir: PathLike | undefined): Promise<Array<string>> {\n  const files = [];\n  if (dir) {\n    const absoluteDir = await utils.toAbsoluteFilename(dir, rootDir);\n    if (absoluteDir) {\n      files.push(...(await utils.useDefaultOnError(fileProvider.readdir(absoluteDir), [])));\n    }\n  }\n  return files;\n}\n\nexport async function provideDotenvVariables(\n  env: string[] | undefined,\n  context: VariableProviderContext\n): Promise<Variables> {\n  const searchFiles = getSearchFiles(env);\n  const variables: Array<Variables> = [];\n\n  if (process.env.HTTPYAC_ENV) {\n    variables.push(...(await getEnvVariables(searchFiles, process.env.HTTPYAC_ENV)));\n  }\n  const dirOfFile = fileProvider.dirname(context.httpFile.fileName);\n  if (dirOfFile) {\n    const vars: Array<Variables> = [];\n    await utils.iterateUntilRoot(dirOfFile, context.httpFile.rootDir, async (dir: PathLike) => {\n      vars.unshift(...(await getEnvFolderVariables(getEnvdirname(context), searchFiles, dir)));\n      vars.unshift(...(await getEnvVariables(searchFiles, dir)));\n    });\n    variables.push(...vars);\n  }\n  return Object.assign({}, ...variables);\n}\n\nfunction getEnvdirname(context: VariableProviderContext) {\n  return context.config?.envDirName || 'env';\n}\n\nfunction getSearchFiles(env: string[] | undefined) {\n  const searchFiles = [envFileName];\n  if (env) {\n    for (const environment of env) {\n      searchFiles.push(`${environment}.env`, `.env.${environment}`);\n    }\n  }\n  return searchFiles;\n}\n\nasync function getEnvFolderVariables(\n  envDirName: string | undefined,\n  searchFiles: string[],\n  dir: PathLike | undefined\n): Promise<Array<Variables>> {\n  const variables: Array<Variables> = [];\n  if (envDirName) {\n    const absolute = await utils.toAbsoluteFilename(envDirName, dir);\n    if (absolute) {\n      variables.push(...(await getEnvVariables(searchFiles, absolute)));\n    }\n  }\n  return variables;\n}\n\nasync function getEnvVariables(searchFiles: string[], dir: PathLike) {\n  const files = await utils.useDefaultOnError(fileProvider.readdir(dir), []);\n  const foundFiles = searchFiles.filter(file => files.indexOf(file) >= 0);\n  const vars = [];\n\n  for (const fileName of foundFiles) {\n    const envFileName = fileProvider.joinPath(dir, fileName);\n    log.trace(`.env environment file found: ${envFileName}`);\n    try {\n      const content = await fileProvider.readFile(envFileName, 'utf-8');\n      const variables = parse(content);\n      vars.push(variables);\n    } catch (err) {\n      log.trace(`${fileProvider.toString(envFileName)} not found`);\n    }\n  }\n  return vars;\n}\n", "import * as models from '../../models';\nimport { provideDotenvEnvironments, provideDotenvVariables } from './dotenvVariableProvider';\n\nexport function registerDotenvPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.provideEnvironments.addHook('dotenv', provideDotenvEnvironments);\n  api.hooks.provideVariables.addHook('dotenv', provideDotenvVariables);\n}\n", "import { Request } from '../../models';\n\nexport interface EventSourceRequest extends Request<'SSE'> {\n  headers?: Record<string, string>;\n}\n\nexport function isEventSourceRequest(request: Request | undefined): request is EventSourceRequest {\n  return request?.protocol === 'SSE';\n}\n", "import { completionItemProvider } from '../../io';\nimport { isEventSourceRequest } from './eventSourceRequest';\n\ncompletionItemProvider.emptyLineProvider.push(() => [\n  {\n    name: 'SSE',\n    description: 'Server Sent Event',\n  },\n]);\n\ncompletionItemProvider.requestHeaderProvider.push(request => {\n  const result = [];\n  if (isEventSourceRequest(request)) {\n    result.push(...[{ name: 'Event', description: 'Server Sent Events to add listener' }]);\n  }\n  return result;\n});\n", "import EventSource from 'eventsource';\n\nimport { log } from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { EventSourceRequest, isEventSourceRequest } from './eventSourceRequest';\n\nexport class EventSourceRequestClient extends models.AbstractRequestClient<EventSource | undefined> {\n  private responseTemplate: Partial<models.HttpResponse> & { protocol: string } = {\n    protocol: 'SSE',\n  };\n\n  constructor(private readonly request: models.Request) {\n    super();\n  }\n  get reportMessage(): string {\n    return `perform SSE Request (${this.request.url})`;\n  }\n\n  get supportsStreaming() {\n    return true;\n  }\n\n  private _nativeClient: EventSource | undefined;\n  get nativeClient(): EventSource | undefined {\n    return this._nativeClient;\n  }\n\n  async connect(): Promise<EventSource | undefined> {\n    if (isEventSourceRequest(this.request)) {\n      this._nativeClient = new EventSource(this.request.url || '', this.getClientOptions(this.request));\n      this.registerEvents(this._nativeClient, this.request);\n    }\n    return this._nativeClient;\n  }\n\n  async send(): Promise<void> {\n    log.debug('SSE does not support send');\n  }\n\n  override disconnect(): void {\n    this.nativeClient?.close();\n    this.onDisconnect();\n  }\n\n  private getClientOptions(request: EventSourceRequest): EventSource.EventSourceInitDict {\n    const options: EventSource.EventSourceInitDict = {};\n    const headers = { ...request.headers };\n    utils.deleteHeader(headers, 'event');\n    options.headers = headers;\n\n    if (request.noRejectUnauthorized) {\n      options.rejectUnauthorized = false;\n    }\n    if (request.proxy) {\n      options.proxy = request.proxy;\n    }\n    return options;\n  }\n\n  private registerEvents(client: EventSource, request: EventSourceRequest) {\n    const events = utils.getHeaderArray(request.headers, 'event', ['data', 'message']);\n\n    for (const event of events) {\n      client.addEventListener(event, message => {\n        this.onMessage('message', {\n          ...this.responseTemplate,\n          statusCode: message.status || 200,\n          name: `EventSource (${this.request.url})`,\n          request: this.request,\n          body: message.data,\n          rawBody: Buffer.from(message.data),\n        });\n      });\n    }\n    client.onerror = err => {\n      this.onMessage('error', {\n        ...this.responseTemplate,\n        statusCode: 400,\n        request: this.request,\n        body: utils.errorToString(err),\n      });\n    };\n\n    const metaDataEvents = ['open'];\n    for (const event of metaDataEvents) {\n      client.addEventListener(event, message => {\n        this.onMetaData('open', {\n          ...this.responseTemplate,\n          statusCode: 200,\n          message: message.data,\n          body: {\n            data: message.data,\n            date: new Date(),\n          },\n        });\n      });\n    }\n  }\n}\n", "import * as utils from '../../utils';\nimport { userSessionStore } from '../../store';\nimport { EventSourceRequestClient } from './eventSourceRequestClient';\n\nexport const parseEventSource = utils.parseRequestLineFactory({\n  protocol: 'SSE',\n  methodRegex: /^\\s*(SSE|EVENTSOURCE)\\s+(?<url>.+?)\\s*$/u,\n  requestClientFactory(request) {\n    return new EventSourceRequestClient(request);\n  },\n  modifyRequest(request) {\n    request.supportsStreaming = true;\n  },\n  sessionStore: userSessionStore,\n});\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport async function parseEventSourceResponse(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  return utils.parseInlineResponse(\n    getLineReader,\n    context,\n    /^\\s*SSE\\s*(?<statusCode>(-1|0))\\s*(-)?\\s*(?<statusMessage>.*)$/u\n  );\n}\n", "import './completionItemProvider';\n\nimport * as eventSource from 'eventsource';\n\nimport { javascriptProvider } from '../../io';\nimport * as models from '../../models';\nimport { parseEventSource } from './eventSourceHttpRegionParser';\nimport { parseEventSourceResponse } from './eventSourceResponseHttpRegionParser';\n\nexport function registerEventSourcePlugin(api: models.HttpyacHooksApi) {\n  api.hooks.parse.addHook('eventSource', parseEventSource, { before: ['request'] });\n  api.hooks.parse.addHook('eventSourceResponse', parseEventSourceResponse, { before: ['requestBody'] });\n  javascriptProvider.require.eventsource = eventSource;\n}\n", "import { log, userInteractionProvider } from '../../io';\nimport { ProcessorContext, Request, VariableType } from '../../models';\nimport * as utils from '../../utils';\n\nexport type GqlLoadData = string | ((context: ProcessorContext) => Promise<string | undefined>);\n\nexport interface GqlData {\n  operationName?: string;\n  query?: GqlLoadData;\n  fragments: Record<string, GqlLoadData>;\n}\n\nexport interface GqlPostRequest {\n  query: string;\n  operationName?: string;\n  variables?: Record<string, unknown>;\n}\n\nexport class GqlAction {\n  id = 'gql';\n  before = ['http'];\n\n  constructor(private readonly gqlData: GqlData) {}\n\n  async process(request: Request, context: ProcessorContext): Promise<void> {\n    if (request && this.gqlData?.query) {\n      utils.report(context, 'build GraphQL query');\n      let query: string | undefined;\n      if (utils.isString(this.gqlData.query)) {\n        query = this.gqlData.query;\n      } else {\n        const result = await this.gqlData.query(context);\n        if (result) {\n          query = result;\n        } else {\n          const message = 'query import not found';\n          userInteractionProvider.showWarnMessage?.(message);\n          log.warn(message);\n        }\n      }\n\n      if (query) {\n        for (const [key, value] of Object.entries(this.gqlData.fragments)) {\n          if (query.indexOf(`...${key}`) >= 0) {\n            let fragment: string | undefined;\n            if (utils.isString(value)) {\n              fragment = value;\n            } else {\n              const result = await value(context);\n              if (result) {\n                fragment = result;\n              } else {\n                const message = `query fragment ${key} not found`;\n                userInteractionProvider.showWarnMessage?.(message);\n                log.warn(message);\n              }\n            }\n            if (fragment) {\n              query = utils.toMultiLineString([query, fragment]);\n            }\n          }\n        }\n        const replacedQuery = await utils.replaceVariables(query, VariableType.body, context);\n        const gqlRequestBody: GqlPostRequest = {\n          query: utils.isString(replacedQuery) ? replacedQuery : query,\n        };\n        if (this.gqlData.operationName) {\n          gqlRequestBody.operationName = this.gqlData.operationName;\n        }\n        if (utils.isString(request.body)) {\n          gqlRequestBody.variables = JSON.parse(request.body);\n        }\n        request.body = utils.stringifySafe(gqlRequestBody);\n      }\n    }\n  }\n}\n", "import { fileProvider } from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { GqlAction, GqlData } from './gqlAction';\n\nconst EmptyLine = /^\\s*$/u;\n\nexport async function parseGraphql(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n\n  if (context.httpRegion.metaData.noGqlParsing) {\n    return false;\n  }\n\n  const gqlContent = await getGQLContent(lineReader);\n  if (gqlContent) {\n    const gqlData: GqlData = {\n      fragments: getGqlFragments(context),\n    };\n\n    if (context.httpRegion.request) {\n      gqlData.query = gqlContent.gql;\n      if (gqlContent.name) {\n        gqlData.operationName = removeDirectives(gqlContent.name);\n        if (!context.httpRegion.metaData.name) {\n          context.httpRegion.metaData.name = gqlContent.name;\n        }\n      }\n      context.httpRegion.hooks.onRequest.addObjHook(obj => obj.process, new GqlAction(gqlData));\n    } else if (gqlContent.name) {\n      gqlData.fragments[gqlContent.name] = gqlContent.gql;\n    }\n    return {\n      nextParserLine: gqlContent.symbol.endLine,\n      symbols: [gqlContent.symbol],\n    };\n  }\n  return false;\n}\n\nfunction removeDirectives(operationName: string) {\n  if (operationName) {\n    return operationName\n      .trim()\n      .split(' ')\n      .filter(name => !!name && !name.startsWith('@'))\n      .pop();\n  }\n  return operationName;\n}\n\nfunction getGqlFragments(context: models.ParserContext) {\n  let result = context.data.gql;\n  if (!result) {\n    result = {};\n    context.data.gql = result;\n  }\n  return result;\n}\n\nasync function getGQLContent(lineReader: models.HttpLineGenerator): Promise<GqlParserResult | false> {\n  const next = lineReader.next();\n  if (!next.done) {\n    const startLine = next.value.line;\n\n    const fileMatches = /^\\s*gql(\\s+(?<name>[^\\s(]+))?\\s+<\\s+(?<fileName>.+)\\s*$/u.exec(next.value.textLine);\n    if (fileMatches && fileMatches.groups?.fileName) {\n      const parserPath = fileMatches.groups.fileName.trim();\n      return {\n        symbol: new models.HttpSymbol({\n          name: 'gql',\n          description: 'gql',\n          kind: models.HttpSymbolKind.gql,\n          startLine,\n          startOffset: 0,\n          endLine: startLine,\n          endOffset: next.value.textLine.length,\n          children: [\n            new models.HttpSymbol({\n              name: 'filename',\n              description: parserPath,\n              kind: models.HttpSymbolKind.path,\n              startLine: next.value.line,\n              startOffset: next.value.textLine.indexOf(parserPath),\n              endLine: next.value.line,\n              endOffset: next.value.textLine.indexOf(parserPath) + parserPath.length,\n            }),\n          ],\n        }),\n        name: fileMatches.groups.name || fileMatches.groups.fileName,\n        gql: (context: models.ProcessorContext) =>\n          utils.replaceFilePath(parserPath, context, (path: models.PathLike) => fileProvider.readFile(path, 'utf-8')),\n      };\n    }\n    const queryMatch = /^\\s*(query|mutation)(\\s+(?<name>[^\\s(]+))?/u.exec(next.value.textLine);\n    if (queryMatch) {\n      return matchGqlContent(next.value, lineReader, queryMatch.groups?.name);\n    }\n    const fragmentMatch = /^\\s*(fragment)\\s+(?<name>[^\\s(]+)\\s+on\\s+/u.exec(next.value.textLine);\n    if (fragmentMatch) {\n      return matchGqlContent(next.value, lineReader, fragmentMatch.groups?.name);\n    }\n  }\n  return false;\n}\n\nfunction matchGqlContent(\n  value: { textLine: string; line: number },\n  lineReader: models.HttpLineGenerator,\n  name: string | undefined\n): GqlParserResult {\n  let next = lineReader.next();\n  let prevReader = {\n    endLine: value.line,\n    endOffset: value.textLine.length,\n  };\n  const gqlLines: Array<string> = [value.textLine];\n  while (!next.done) {\n    prevReader = {\n      endLine: next.value.line,\n      endOffset: next.value.textLine.length,\n    };\n    if (EmptyLine.test(next.value.textLine)) {\n      return {\n        name,\n        symbol: new models.HttpSymbol({\n          name: 'gql',\n          description: 'gql',\n          kind: models.HttpSymbolKind.gql,\n          startLine: value.line,\n          startOffset: 0,\n          ...prevReader,\n        }),\n        gql: utils.toMultiLineString(gqlLines),\n      };\n    }\n    gqlLines.push(next.value.textLine);\n\n    next = lineReader.next();\n  }\n  return {\n    name,\n    symbol: new models.HttpSymbol({\n      name: 'gql',\n      description: 'gql',\n      kind: models.HttpSymbolKind.gql,\n      startLine: value.line,\n      startOffset: 0,\n      ...prevReader,\n    }),\n    gql: utils.toMultiLineString(gqlLines),\n  };\n}\n\nexport interface GqlParserResult {\n  name?: string;\n  symbol: models.HttpSymbol;\n  gql: string | ((context: models.ProcessorContext) => Promise<string | undefined>);\n}\n", "import * as models from '../../models';\nimport { getHeader } from '../../utils';\n\nexport async function graphqlProtocolReplacer(request: models.Request): Promise<void> {\n  if (request.method?.toUpperCase() === 'GRAPHQL') {\n    request.method = 'POST';\n    if (!getHeader(request.headers, 'content-type')) {\n      if (!request.headers) {\n        request.headers = {};\n      }\n      request.headers['content-type'] = 'application/json';\n    }\n  }\n}\n", "import * as models from '../../models';\nimport { parseGraphql } from './gqlHttpRegionParser';\nimport { graphqlProtocolReplacer } from './graphqlProtocolReplacer';\n\nexport function registerGraphQL(api: models.HttpyacHooksApi) {\n  api.hooks.parse.addHook('graphql', parseGraphql, { before: ['request'] });\n  api.hooks.onRequest.addHook('graphqlProtocolReplacer', graphqlProtocolReplacer);\n}\n", "import type { CallOptions, ChannelCredentials, ChannelOptions } from '@grpc/grpc-js';\n\nimport { Request } from '../../models';\n\nexport interface GrpcRequest extends Request<'GRPC'> {\n  headers?: Record<string, string | Buffer | ChannelCredentials>;\n  options?: ChannelOptions;\n  channelCredentials?: ChannelCredentials;\n  callOptions?: CallOptions;\n}\n\nexport function isGrpcRequest(request: Request | undefined): request is GrpcRequest {\n  return request?.protocol === 'GRPC';\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\nimport { isGrpcRequest } from './grpcRequest';\n\nexport async function callOptionsRequestHook(request: models.Request, context: models.ProcessorContext): Promise<void> {\n  if (isGrpcRequest(request) && request.headers) {\n    utils.report(context, 'create call options');\n    const timeout = request.timeout || utils.toNumber(context.config?.request?.timeout);\n    if (timeout !== undefined) {\n      request.callOptions = Object.assign({}, request.options, {\n        deadline: new Date(new Date().getTime() + timeout),\n      });\n    }\n  }\n  return undefined;\n}\n", "import { ChannelCredentials, credentials } from '@grpc/grpc-js';\n\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { isGrpcRequest } from './grpcRequest';\n\nexport async function channelCredentialsRequestHook(request: models.Request): Promise<void> {\n  if (isGrpcRequest(request) && request.headers) {\n    const channelCredentials = utils.getHeader(request.headers, 'channelcredentials');\n    if (utils.isString(channelCredentials)) {\n      if (channelCredentials.toLowerCase() === 'ssl') {\n        request.channelCredentials = credentials.createSsl();\n      }\n      if (channelCredentials.toLowerCase() === 'insecure') {\n        request.channelCredentials = credentials.createInsecure();\n      }\n    }\n    if (channelCredentials instanceof ChannelCredentials) {\n      utils.deleteHeader(request.headers, 'channelcredentials');\n      request.channelCredentials = channelCredentials;\n    }\n  }\n  return undefined;\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\nimport { isGrpcRequest } from './grpcRequest';\n\nexport async function channelOptionsRequestHook(\n  request: models.Request,\n  context: models.ProcessorContext\n): Promise<void> {\n  if (isGrpcRequest(request) && request.headers) {\n    utils.report(context, 'create channel options');\n    if (!request.options) {\n      request.options = {};\n    }\n    for (const [key, value] of Object.entries(request.headers)) {\n      if (key.startsWith('grpc.')) {\n        utils.deleteHeader(request.headers, key);\n        if (utils.isString(value) || Number.isInteger(value)) {\n          const numberOptions = [\n            'grpc.keepalive_time_ms',\n            'grpc.keepalive_timeout_ms',\n            'grpc.keepalive_permit_without_calls',\n            'grpc.max_concurrent_streams',\n            'grpc.initial_reconnect_backoff_ms',\n            'grpc.max_reconnect_backoff_ms',\n            'grpc.use_local_subchannel_pool',\n            'grpc.max_send_message_length',\n            'grpc.max_receive_message_length',\n            'grpc.enable_http_proxy',\n            'grpc.default_compression_algorithm',\n            'grpc.enable_channelz',\n            'grpc.dns_min_time_between_resolutions_ms',\n            'grpc-node.max_session_memory',\n          ];\n          if (numberOptions.indexOf(key) >= 0) {\n            request.options[key] = utils.toNumber(value);\n          } else {\n            request.options[key] = value;\n          }\n        }\n      }\n    }\n  }\n  return undefined;\n}\n", "import { completionItemProvider } from '../../io';\nimport { isGrpcRequest } from './grpcRequest';\n\ncompletionItemProvider.emptyLineProvider.push(() => [\n  {\n    name: 'GRPC',\n    description: 'GRPC request',\n  },\n  {\n    name: 'proto < ./',\n    description: 'Proto Import',\n  },\n]);\n\ncompletionItemProvider.requestHeaderProvider.push(request => {\n  const result = [];\n  if (isGrpcRequest(request)) {\n    result.push(\n      ...[\n        {\n          name: 'ChannelCredentials',\n          description: 'Channel credentials, which are attached to a Channel, such as SSL credentials.',\n        },\n      ]\n    );\n  }\n  return result;\n});\n", "import * as grpc from '@grpc/grpc-js';\n\nimport { log } from '../../io';\nimport { ProtoDefinition } from '../../models';\nexport interface ServiceData {\n  server: string;\n  path: string;\n  service: string;\n  method: string;\n  protocol: string;\n  ServiceClass: {\n    new (address: string, credentials: grpc.ChannelCredentials, options?: Partial<grpc.ChannelOptions>): GrpcClient;\n  };\n  methodDefinition: grpc.MethodDefinition<unknown, unknown>;\n}\n\nexport interface GrpcClient extends grpc.Client {\n  close(): void;\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  [key: string]: Function;\n}\n\nexport const GrpcUrlRegex =\n  /^\\s*((?<protocol>grpc|https?):\\/\\/)?(?<server>[^/]+?)(\\/(?<path>.+))?\\/(?<service>[^/]+?)\\/(?<method>[^/]+?)$/iu;\n\nexport function getSerivceData(url: string, protoDefinitions: Record<string, ProtoDefinition>): ServiceData {\n  const urlMatch = GrpcUrlRegex.exec(url);\n  if (urlMatch && urlMatch.groups?.service) {\n    const { server, path, service, method, protocol } = urlMatch.groups;\n    const flatServices = flattenProtoDefinitions(protoDefinitions);\n\n    let ServiceClass = flatServices[service];\n    if (!ServiceClass) {\n      const serviceKey = Object.keys(flatServices).find(key => key.indexOf(service) >= 0);\n      if (serviceKey) {\n        log.warn(`service ${service} not found. Similar service ${serviceKey} is used.`);\n        ServiceClass = flatServices[serviceKey];\n      }\n    }\n    if (typeof ServiceClass === 'function') {\n      const methodDefinition =\n        ServiceClass.service[method] ||\n        Object.entries(ServiceClass.service)\n          .filter(([key]) => key.toLowerCase() === method.toLowerCase())\n          .map(([, value]) => value)\n          .pop();\n      return {\n        server,\n        service,\n        path,\n        protocol,\n        method,\n        ServiceClass,\n        methodDefinition,\n      };\n    }\n\n    const flatServiceKeys = Object.keys(flatServices);\n    if (flatServiceKeys.length > 0) {\n      throw new Error(`Service ${service} does not exist. Available Services: ${flatServiceKeys.join(', ')}`);\n    } else {\n      throw new Error(`Service ${service} does not exist. No Service imported`);\n    }\n  } else {\n    throw new Error(`Url ${url} does not match pattern <server>/<service>/<method>`);\n  }\n}\n\nfunction flattenProtoDefinitions(protoDefinitions: Record<string, ProtoDefinition>) {\n  const result: grpc.GrpcObject = {};\n  for (const protoDefinition of Object.values(protoDefinitions)) {\n    if (protoDefinition.grpcObject) {\n      const grpcObject = getFlatGrpcObject(protoDefinition.grpcObject);\n      Object.assign(result, grpcObject);\n    }\n  }\n  return result;\n}\n\nfunction getFlatGrpcObject(grpcObject: grpc.GrpcObject) {\n  return Object.entries(grpcObject).reduce((prev, curr) => {\n    if (typeof curr[1] === 'function') {\n      prev[curr[0]] = curr[1];\n    } else if (isGrpcObject(curr[1])) {\n      for (const [name, value] of Object.entries(getFlatGrpcObject(curr[1]))) {\n        prev[`${curr[0]}.${name}`] = value;\n      }\n    }\n    return prev;\n  }, {} as grpc.GrpcObject);\n}\nfunction isGrpcObject(obj: unknown): obj is grpc.GrpcObject {\n  const grpcObject = obj as grpc.GrpcObject;\n  return grpcObject && !grpcObject.format && typeof obj !== 'function';\n}\n", "import * as grpc from '@grpc/grpc-js';\nimport { Duplex, Readable, Writable } from 'stream';\n\nimport { log } from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { getSerivceData, GrpcClient, ServiceData } from './createGrpcService';\nimport { GrpcRequest, isGrpcRequest } from './grpcRequest';\nimport { PathAwareChannel } from './pathAwareChannel';\nimport { ConnectivityState } from '@grpc/grpc-js/build/src/connectivity-state';\n\ngrpc.setLogger(log);\ntype GrpcStream = (Readable | Writable | Duplex) & { cancel?(): void };\n\ninterface GrpcError {\n  details?: string;\n  code?: number;\n  message?: string;\n}\n\nexport class GrpcRequestClient extends models.AbstractRequestClient<GrpcClient | undefined> {\n  private grpcStream: GrpcStream | undefined;\n  private responseTemplate: Partial<models.HttpResponse> & { protocol: string } = {\n    protocol: 'GRPC',\n  };\n\n  constructor(\n    private readonly request: models.Request,\n    private readonly context: models.ProtoProcessorContext\n  ) {\n    super();\n  }\n  get reportMessage(): string {\n    return `perform gRPC Request (${this.request.url})`;\n  }\n\n  get supportsStreaming() {\n    return (\n      !!this._clientDefinition?.methodDefinition?.requestStream ||\n      !!this._clientDefinition?.methodDefinition?.responseStream\n    );\n  }\n\n  private _clientDefinition: ServiceData | undefined;\n\n  private _nativeClient: GrpcClient | undefined;\n  get nativeClient(): GrpcClient | undefined {\n    return this._nativeClient;\n  }\n\n  private getChannelOptions(request: GrpcRequest, serviceData: ServiceData) {\n    const options: grpc.ChannelOptions = {};\n    if (serviceData.path) {\n      options.channelFactoryOverride = (\n        address: string,\n        credentials: grpc.ChannelCredentials,\n        options: grpc.ChannelOptions\n      ) => {\n        try {\n          log.trace('grpc new channel for address is created', address);\n          const nextOptions = Object.assign({}, options);\n          delete nextOptions.channelFactoryOverride;\n          nextOptions['grpc.default_authority'] = serviceData.server;\n          return new PathAwareChannel(address, credentials, nextOptions, serviceData.path);\n        } catch (err) {\n          log.debug('error on PathAwareChannel creation', err);\n        }\n        return new grpc.Channel(address, credentials, options);\n      };\n    }\n    return Object.assign(options, request.options);\n  }\n\n  public getSessionId() {\n    return utils.replaceInvalidChars(this.request.url);\n  }\n\n  async connect(prevClient: GrpcClient | undefined): Promise<GrpcClient | undefined> {\n    if (isGrpcRequest(this.request)) {\n      if (prevClient) {\n        const connectivityState = this.getClientConnectivityState(prevClient);\n        log.trace('grpc connect with prev client and state', connectivityState, prevClient);\n        if (connectivityState === ConnectivityState.TRANSIENT_FAILURE) {\n          prevClient.close();\n          log.debug('grpc prev client connection state after close:', this.getClientConnectivityState(prevClient));\n        } else if (connectivityState !== ConnectivityState.SHUTDOWN) {\n          this._nativeClient = prevClient;\n          log.trace('grpc prev client is used', connectivityState, prevClient);\n          return this._nativeClient;\n        }\n      }\n\n      const protoDefinitions = this.context.options.protoDefinitions;\n      if (protoDefinitions) {\n        log.trace('grpc new client is used');\n        this._clientDefinition = getSerivceData(this.request.url || '', protoDefinitions);\n        this._nativeClient = new this._clientDefinition.ServiceClass(\n          this._clientDefinition.server,\n          this.request.channelCredentials || grpc.credentials.createInsecure(),\n          this.getChannelOptions(this.request, this._clientDefinition)\n        );\n      } else {\n        log.error('no protodefinitions found in context');\n        throw new Error('Missing Protodefinitions');\n      }\n    }\n    return this._nativeClient;\n  }\n\n  async send(body?: unknown): Promise<void> {\n    return new Promise<void>(resolve => {\n      const data = this.getData(body || this.request.body);\n\n      const initNewStream = !this.grpcStream || !this._clientDefinition?.methodDefinition.requestStream;\n\n      if (initNewStream) {\n        this.grpcStream = this.callMethod(data, resolve);\n\n        if (this.grpcStream instanceof Duplex || this.grpcStream instanceof Readable) {\n          this.grpcStream.once('close', () => resolve());\n        }\n      }\n      if (isGrpcRequest(this.request) && (this.grpcStream instanceof Writable || this.grpcStream instanceof Duplex)) {\n        this.grpcStream.write(data);\n      }\n      if (!initNewStream) {\n        resolve();\n      }\n    });\n  }\n\n  private callMethod(body: unknown, resolve: () => void): GrpcStream | undefined {\n    if (this.nativeClient && this._clientDefinition && isGrpcRequest(this.request)) {\n      const methodName = this._clientDefinition.method;\n      const method = this.nativeClient[methodName].bind(this.nativeClient);\n      const methodArgs = this.getMethodArgs(this._clientDefinition, this.request, body, resolve);\n      const result = method(...methodArgs);\n      this.registerEvents(result, methodName);\n      return result;\n    }\n    return undefined;\n  }\n\n  private getMethodArgs(serviceData: ServiceData, request: GrpcRequest, body: unknown, resolve: () => void) {\n    const methodArgs: Array<unknown> = [this.getMetaData(request)];\n    if (request.callOptions) {\n      methodArgs.push(request.callOptions);\n    }\n    if (!serviceData.methodDefinition?.requestStream) {\n      methodArgs.splice(0, 0, body);\n    }\n    if (!serviceData.methodDefinition?.responseStream) {\n      methodArgs.push((err: Error, data: unknown) => {\n        this.onMessage(serviceData.method, this.toHttpResponse(err || data));\n        resolve();\n      });\n    }\n    return methodArgs;\n  }\n\n  private getData(body: unknown): unknown {\n    if (utils.isString(body)) {\n      return JSON.parse(body);\n    }\n    if (Buffer.isBuffer(body)) {\n      return JSON.parse(body.toString('utf-8'));\n    }\n    return body;\n  }\n\n  public streamEnded(): void {\n    if (this.grpcStream instanceof Writable || this.grpcStream instanceof Duplex) {\n      this.grpcStream.end();\n      delete this.grpcStream;\n    }\n  }\n\n  public override disconnect(err?: Error): void {\n    if (this.grpcStream?.cancel) {\n      this.grpcStream.cancel();\n    } else if (err) {\n      this.grpcStream?.destroy(err);\n    } else {\n      if (this.grpcStream instanceof Writable || this.grpcStream instanceof Duplex) {\n        this.grpcStream.end();\n      }\n    }\n    delete this.grpcStream;\n\n    if (this._nativeClient) {\n      log.debug('client connection state:', this.getClientConnectivityState(this._nativeClient));\n      this._nativeClient.close();\n      log.debug('client connection state after close:', this.getClientConnectivityState(this._nativeClient));\n    }\n    delete this._nativeClient;\n    this.onDisconnect();\n  }\n\n  private getClientConnectivityState(client: GrpcClient) {\n    return client.getChannel().getConnectivityState(false);\n  }\n\n  private registerEvents(stream: GrpcStream, methodName: string): void {\n    stream.on('metadata', (metaData: grpc.Metadata) => {\n      this.responseTemplate.headers = metaData.getMap();\n    });\n    stream.on('data', chunk => {\n      this.onMessage(methodName, this.toHttpResponse(chunk));\n    });\n    stream.on('error', err => {\n      this.onMessage(methodName, this.toHttpResponse(err));\n    });\n\n    const metaDataEvents = ['end', 'close', 'pause', 'resume'];\n    for (const event of metaDataEvents) {\n      stream.on(event, message => {\n        this.onMetaData(methodName, {\n          ...this.responseTemplate,\n          statusCode: 0,\n          message: `${event} received`,\n          body: {\n            message,\n            date: new Date(),\n          },\n        });\n      });\n    }\n  }\n\n  private getMetaData(request: GrpcRequest): grpc.Metadata {\n    const metaData = new grpc.Metadata();\n    if (request.headers) {\n      for (const [key, value] of Object.entries(request.headers)) {\n        if (utils.isString(value) || Buffer.isBuffer(value)) {\n          metaData.add(key, value);\n        }\n      }\n    }\n    return metaData;\n  }\n  private toHttpResponse(data: unknown): models.HttpResponse {\n    const body = utils.isString(data) ? data : utils.stringifySafe(data, 2);\n    const response: models.HttpResponse = {\n      headers: {},\n      ...this.responseTemplate,\n      statusCode: 0,\n      statusMessage: 'OK',\n      body,\n      rawBody: Buffer.isBuffer(data) ? data : Buffer.from(body),\n      parsedBody: data,\n      contentType: {\n        mimeType: 'application/grpc+json',\n        charset: 'UTF-8',\n        contentType: 'application/grpc+json; charset=utf-8',\n      },\n      request: this.request,\n    };\n    if (this.isGrpcError(data)) {\n      response.statusCode = data.code || 2;\n      response.statusMessage = data.details;\n    }\n    return response;\n  }\n\n  private isGrpcError(data: unknown): data is Error & GrpcError {\n    return data instanceof Error;\n  }\n}\n", "import * as grpc from '@grpc/grpc-js';\n\n// Rewire Google's channel implementation to support URL path prefix.\nexport class PathAwareChannel extends grpc.Channel {\n  constructor(\n    address: string,\n    credentials: grpc.ChannelCredentials,\n    options: grpc.ChannelOptions,\n    readonly path: string\n  ) {\n    super(address, credentials, options);\n  }\n\n  createCall(\n    method: string,\n    deadline: grpc.Deadline,\n    host: string | null | undefined,\n    parentCall: null,\n    propagateFlags: number | null | undefined\n  ) {\n    if (this.path) {\n      return super.createCall(`/${this.path}${method}`, deadline, host, parentCall, propagateFlags);\n    }\n    return super.createCall(method, deadline, host, parentCall, propagateFlags);\n  }\n}\n", "import * as utils from '../../utils';\nimport { GrpcRequestClient } from './grpcRequestClient';\nimport { userSessionStore } from '../../store';\n\nexport const parseGrpcLine = utils.parseRequestLineFactory({\n  protocol: 'GRPC',\n  methodRegex: /^\\s*(GRPC)\\s+(?<url>.+?)\\s*$/u,\n  protocolRegex: /^\\s*(?<url>grpc:\\/\\/.+?)\\s*$/iu,\n  requestClientFactory(request, context) {\n    return new GrpcRequestClient(request, context);\n  },\n  modifyRequest(request) {\n    request.supportsStreaming = true;\n  },\n  sessionStore: userSessionStore,\n});\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport async function parseGrpcResponse(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  return utils.parseInlineResponse(\n    getLineReader,\n    context,\n    /^\\s*GRPC\\s*(?<statusCode>([0-9]+))\\s*(-)?\\s*(?<statusMessage>.*)$/u\n  );\n}\n", "import { loadPackageDefinition } from '@grpc/grpc-js';\nimport { load } from '@grpc/proto-loader';\nimport { HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport * as io from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\n\nconst ProtoImport = /^\\s*proto\\s+<\\s+(?<fileName>.+)\\s*$/u;\n\nexport async function parseProtoImport(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n  const next = lineReader.next();\n  if (!next.done) {\n    const matchProto = ProtoImport.exec(next.value.textLine);\n\n    if (matchProto?.groups?.fileName) {\n      const filename = matchProto.groups.fileName;\n      const protoDefinition = new models.ProtoDefinition(filename.trim());\n      protoDefinition.loaderOptions = {};\n\n      const protoSymbol: models.HttpSymbol = new models.HttpSymbol({\n        name: next.value.textLine || 'proto import',\n        description: 'proto import',\n        kind: models.HttpSymbolKind.proto,\n        startLine: next.value.line,\n        startOffset: 0,\n        endLine: next.value.line,\n        endOffset: next.value.textLine.length,\n        children: [\n          new models.HttpSymbol({\n            name: 'filename',\n            description: filename,\n            kind: models.HttpSymbolKind.path,\n            startLine: next.value.line,\n            startOffset: next.value.textLine.indexOf(filename),\n            endLine: next.value.line,\n            endOffset: next.value.textLine.indexOf(filename) + filename.length,\n          }),\n        ],\n      });\n      const symbols = [protoSymbol];\n\n      const result: models.HttpRegionParserResult = {\n        nextParserLine: next.value.line,\n        symbols,\n      };\n\n      const headersResult = await utils.parseSubsequentLines(\n        lineReader,\n        [\n          utils.parseComments,\n          utils.parseRequestHeaderFactory(protoDefinition.loaderOptions),\n          utils.parseDefaultHeadersFactory((headers, context: models.ProtoProcessorContext) => {\n            const loaderOptions = context.options.protoDefinitions?.[protoDefinition.fileName]?.loaderOptions;\n            if (loaderOptions) {\n              Object.assign(loaderOptions, headers);\n            }\n          }),\n        ],\n        context\n      );\n\n      if (headersResult) {\n        result.nextParserLine = headersResult.nextLine || result.nextParserLine;\n        for (const parseResult of headersResult.parseResults) {\n          symbols.push(...parseResult.symbols);\n        }\n      }\n\n      context.httpRegion.hooks.execute.addObjHook(obj => obj.process, new ProtoImportAction(protoDefinition));\n\n      context.httpRegion.hooks.execute.addInterceptor(new ProtoDefinitionCreationInterceptor(protoDefinition));\n      return result;\n    }\n  }\n  return false;\n}\n\nexport class ProtoImportAction {\n  id = 'proto';\n\n  constructor(private readonly protoDefinition: models.ProtoDefinition) {}\n\n  async process(context: models.ProtoProcessorContext): Promise<boolean> {\n    utils.report(context, `import proto ${this.protoDefinition.fileName}`);\n    const definition = context.options.protoDefinitions?.[this.protoDefinition.fileName];\n    if (definition && io.userInteractionProvider.isTrusted('Proto-Loader')) {\n      const options = await this.convertLoaderOptions(context, definition.loaderOptions);\n      definition.packageDefinition = await utils.replaceFilePath(\n        this.protoDefinition.fileName,\n        context,\n        async (path: models.PathLike) => {\n          const fsPath = io.fileProvider.fsPath(path);\n          if (fsPath) {\n            return await load(fsPath, options);\n          }\n          const message = `file ${path} has not scheme file`;\n          io.userInteractionProvider.showWarnMessage?.(message);\n          io.log.warn(message);\n\n          return undefined;\n        }\n      );\n      if (definition.packageDefinition) {\n        definition.grpcObject = loadPackageDefinition(definition.packageDefinition);\n      }\n    }\n    return true;\n  }\n\n  private async convertLoaderOptions(context: models.ProcessorContext, loaderOptions?: Record<string, unknown>) {\n    const options = { ...loaderOptions };\n\n    const optionsScript = utils.toMultiLineString(\n      Object.entries(options)\n        .filter(([, value]) => utils.isString(value))\n        .map(([key, value]) => `${key}: ${value},`)\n    );\n    try {\n      Object.assign(options, await io.javascriptProvider.evalExpression(`{${optionsScript}}`, context));\n    } catch (err) {\n      const message = `proto-loader options convert failed: ${optionsScript}`;\n      io.userInteractionProvider.showWarnMessage?.(message);\n      io.log.warn(message, err);\n    }\n    return options;\n  }\n}\n\ntype ExecuteInterceptor = HookInterceptor<[models.ProtoProcessorContext], boolean | void>;\n\nexport class ProtoDefinitionCreationInterceptor implements ExecuteInterceptor {\n  id = 'proto';\n\n  constructor(private readonly protoDefinition: models.ProtoDefinition) {}\n\n  async beforeLoop(\n    hookContext: HookTriggerContext<[models.ProtoProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const context = hookContext.args[0];\n    context.options.protoDefinitions = Object.assign({}, context.options.protoDefinitions, {\n      [this.protoDefinition.fileName]: {\n        fileName: this.protoDefinition.fileName,\n        loaderOptions: {\n          ...this.protoDefinition.loaderOptions,\n        },\n      },\n    });\n\n    return true;\n  }\n}\n", "import { log } from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport * as grpc from '@grpc/grpc-js';\nimport { GrpcReflection } from 'grpc-js-reflection-client';\nimport { loadPackageDefinition } from '@grpc/grpc-js';\nimport { GrpcRequest, isGrpcRequest } from './grpcRequest';\n\nexport function grpcReflectionMetaDataHandler(type: string, server: string | undefined, context: models.ParserContext) {\n  if (type === 'grpcReflection' && server) {\n    context.httpRegion.hooks.onRequest.addHook(\n      'grpcReflection',\n      async (request: models.Request, context: models.ProtoProcessorContext) => {\n        if (!isGrpcRequest(request)) {\n          return;\n        }\n        utils.report(context, 'grpc reflection');\n\n        if (server) {\n          try {\n            const protoDefinitions = await loadGrpcProtoDefinitionsWithReflection(server, request);\n\n            if (context.options.protoDefinitions) {\n              Object.assign(context.options.protoDefinitions, protoDefinitions);\n            } else {\n              context.options.protoDefinitions = protoDefinitions;\n            }\n          } catch (err) {\n            log.debug('error in grpc reflection', err);\n          }\n        }\n      }\n    );\n    return true;\n  }\n  return false;\n}\nexport async function loadGrpcProtoDefinitionsWithReflection(\n  host: string,\n  request: GrpcRequest\n): Promise<Record<string, models.ProtoDefinition>> {\n  const reflectionClient = new GrpcReflection(host, request.channelCredentials || grpc.credentials.createInsecure());\n\n  const serviceNames = await reflectionClient.listServices();\n  log.debug('grpc reflection', serviceNames);\n\n  const protoDefinitions: Record<string, models.ProtoDefinition> = {};\n  for (const serviceName of serviceNames) {\n    if (!serviceName.startsWith('grpc.reflection')) {\n      const descriptor = await reflectionClient.getDescriptorBySymbol(serviceName);\n\n      const packageDefinition = descriptor.getPackageDefinition();\n\n      const grpcObject = loadPackageDefinition(packageDefinition);\n\n      protoDefinitions[serviceName] = {\n        fileName: serviceName,\n        loaderOptions: {},\n        grpcObject,\n        packageDefinition,\n      };\n    }\n  }\n  return protoDefinitions;\n}\n", "import './completionItemProvider';\n\nimport * as grpc from '@grpc/grpc-js';\n\nimport { javascriptProvider } from '../../io';\nimport * as models from '../../models';\nimport { callOptionsRequestHook } from './callOptionsRequestHook';\nimport { channelCredentialsRequestHook } from './channelCredentialsRequestHook';\nimport { channelOptionsRequestHook } from './channelOptionsRequestHook';\nimport { parseGrpcLine } from './grpcHttpRegionParser';\nimport { parseGrpcResponse } from './grpcResponseHttpRegionParser';\nimport { parseProtoImport } from './protoHttpRegionParser';\nimport { grpcReflectionMetaDataHandler } from './grpcReflectionMetaDataHandler';\nimport { grpcReflectionRequestHook } from './grpcReflectionRequestHook';\n\nexport function registerGrpcPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.parseMetaData.addHook('grpcReflection', grpcReflectionMetaDataHandler);\n  api.hooks.parse.addHook('proto', parseProtoImport, { before: ['request'] });\n  api.hooks.parse.addHook('grpc', parseGrpcLine, { before: ['request'] });\n  api.hooks.parse.addHook('grpcResponse', parseGrpcResponse, { before: ['requestBody'] });\n  api.hooks.onRequest.addHook('channelOptions', channelOptionsRequestHook);\n  api.hooks.onRequest.addHook('channelCredentials', channelCredentialsRequestHook);\n  api.hooks.onRequest.addHook('callOptions', callOptionsRequestHook);\n  api.hooks.onRequest.addHook('grpcReflectionRequestHook', grpcReflectionRequestHook);\n  javascriptProvider.require['@grpc/grpc-js'] = grpc;\n}\n", "import { log } from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { isGrpcRequest } from './grpcRequest';\nimport { GrpcUrlRegex } from './createGrpcService';\nimport { loadGrpcProtoDefinitionsWithReflection } from './grpcReflectionMetaDataHandler';\n\nexport async function grpcReflectionRequestHook(request: models.Request, context: models.ProtoProcessorContext) {\n  if (isGrpcRequest(request)) {\n    utils.report(context, 'grpc reflection');\n\n    const host = GrpcUrlRegex.exec(request.url)?.groups?.server;\n    if (!host) {\n      return;\n    }\n    if (context.options.protoDefinitions && Object.keys(context.options.protoDefinitions).length > 0) {\n      return;\n    }\n    try {\n      const protoDefinitions = await loadGrpcProtoDefinitionsWithReflection(host, request);\n\n      if (Object.keys(protoDefinitions).length === 0) {\n        return;\n      }\n      if (context.options.protoDefinitions) {\n        Object.assign(context.options.protoDefinitions, protoDefinitions);\n      } else {\n        context.options.protoDefinitions = protoDefinitions;\n      }\n    } catch (err) {\n      log.debug('error in grpc reflection', err);\n    }\n  }\n}\n", "import aws4 from 'aws4';\nimport { URL } from 'url';\n\nimport { ProcessorContext } from '../../models';\nimport * as utils from '../../utils';\n\nexport async function awsAuthVariableReplacer(\n  text: unknown,\n  type: string,\n  context: ProcessorContext\n): Promise<unknown> {\n  const { request } = context;\n  if (type.toLowerCase() === 'authorization' && utils.isString(text) && utils.isHttpRequest(request) && request?.url) {\n    const match =\n      /^\\s*(aws)\\s+(?<accessKeyId>[^\\s]*)\\s+(?<secretAccessKey>[^\\s]*)\\s*(token:\\s*(?<token>[^\\s]*))?\\s*(region:\\s*(?<region>[^\\s]*))?\\s*(service:\\s*(?<service>[^\\s]*))?\\s*$/iu.exec(\n        text\n      );\n\n    if (match && match.groups && match.groups.accessKeyId && match.groups.secretAccessKey) {\n      utils.report(context, `get AWS Authorization`);\n      const credentials = {\n        accessKeyId: match.groups.accessKeyId,\n        secretAccessKey: match.groups.secretAccessKey,\n        sessionToken: match.groups.token,\n      };\n      const url = new URL(request.url);\n      if (!request.headers) {\n        request.headers = {};\n      }\n      const requestOptions: aws4.Request = {\n        method: request.method,\n        headers: request.headers,\n        host: url.host,\n        path: `${url.pathname}${url.search}`,\n        region: match.groups.region,\n        service: match.groups.service,\n        body: Buffer.isBuffer(request.body) || utils.isString(request.body) ? request.body : undefined,\n      };\n      const result = await aws4.sign(requestOptions, credentials);\n\n      Object.assign(request, { http2: false });\n      Object.assign(request.headers, result.headers);\n      return result.headers?.Authorization;\n    }\n  }\n  return text;\n}\n", "import { isString } from '../../utils';\n\nconst BasicAuth = /^\\s*(basic)\\s+(?<user>[^\\s]*)\\s+(?<password>([^\\s]+.*))$/iu;\nconst BasicAuthColon = /^\\s*(basic)\\s+(?<user>.*):(?<password>.*)$/iu;\nexport async function basicAuthVariableReplacer(text: unknown | undefined, type: string): Promise<unknown> {\n  if (type.toLowerCase() === 'authorization' && isString(text)) {\n    const match = BasicAuthColon.exec(text) || BasicAuth.exec(text);\n\n    if (match && match.groups && match.groups.user) {\n      return `Basic ${Buffer.from(`${match.groups.user}:${match.groups.password}`).toString('base64')}`;\n    }\n  }\n  return text;\n}\n", "import { URL } from 'url';\n\nimport { fileProvider } from '../../io';\nimport * as models from '../../models';\nimport { isHttpRequest, isString, toAbsoluteFilename } from '../../utils';\n\nexport async function clientCertVariableReplacer(\n  text: unknown,\n  type: models.VariableType | string,\n  context: models.ProcessorContext\n): Promise<unknown> {\n  const { request, httpRegion, httpFile } = context;\n  if (isString(text) && isHttpRequest(request) && !httpRegion.metaData.noClientCert) {\n    if (type === models.VariableType.url && context.config?.clientCertificates) {\n      await addClientCertificateForUrl(text, request, context);\n    } else if (type.toLowerCase().endsWith('clientcert')) {\n      const match =\n        /^\\s*(cert:\\s*(?<cert>[^\\s]*)\\s*)?(key:\\s*(?<key>[^\\s]*)\\s*)?(pfx:\\s*(?<pfx>[^\\s]*)\\s*)?(passphrase:\\s*(?<passphrase>[^\\s]*)\\s*)?\\s*$/u.exec(\n          text\n        );\n      if (match?.groups?.cert || match?.groups?.pfx) {\n        await setClientCertificateOptions(\n          request,\n          {\n            cert: match.groups.cert,\n            key: match.groups.key,\n            pfx: match.groups.pfx,\n            passphrase: match.groups.passphrase,\n          },\n          httpFile\n        );\n        return undefined;\n      }\n    }\n  }\n  return text;\n}\n\nasync function addClientCertificateForUrl(\n  urlString: string,\n  request: models.HttpRequest,\n  context: models.ProcessorContext\n) {\n  const url = createUrl(urlString);\n  if (url && context.config?.clientCertificates) {\n    const clientCertificateOptions = context.config?.clientCertificates[url.host];\n    if (clientCertificateOptions) {\n      await setClientCertificateOptions(request, clientCertificateOptions, context.httpFile);\n    }\n  }\n}\n\nfunction createUrl(url: string): URL | undefined {\n  try {\n    return new URL(url);\n  } catch (err) {\n    return undefined;\n  }\n}\n\nasync function setClientCertificateOptions(\n  request: models.HttpRequest,\n  clientCertificateOptions: models.ClientCertificateOptions,\n  httpFile: models.HttpFile\n) {\n  const dir = fileProvider.dirname(httpFile.fileName);\n  if (!request.options) {\n    request.options = {};\n  }\n  request.options.https = Object.assign({}, request.options.https, {\n    certificate: await resolveFile(clientCertificateOptions.cert, dir),\n    key: await resolveFile(clientCertificateOptions.key, dir),\n    pfx: await resolveFile(clientCertificateOptions.pfx, dir),\n    passphrase: clientCertificateOptions.passphrase,\n  });\n}\n\nasync function resolveFile(\n  fileName: models.PathLike | undefined,\n  dir: models.PathLike | undefined\n): Promise<Buffer | undefined> {\n  if (fileName) {\n    if (isString(fileName)) {\n      const file = await toAbsoluteFilename(fileName, dir);\n      if (file) {\n        return await fileProvider.readBuffer(file);\n      }\n    } else {\n      return await fileProvider.readBuffer(fileName);\n    }\n  }\n  return undefined;\n}\n", "import { completionItemProvider } from '../../io';\nimport { isHttpRequest } from '../../utils';\n\ncompletionItemProvider.emptyLineProvider.push(() => [\n  {\n    name: 'GET',\n    description:\n      'The GET method requests a representation of the specified resource. Requests using GET should only retrieve data.',\n  },\n  {\n    name: 'HEAD',\n    description:\n      'The GET method requests a representation of the specified resource. Requests using GET should only retrieve data.',\n  },\n  {\n    name: 'POST',\n    description:\n      'The POST method is used to submit an entity to the specified resource, often causing a change in state or side effects on the server.',\n  },\n  {\n    name: 'PUT',\n    description: 'The PUT method replaces all current representations of the target resource with the request payload.',\n  },\n  {\n    name: 'DELETE',\n    description: 'The DELETE method deletes the specified resource.',\n  },\n  {\n    name: 'CONNECT',\n    description: 'The CONNECT method establishes a tunnel to the server identified by the target resource.',\n  },\n  {\n    name: 'OPTIONS',\n    description: 'The OPTIONS method is used to describe the communication options for the target resource.',\n  },\n  {\n    name: 'TRACE',\n    description: 'The TRACE method performs a message loop-back test along the path to the target resource.',\n  },\n  {\n    name: 'PATCH',\n    description: 'The PATCH method is used to apply partial modifications to a resource.',\n  },\n]);\n\ncompletionItemProvider.requestHeaderProvider.push(request => {\n  if (isHttpRequest(request)) {\n    return [\n      {\n        name: 'A-IM',\n        description: 'Acceptable instance-manipulations for the request.',\n      },\n      {\n        name: 'Accept',\n        description: 'Media type(s)\u00A0that is/are acceptable for the response. See\u00A0Content negotiation.',\n      },\n      {\n        name: 'Accept-Charset',\n        description: 'Character sets that are acceptable.',\n      },\n      {\n        name: 'Accept-Datetime',\n        description: 'Acceptable version in time.',\n      },\n      {\n        name: 'Accept-Encoding',\n        description: 'List of acceptable encodings. See\u00A0HTTP compression.',\n      },\n      {\n        name: 'Accept-Language',\n        description: 'List of acceptable human languages for response. See\u00A0Content negotiation.',\n      },\n      {\n        name: 'Access-Control-Request-Method',\n        description: 'Initiates a request for\u00A0cross-origin resource sharing\u00A0with\u00A0Origin\u00A0(below).',\n      },\n      {\n        name: 'Access-Control-Request-Headers',\n        description: 'Initiates a request for\u00A0cross-origin resource sharing\u00A0with\u00A0Origin\u00A0(below).',\n      },\n      {\n        name: 'Authorization',\n        description: 'Authentication credentials for\u00A0HTTP authentication.',\n      },\n      {\n        name: 'Cache-Control',\n        description:\n          'Used to specify directives that\u00A0must\u00A0be obeyed by all caching mechanisms along the request-response chain.',\n      },\n      {\n        name: 'Connection',\n        description:\n          'Control options for the current connection and list of hop-by-hop request fields. Must not be used with HTTP/2.',\n      },\n      {\n        name: 'Content-Encoding',\n        description: 'The type of encoding used on the data. See\u00A0HTTP compression.',\n      },\n      {\n        name: 'Content-Length',\n        description: 'The length of the request body in\u00A0octets\u00A0(8-bit bytes).',\n      },\n      {\n        name: 'Content-MD5',\n        description: 'A\u00A0Base64-encoded binary\u00A0MD5\u00A0sum of the content of the request body.',\n      },\n      {\n        name: 'Content-Type',\n        description: 'The\u00A0Media type\u00A0of the body of the request (used with POST and PUT requests).',\n      },\n      {\n        name: 'Cookie',\n        description: 'An\u00A0HTTP cookie\u00A0previously sent by the server with\u00A0Set-Cookie\u00A0(below).',\n      },\n      {\n        name: 'Date',\n        description:\n          'The date and time at which the message was originated (in \"HTTP-date\" format as defined by\u00A0RFC 7231 Date/Time Formats).',\n      },\n      {\n        name: 'Expect',\n        description: 'Indicates that particular server behaviors are required by the client.',\n      },\n      {\n        name: 'Forwarded',\n        description: 'Disclose original information of a client connecting to a web server through an HTTP proxy.',\n      },\n      {\n        name: 'From',\n        description: 'The email address of the user making the request.',\n      },\n      {\n        name: 'Host',\n        description:\n          'The domain name of the server (for\u00A0virtual hosting), and the\u00A0TCP port\u00A0number on which the server is listening. The\u00A0port\u00A0number may be omitted if the port is the standard port for the service requested. Mandatory since HTTP/1.1.\u00A0If the request is generated directly in HTTP/2, it should not be used.',\n      },\n      {\n        name: 'HTTP2-Settings',\n        description:\n          'A request that upgrades from HTTP/1.1 to HTTP/2 MUST include exactly one\u00A0HTTP2-Setting\u00A0header field. The\u00A0HTTP2-Settings\u00A0header field is a connection-specific header field that includes parameters that govern the HTTP/2 connection, provided in anticipation of the server accepting the request to upgrade.',\n      },\n      {\n        name: 'If-Match',\n        description:\n          'Only perform the action if the client supplied entity matches the same entity on the server. This is mainly for methods like PUT to only update a resource if it has not been modified since the user last updated it.',\n      },\n      {\n        name: 'If-Modified-Since',\n        description: 'Allows a\u00A0304 Not Modified\u00A0to be returned if content is unchanged.',\n      },\n      {\n        name: 'If-None-Match',\n        description: 'Allows a\u00A0304 Not Modified\u00A0to be returned if content is unchanged, see\u00A0HTTP ETag.',\n      },\n      {\n        name: 'If-Range',\n        description:\n          'If the entity is unchanged, send me the part(s) that I am missing; otherwise, send me the entire new entity.',\n      },\n      {\n        name: 'If-Unmodified-Since',\n        description: 'Only send the response if the entity has not been modified since a specific time.',\n      },\n      {\n        name: 'Max-Forwards',\n        description: 'Limit the number of times the message can be forwarded through proxies or gateways.',\n      },\n      {\n        name: 'Origin',\n        description:\n          'Initiates a request for\u00A0cross-origin resource sharing\u00A0(asks server for\u00A0Access-Control-*\u00A0response fields).',\n      },\n      {\n        name: 'Pragma',\n        description:\n          'Implementation-specific fields that may have various effects anywhere along the request-response chain.',\n      },\n      {\n        name: 'Proxy-Authorization',\n        description: 'Authorization credentials for connecting to a proxy.',\n      },\n      {\n        name: 'Range',\n        description: 'Request only part of an entity. Bytes are numbered from 0. See\u00A0Byte serving.',\n      },\n      {\n        name: 'Referer',\n        description:\n          'This is the address of the previous web page from which a link to the currently requested page was followed. (The word \"referrer\" has been misspelled in the RFC as well as in most implementations to the point that it has become standard usage and is considered correct terminology)',\n      },\n      {\n        name: 'TE',\n        description:\n          'The transfer encodings the user agent is willing to accept: the same values as for the response header field Transfer-Encoding can be used, plus the \"trailers\" value (related to the \"chunked\" transfer method) to notify the server it expects to receive additional fields in the trailer after the last, zero-sized, chunk. Only\u00A0trailers\u00A0is supported in HTTP/2.',\n      },\n      {\n        name: 'Trailer',\n        description:\n          'The Trailer general field value indicates that the given set of header fields is present in the trailer of a message encoded with\u00A0chunked transfer coding.',\n      },\n      {\n        name: 'Transfer-Encoding',\n        description:\n          'The form of encoding used to safely transfer the entity to the user.\u00A0Currently defined methods\u00A0are:\u00A0chunked, compress, deflate, gzip, identity. Must not be used with HTTP/2',\n      },\n      {\n        name: 'User-Agent',\n        description: 'The\u00A0user agent string\u00A0of the user agent.',\n      },\n      {\n        name: 'Upgrade',\n        description: 'Ask the server to upgrade to another protocol. Must not be used in HTTP/2.',\n      },\n      {\n        name: 'Via',\n        description: 'Informs the server of proxies through which the request was sent.',\n      },\n      {\n        name: 'Warning',\n        description: 'A general warning about possible problems with the entity body.',\n      },\n      {\n        name: 'Upgrade-Insecure-Requests',\n        description:\n          'Tells a server which (presumably in the middle of a HTTP -> HTTPS migration) hosts mixed content that the client would prefer redirection to HTTPS and can handle\u00A0Content-Security-Policy: upgrade-insecure-requests Must not be used with HTTP/2',\n      },\n      {\n        name: 'X-Requested-With',\n        description:\n          'Mainly used to identify\u00A0Ajax\u00A0requests (most\u00A0JavaScript frameworks\u00A0send this field with value of\u00A0XMLHttpRequest); also identifies Android apps using WebView',\n      },\n      {\n        name: 'DNT',\n        description:\n          'Requests a web application to disable their tracking of a user. This is Mozilla`s version of the X-Do-Not-Track header field (since\u00A0Firefox 4.0\u00A0Beta 11).\u00A0Safari\u00A0and\u00A0IE9\u00A0also have support for this field.\u00A0On March 7, 2011, a draft proposal was submitted to IETF.\u00A0The\u00A0W3C\u00A0Tracking Protection Working Group is producing a specification.',\n      },\n      {\n        name: 'X-Forwarded-For',\n        description:\n          'A\u00A0de facto\u00A0standard\u00A0for identifying the originating IP address of a client connecting to a web server through an HTTP proxy or load balancer. Superseded by\u00A0Forwarded\u00A0header.',\n      },\n      {\n        name: 'X-Forwarded-Host',\n        description:\n          'A\u00A0de facto\u00A0standard\u00A0for identifying the original host requested by the client in the\u00A0Host\u00A0HTTP request header, since the host name and/or port of the reverse proxy (load balancer) may differ from the origin server handling the request. Superseded by\u00A0Forwarded\u00A0header.',\n      },\n      {\n        name: 'X-Forwarded-Proto',\n        description:\n          'A\u00A0de facto\u00A0standard\u00A0for identifying the originating protocol of an HTTP request, since a reverse proxy (or a load balancer) may communicate with a web server using HTTP even if the request to the reverse proxy is HTTPS. An alternative form of the header (X-ProxyUser-Ip) is used by Google clients talking to Google servers. Superseded by\u00A0Forwarded\u00A0header.',\n      },\n      {\n        name: 'Front-End-Https',\n        description: 'Non-standard header field used by Microsoft applications and load-balancers',\n      },\n      {\n        name: 'X-Http-Method-Override',\n        description:\n          'Requests a web application to override the method specified in the request (typically POST) with the method given in the header field (typically PUT or DELETE). This can be used when a user agent or firewall prevents PUT or DELETE methods from being sent directly (note that this is either a bug in the software component, which ought to be fixed, or an intentional configuration, in which case bypassing it may be the wrong thing to do).',\n      },\n      {\n        name: 'X-ATT-DeviceId',\n        description:\n          'Allows easier parsing of the MakeModel/Firmware that is usually found in the User-Agent String of AT&T Devices',\n      },\n      {\n        name: 'X-Wap-Profile',\n        description:\n          'Links to an XML file on the Internet with a full description and details about the device currently connecting. In the example to the right is an XML file for an AT&T Samsung Galaxy S2.',\n      },\n      {\n        name: 'Proxy-Connection',\n        description:\n          'Implemented as a misunderstanding of the HTTP specifications. Common because of mistakes in implementations of early HTTP versions. Has exactly the same functionality as standard Connection field. Must not be used with HTTP/2.',\n      },\n      {\n        name: 'X-UIDH',\n        description:\n          'Server-side\u00A0deep packet insertion\u00A0of a unique ID identifying customers of\u00A0Verizon Wireless; also known as \"perma-cookie\" or \"supercookie\"',\n      },\n      {\n        name: 'X-Csrf-Token',\n        description:\n          'Used to prevent\u00A0cross-site request forgery. Alternative header names are:\u00A0X-CSRFToken\u00A0and\u00A0X-XSRF-TOKEN',\n      },\n      {\n        name: 'X-Request-ID',\n        description: 'Correlates HTTP requests between a client and server.',\n      },\n      {\n        name: 'X-Correlation-ID',\n        description: 'Correlates HTTP requests between a client and server.',\n      },\n      {\n        name: 'Save-Data',\n        description:\n          'The Save-Data client hint request header available in Chrome, Opera, and Yandex browsers lets developers deliver lighter, faster applications to users who opt-in to data saving mode in their browser.',\n      },\n    ];\n  }\n  return [];\n});\n", "import { HookInterceptor, HookTriggerContext } from 'hookpoint';\nimport { Cookie, CookieJar, MemoryCookieStore } from 'tough-cookie';\n\nimport { log } from '../../io';\nimport * as models from '../../models';\nimport { userSessionStore } from '../../store';\nimport * as utils from '../../utils';\n\nexport interface CookieSession extends models.UserSession {\n  cookie?: Cookie;\n}\n\nexport class CookieJarInterceptor implements HookInterceptor<[models.ProcessorContext], boolean | void> {\n  id = 'cookieJar';\n  async beforeTrigger(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const { request, httpRegion, config, options } = hookContext.args[0];\n\n    if (utils.isHttpRequest(request) && !httpRegion.metaData.noCookieJar && config?.cookieJarEnabled) {\n      const idPrefix = this.getCookieStorePrefix(hookContext.args[0]);\n      const cookieSessions: Array<CookieSession> = userSessionStore.userSessions.filter(\n        obj => obj.type === 'Cookie' && obj.id.startsWith(idPrefix)\n      );\n\n      const memoryStore = new MemoryCookieStore();\n      for (const cookieSession of cookieSessions) {\n        if (cookieSession.cookie) {\n          memoryStore.putCookie(cookieSession.cookie, err => {\n            if (err) {\n              log.info(err);\n            }\n          });\n        }\n      }\n      options.memoryStore = memoryStore;\n      const cookieJarOptions = {};\n      if (config.cookieJarEnabled !== true) {\n        Object.assign(cookieJarOptions, config.cookieJarEnabled);\n      }\n      const jar = new CookieJar(memoryStore, cookieJarOptions);\n      if (!request.options) {\n        request.options = {};\n      }\n      request.options.cookieJar = jar;\n    }\n    return true;\n  }\n  async afterTrigger(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const { options } = hookContext.args[0];\n\n    const memoryStore = options.memoryStore;\n\n    if (memoryStore && memoryStore instanceof MemoryCookieStore) {\n      memoryStore.getAllCookies((err, cookies) => {\n        if (!err) {\n          for (const cookie of cookies) {\n            const cookieSession: CookieSession = {\n              id: `${this.getCookieStorePrefix(hookContext.args[0])}_${cookie.toString()}`,\n              title: `${cookie.domain} ${cookie.path} ${cookie.key}`,\n              description: `${cookie}`,\n              type: 'Cookie',\n              details: Object.fromEntries(\n                Object.entries(cookie)\n                  .map(([key, value]) => {\n                    if (value) {\n                      if (value instanceof Date) {\n                        return [key, value.toISOString()];\n                      }\n                      return [key, value];\n                    }\n                    return [];\n                  })\n                  .filter(obj => obj.length > 0)\n              ),\n              cookie,\n            };\n            userSessionStore.setUserSession(cookieSession);\n          }\n        }\n      });\n\n      const cookieSessions: Array<CookieSession> = userSessionStore.userSessions.filter(obj => obj.type === 'Cookie');\n\n      for (const cookieSession of cookieSessions) {\n        if (cookieSession.cookie) {\n          memoryStore.putCookie(cookieSession.cookie, err => {\n            if (err) {\n              log.info(err);\n            }\n          });\n        }\n      }\n    }\n    return true;\n  }\n  private getCookieStorePrefix(context: models.ProcessorContext) {\n    return `Cookies_${utils.toEnvironmentKey(context.activeEnvironment)}_${\n      context.httpFile.rootDir?.toString?.() || 'none'\n    }`;\n  }\n}\n", "import { CookieJar } from 'tough-cookie';\n\nimport { ProcessorContext } from '../../models';\nimport { isHttpRequest, isString } from '../../utils';\n\nexport async function cookieVariableReplacer(text: unknown, type: string, context: ProcessorContext): Promise<unknown> {\n  const { request } = context;\n  if (\n    type.toLowerCase() === 'cookie' &&\n    isHttpRequest(request) &&\n    request.url &&\n    request.options?.cookieJar instanceof CookieJar\n  ) {\n    if (isString(text)) {\n      request.options.cookieJar.setCookie(text, request.url);\n    } else if (Array.isArray(text)) {\n      for (const val of text) {\n        await request.options.cookieJar.setCookie(val, request.url);\n      }\n    }\n    return undefined;\n  }\n  return text;\n}\n", "import { createHash } from 'crypto';\nimport type { CancelableRequest, OptionsOfUnknownResponseBody, Response } from 'got';\nimport { URL } from 'url';\nimport { v4 as uuid } from 'uuid';\n\nimport { ProcessorContext } from '../../models';\nimport { isHttpRequest, isString, logResponse } from '../../utils';\nimport { toHttpResponse } from './gotUtils';\n\nconst DigestAuth = /^\\s*(digest)\\s+(?<user>[^\\s]*)\\s+(?<password>([^\\s]+.*))$/iu;\nconst DigestAuthColon = /^\\s*(digest)\\s+(?<user>.*):(?<password>.*)$/iu;\nexport async function digestAuthVariableReplacer(\n  text: unknown,\n  type: string,\n  context: ProcessorContext\n): Promise<unknown> {\n  const { request } = context;\n  if (type.toLowerCase() === 'authorization' && isString(text) && isHttpRequest(request)) {\n    const match = DigestAuthColon.exec(text) || DigestAuth.exec(text);\n    if (match && match.groups && match.groups.user && match.groups.password) {\n      if (!request.options) {\n        request.options = {};\n      }\n      if (!request.options.hooks) {\n        request.options.hooks = {};\n      }\n      if (!request.options.hooks.afterResponse) {\n        request.options.hooks.afterResponse = [];\n      }\n      request.options.hooks.afterResponse.push(digestFactory(match.groups.user, match.groups.password, context));\n      return undefined;\n    }\n  }\n  return text;\n}\n\nfunction digestFactory(username: string, password: string, context: ProcessorContext) {\n  return async function digestAfterResponse(\n    response: Response,\n    retryWithMergedOptions: (options: OptionsOfUnknownResponseBody) => CancelableRequest<Response>\n  ) {\n    const wwwAuthenticate = response.headers['www-authenticate'];\n    if (response.statusCode === 401 && wwwAuthenticate && wwwAuthenticate.toLowerCase().startsWith('digest')) {\n      const httpResponse = toHttpResponse(response, { url: response.request.requestUrl });\n      await logResponse(httpResponse, context);\n\n      const url = new URL(response.url);\n      const challenge = {\n        qop: '',\n        algorithm: '',\n        realm: '',\n        nonce: '',\n        opaque: '',\n      };\n\n      /* see https://github.com/request/request/blob/master/lib/auth.js#L63-L123*/\n      updateChallenge(challenge, wwwAuthenticate);\n\n      const qop = /(^|,)\\s*auth\\s*($|,)/u.test(challenge.qop) && 'auth';\n      const nc = qop && '00000001';\n      const cnonce = qop && uuid().replace(/-/gu, '');\n      const ha1 = ha1Compute(challenge.algorithm, username, password, challenge.realm, challenge.nonce, cnonce);\n      const ha2 = md5(`${response.request.options.method}:${url.pathname}`);\n      const digestResponse = qop\n        ? md5(`${ha1}:${challenge.nonce}:${nc}:${cnonce}:${qop}:${ha2}`)\n        : md5(`${ha1}:${challenge.nonce}:${ha2}`);\n\n      return retryWithMergedOptions({\n        headers: {\n          authorization: `Digest ${createDigestHeader({\n            username,\n            realm: challenge.realm,\n            nonce: challenge.nonce,\n            uri: url.pathname,\n            qop,\n            response: digestResponse,\n            nc,\n            cnonce,\n            algorithm: challenge.algorithm,\n            opaque: challenge.opaque,\n          })}`,\n        },\n      });\n    }\n\n    return response;\n  };\n}\n\nfunction createDigestHeader(authValues: Record<string, string | boolean>) {\n  const authParams: string[] = [];\n  for (const [key, value] of Object.entries(authValues)) {\n    if (value) {\n      if (['qop', 'nc', 'algorithm'].indexOf(key) >= 0) {\n        authParams.push(`${key}=${value}`);\n      } else {\n        authParams.push(`${key}=\"${value}\"`);\n      }\n    }\n  }\n  return authParams.join(', ');\n}\n\nfunction md5(value: string | Buffer) {\n  // lgtm [js/weak-cryptographic-algorithm, js/insufficient-password-hash]\n  return createHash('md5').update(value).digest('hex');\n}\n\nfunction ha1Compute(\n  algorithm: string | undefined,\n  username: string,\n  password: string,\n  realm: string,\n  nonce: string,\n  cnonce: string | false\n) {\n  const ha1 = md5(`${username}:${realm}:${password}`);\n  if (cnonce && algorithm?.toLowerCase() === 'md5-sess') {\n    return md5(`${ha1}:${nonce}:${cnonce}`);\n  }\n  return ha1;\n}\n\nfunction updateChallenge(challenge: Record<string, string>, wwwAuthenticate: string) {\n  for (const item of wwwAuthenticate.split(',')) {\n    const match = /([a-z0-9_-]+)=(?:\"([^\"]+)\"|([a-z0-9_-]+))/giu.exec(item);\n    if (match) {\n      challenge[match[1]] = match[2] || match[3];\n    }\n  }\n}\n", "import { filesize } from 'filesize';\nimport { CancelError, default as got, OptionsOfUnknownResponseBody, Response } from 'got';\nimport { HttpProxyAgent } from 'http-proxy-agent';\nimport { HttpsProxyAgent } from 'https-proxy-agent';\nimport merge from 'lodash/merge';\nimport { SocksProxyAgent } from 'socks-proxy-agent';\n\nimport { log } from '../../io';\nimport * as models from '../../models';\nimport { parseContentType, toString } from '../../utils';\n\nexport async function gotHttpClient(\n  request: models.HttpClientRequest,\n  context: models.HttpClientContext\n): Promise<models.HttpResponse | false> {\n  try {\n    const options = getClientOptions(request, context);\n\n    const cancelableRequest = got(request.url || '', options);\n    const response = await cancelableRequest;\n    return toHttpResponse(response, request);\n  } catch (err) {\n    if (err instanceof CancelError) {\n      return false;\n    }\n    throw err;\n  }\n}\n\nexport function getClientOptions(\n  request: models.HttpRequest,\n  context: models.HttpClientContext\n): OptionsOfUnknownResponseBody {\n  const { config } = context;\n\n  const options: OptionsOfUnknownResponseBody = merge(\n    {\n      decompress: true,\n      retry: 0,\n      throwHttpErrors: false,\n      allowGetBody: true,\n    },\n    config?.request,\n    {\n      method: request.method,\n      headers: request.headers,\n      body: request.body,\n      timeout: request.timeout,\n    },\n    request.options\n  );\n\n  if (request.noRedirect) {\n    options.followRedirect = false;\n  }\n  if (request.noRejectUnauthorized) {\n    options.https = request.options?.https || {};\n    options.https.rejectUnauthorized = false;\n  }\n  initProxy(options, request.proxy);\n  ensureStringHeaders(options.headers);\n\n  log.debug('request', options);\n  return options;\n}\n\nfunction initProxy(options: OptionsOfUnknownResponseBody, proxy: string | undefined) {\n  if (proxy) {\n    if (proxy.startsWith('socks://')) {\n      const socksProxy = new SocksProxyAgent(proxy);\n      options.agent = {\n        http: socksProxy,\n        https: socksProxy,\n      };\n    } else {\n      options.agent = {\n        http: new HttpProxyAgent(proxy),\n        https: new HttpsProxyAgent(proxy),\n      };\n    }\n  }\n}\nfunction ensureStringHeaders(headers?: Record<string, unknown>) {\n  if (headers) {\n    for (const [header, val] of Object.entries(headers)) {\n      if (typeof val !== 'undefined') {\n        let result: string | string[];\n        if (Array.isArray(val)) {\n          result = val.map(obj => toString(obj) || obj);\n        } else {\n          result = toString(val) || '';\n        }\n        headers[header] = result;\n      }\n    }\n  }\n}\n\nexport function toHttpResponse(response: Response<unknown>, request: models.Request) {\n  return {\n    name: `${response.statusCode} - ${request.method || 'GET'} ${request.url}`,\n    statusCode: response.statusCode,\n    protocol: `HTTP/${response.httpVersion}`,\n    statusMessage: response.statusMessage,\n    body: response.body,\n    rawHeaders: response.rawHeaders,\n    rawBody: response.rawBody,\n    headers: response.headers,\n    timings: response.timings.phases,\n    httpVersion: response.httpVersion,\n    request: {\n      protocol: 'HTTP',\n      method: response.request.options.method,\n      url: `${response.request.options.url}`,\n      headers: response.request.options.headers,\n      body: getBody(response.request.options.body),\n    },\n    contentType: parseContentType(response.headers),\n    meta: {\n      ip: response.ip,\n      redirectUrls: response.redirectUrls,\n      size: filesize(\n        response.rawHeaders.map(obj => obj.length).reduce((size, current) => size + current, 0) +\n          (response.rawBody?.length || 0)\n      ),\n    },\n  };\n}\nexport function getBody(body: unknown) {\n  if (typeof body === 'string') {\n    return body;\n  }\n  if (Buffer.isBuffer(body)) {\n    return body;\n  }\n  return undefined;\n}\n", "import { CancelableRequest, CancelError, default as got, Response } from 'got';\n\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { getClientOptions, toHttpResponse } from './gotUtils';\n\nexport class HttpRequestClient extends models.AbstractRequestClient<typeof got> {\n  constructor(\n    private readonly request: models.Request,\n    private readonly context: models.ProcessorContext\n  ) {\n    super();\n  }\n  get reportMessage(): string {\n    return `perform Http Request (${this.request.url})`;\n  }\n\n  get supportsStreaming() {\n    return false;\n  }\n\n  get nativeClient(): typeof got {\n    return got;\n  }\n\n  async connect(): Promise<typeof got> {\n    return this.nativeClient;\n  }\n\n  private cancelableRequest: CancelableRequest<Response<unknown>> | undefined;\n\n  async send(body?: unknown): Promise<void> {\n    if (utils.isHttpRequest(this.request) && this.request.url) {\n      try {\n        const options = getClientOptions(this.request, this.context);\n        if (body) {\n          options.body = utils.toBufferLike(body);\n        }\n        this.cancelableRequest = got(this.request.url, options);\n        this.registerEvents(this.cancelableRequest);\n        const response = await this.cancelableRequest;\n        this.onMessage('message', toHttpResponse(response, this.request));\n      } catch (err) {\n        if (err instanceof CancelError) {\n          return;\n        }\n        if (err instanceof TypeError && err.message === 'Invalid URL') {\n          err.message = `Invalid URL: ${(err as { input?: string }).input || this.request.url}`;\n        }\n        throw err;\n      } finally {\n        delete this.cancelableRequest;\n      }\n    }\n  }\n\n  override disconnect(err?: Error): void {\n    if (err) {\n      this.cancelableRequest?.cancel();\n      this.onDisconnect();\n    }\n  }\n\n  private registerEvents(cancelableRequest: CancelableRequest<Response<unknown>>) {\n    cancelableRequest.on('downloadProgress', data => {\n      this.onProgress(data.percent);\n    });\n\n    const metaDataFactory =\n      (event: string) =>\n      (...args: Array<unknown>) => {\n        this.onMetaData(event, {\n          protocol: 'HTTP',\n          statusCode: 0,\n          message: args.length > 0 ? `${utils.toString(args[0])}` : undefined,\n          body: {\n            ...args,\n          },\n        });\n      };\n    cancelableRequest.on('redirect', metaDataFactory('redirect'));\n    cancelableRequest.on('retry', metaDataFactory('retry'));\n    cancelableRequest.on('downloadProgress', metaDataFactory('downloadProgress'));\n    cancelableRequest.on('uploadProgress', metaDataFactory('uploadProgress'));\n  }\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\nimport { getBody, toHttpResponse } from './gotUtils';\n\nexport async function logHttpRedirect(request: models.Request, context: models.ProcessorContext): Promise<void> {\n  if (request && utils.isHttpRequest(request)) {\n    if (!request.options) {\n      request.options = {};\n    }\n    if (!request.options?.hooks) {\n      request.options.hooks = {};\n    }\n    if (!request.options?.hooks.beforeRedirect) {\n      request.options.hooks.beforeRedirect = [];\n    }\n    if (!request.options.hooks.beforeRequest) {\n      request.options.hooks.beforeRequest = [];\n    }\n    let currentRequest: undefined | models.Request;\n    request.options.hooks.beforeRequest.push(options => {\n      currentRequest = {\n        protocol: 'HTTP',\n        method: options.method,\n        url: `${options.url}`,\n        headers: options.headers,\n        body: getBody(options.body),\n      };\n    });\n    request.options.hooks.beforeRedirect.push(async (options, response) => {\n      const httpResponse = toHttpResponse(response, currentRequest || { url: utils.toString(options.url) || '' });\n      await utils.logResponse(httpResponse, context);\n    });\n  }\n}\n", "import type { NormalizedOptions } from 'got';\n\nimport * as models from '../../models';\nimport { isHttpRequest } from '../../utils';\n\nexport function postRedirectGetMetaDataHandler(\n  type: string,\n  _value: string | undefined,\n  context: models.ParserContext\n) {\n  if (type === 'postRedirectGet') {\n    context.httpRegion.hooks.onRequest.addHook('postRedirectGet', async (request: models.Request) => {\n      if (isHttpRequest(request)) {\n        if (!request.options) {\n          request.options = {};\n        }\n        if (!request.options.hooks) {\n          request.options.hooks = {};\n        }\n        if (!request.options.hooks.beforeRedirect) {\n          request.options.hooks.beforeRedirect = [];\n        }\n        request.options.hooks.beforeRedirect.push((options: NormalizedOptions) => {\n          options.method = 'GET';\n          options.body = undefined;\n        });\n      }\n    });\n    return true;\n  }\n  return false;\n}\n", "import './completionItemProvider';\n\nimport { httpClientProvider } from '../../io';\nimport * as models from '../../models';\nimport { awsAuthVariableReplacer } from './awsAuthVariableReplacer';\nimport { basicAuthVariableReplacer } from './basicAuthVariableReplacer';\nimport { clientCertVariableReplacer } from './clientCertVariableReplacer';\nimport { CookieJarInterceptor } from './cookieJarInterceptor';\nimport { cookieVariableReplacer } from './cookieVariableReplacer';\nimport { digestAuthVariableReplacer } from './digestAuthVariableReplacer';\nimport { gotHttpClient } from './gotUtils';\nimport { HttpRequestClient } from './httpRequestClient';\nimport { logHttpRedirect } from './logHttpRedirect';\nimport { postRedirectGetMetaDataHandler } from './postRedirectGetMetaDataHandler';\n\nhttpClientProvider.exchange = gotHttpClient;\nhttpClientProvider.createRequestClient = (request, context) => new HttpRequestClient(request, context);\n\nexport function registerHttpPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.parseMetaData.addHook('postRedirectGet', postRedirectGetMetaDataHandler);\n  api.hooks.execute.addInterceptor(new CookieJarInterceptor());\n  api.hooks.replaceVariable.addHook('aws', awsAuthVariableReplacer);\n  api.hooks.replaceVariable.addHook('basicAuth', basicAuthVariableReplacer);\n  api.hooks.replaceVariable.addHook('clientCertificate', clientCertVariableReplacer);\n  api.hooks.replaceVariable.addHook('digestAuth', digestAuthVariableReplacer);\n  api.hooks.replaceVariable.addHook('cookie', cookieVariableReplacer);\n  api.hooks.onRequest.addHook('logHttpRedirect', logHttpRedirect);\n}\n", "import { HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport { fileProvider } from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport abstract class CodeBlockInterceptor\n  implements HookInterceptor<[models.getHttpLineGenerator, models.ParserContext], undefined>\n{\n  abstract get id(): string;\n  constructor(\n    private readonly extensions: Array<string>,\n    private readonly beginCodeBlock: RegExp | Array<RegExp>,\n    private readonly endCodeBlock: RegExp\n  ) {}\n\n  async beforeTrigger(\n    hookContext: HookTriggerContext<[models.getHttpLineGenerator, models.ParserContext], undefined>\n  ): Promise<boolean | undefined> {\n    const getLineReader = hookContext.args[0];\n    const context = hookContext.args[1];\n\n    if (fileProvider.hasExtension(context.httpFile.fileName, ...this.extensions)) {\n      const httpBlockLines = this.getHttpBlockLines(context.lines, context.data);\n      hookContext.args[0] = function* createReader(noStopOnMetaTag?: boolean) {\n        if (httpBlockLines.length > 0) {\n          const lineReader = getLineReader(true);\n          for (const line of lineReader) {\n            const httpBlock = httpBlockLines.find(obj => obj.startLine <= line.line && line.line < obj.endLine);\n            if (httpBlock) {\n              if (httpBlock.startLine === line.line) {\n                yield {\n                  line: line.line,\n                  textLine: '###',\n                };\n              } else {\n                if (!noStopOnMetaTag && utils.RegionSeparator.test(line.textLine)) {\n                  // if parser region is not closed stop at delimiter\n                  break;\n                }\n                yield line;\n              }\n            } else break;\n          }\n        }\n      };\n    }\n\n    return true;\n  }\n\n  private getHttpBlockLines(lines: Array<string>, data: models.ParserContextData) {\n    if (data.codeBlocks) {\n      return data.codeBlocks;\n    }\n    const result: Array<{\n      startLine: number;\n      endLine: number;\n    }> = [];\n    let startLine = -1;\n    for (let lineNumber = 0; lineNumber < lines.length; lineNumber++) {\n      const textLine = lines[lineNumber];\n      if (startLine < 0) {\n        if (Array.isArray(this.beginCodeBlock)) {\n          if (\n            lines.length > lineNumber + this.beginCodeBlock.length &&\n            this.beginCodeBlock.every((regex, index) => regex.test(lines[lineNumber + index]))\n          ) {\n            startLine = lineNumber + this.beginCodeBlock.length - 1;\n            lineNumber += this.beginCodeBlock.length - 1;\n          }\n        } else if (this.beginCodeBlock.test(textLine)) {\n          startLine = lineNumber;\n        }\n      } else {\n        if (this.endCodeBlock.test(textLine)) {\n          result.push({\n            startLine,\n            endLine: lineNumber,\n          });\n          startLine = -1;\n        }\n      }\n    }\n    data.codeBlocks = result;\n    return result;\n  }\n}\n", "import { CodeBlockInterceptor } from './codeBlocksInterceptor';\n\nexport class AsciidocInterceptor extends CodeBlockInterceptor {\n  id = 'asciidoc';\n  constructor() {\n    super(['adoc', 'asciidoc', 'asc'], [/^\\[source,http\\]\\s*$/iu, /^----\\s*$/u], /^----\\s*$/u);\n  }\n}\n", "import { CodeBlockInterceptor } from './codeBlocksInterceptor';\n\nexport class MarkdownInterceptor extends CodeBlockInterceptor {\n  id = 'markdown';\n  constructor() {\n    super(['md', 'markdown', 'mdown', 'mkdn', 'mdtxt', 'mdtext', 'text', 'rmd'], /^```\\s*(http|rest)$/iu, /^```\\s*$/u);\n  }\n}\n", "import * as models from '../../models';\nimport { AsciidocInterceptor } from './asciidocInterceptor';\nimport { MarkdownInterceptor } from './markdownInterceptor';\n\nexport function registerInjectionPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.parse.addInterceptor(new MarkdownInterceptor());\n  api.hooks.parse.addInterceptor(new AsciidocInterceptor());\n}\n", "import { createHash, createHmac, Hash, Hmac } from 'crypto';\n\nimport * as utils from '../../../utils';\nimport { CryptoSupport, Digest, DigestBuilder, HmacInitializer, HmacSupport } from './stubs';\n\nexport class IntellijCryptoSupport implements CryptoSupport {\n  constructor() {\n    this.hmac = new IntellijHmacSupport();\n  }\n  sha1(): DigestBuilder {\n    return new IntellijDigestBuilder(createHash('sha1'));\n  }\n  sha256(): DigestBuilder {\n    return new IntellijDigestBuilder(createHash('sha256'));\n  }\n  sha384(): DigestBuilder {\n    return new IntellijDigestBuilder(createHash('sha384'));\n  }\n  sha512(): DigestBuilder {\n    return new IntellijDigestBuilder(createHash('sha512'));\n  }\n  md5(): DigestBuilder {\n    return new IntellijDigestBuilder(createHash('md5'));\n  }\n  hmac: HmacSupport;\n}\n\nexport class IntellijDigestBuilder implements DigestBuilder {\n  constructor(private readonly hash: Hash | Hmac) {}\n  updateWithText(textInput: string, encoding?: string | undefined): DigestBuilder {\n    const bufferEncoding = utils.getBufferEncoding(encoding);\n    const result = this.hash.update(Buffer.from(textInput, bufferEncoding));\n    return new IntellijDigestBuilder(result);\n  }\n  updateWithHex(hexInput: string): DigestBuilder {\n    const result = this.hash.update(Buffer.from(hexInput, 'hex'));\n    return new IntellijDigestBuilder(result);\n  }\n  updateWithBase64(base64Input: string, urlSafe?: boolean | undefined): DigestBuilder {\n    const result = this.hash.update(Buffer.from(base64Input, urlSafe ? 'base64url' : 'base64'));\n    return new IntellijDigestBuilder(result);\n  }\n  digest(): Digest {\n    return new IntellijDigest(this.hash);\n  }\n}\n\n/**\n * Object containing bytes of digest\n */\nexport class IntellijDigest implements Digest {\n  constructor(private readonly hash: Hash | Hmac) {}\n  /**\n   * Returns bytes encoded as 16-radix HEX string\n   */\n  toHex(): string {\n    if (this.hash instanceof Hmac) {\n      return this.hash.digest('hex');\n    }\n    return this.hash.digest('hex');\n  }\n\n  /**\n   * Returns bytes encoded as Base64 string\n   * @param urlSafe if true, will be used url-safe variant of Base64. By default, false\n   */\n  toBase64(urlSafe?: boolean): string {\n    const encoding = urlSafe ? 'base64url' : 'base64';\n    if (this.hash instanceof Hmac) {\n      return this.hash.digest(encoding);\n    }\n    return this.hash.digest(encoding);\n  }\n}\n\nexport class IntellijHmacSupport implements HmacSupport {\n  sha1(): HmacInitializer {\n    return new IntellijHmacInitializer('sha1');\n  }\n  sha256(): HmacInitializer {\n    return new IntellijHmacInitializer('sha256');\n  }\n  sha384(): HmacInitializer {\n    return new IntellijHmacInitializer('sha384');\n  }\n  sha512(): HmacInitializer {\n    return new IntellijHmacInitializer('sha512');\n  }\n  md5(): HmacInitializer {\n    return new IntellijHmacInitializer('md5');\n  }\n}\n\nexport class IntellijHmacInitializer implements HmacInitializer {\n  constructor(private readonly algorithm: string) {}\n  withTextSecret(textSecret: string, encoding?: string | undefined): DigestBuilder {\n    const hmac = createHmac(this.algorithm, Buffer.from(textSecret, utils.getBufferEncoding(encoding)));\n    return new IntellijDigestBuilder(hmac);\n  }\n  withHexSecret(hexSecret: string): DigestBuilder {\n    const hmac = createHmac(this.algorithm, Buffer.from(hexSecret, 'hex'));\n    return new IntellijDigestBuilder(hmac);\n  }\n  withBase64Secret(base64Secret: string, urlSafe?: string | undefined): DigestBuilder {\n    const hmac = createHmac(this.algorithm, Buffer.from(base64Secret, urlSafe ? 'base64url' : 'base64'));\n    return new IntellijDigestBuilder(hmac);\n  }\n}\n", "import { ok } from 'assert';\n\nimport * as models from '../../../models';\nimport { testFactory } from '../../../utils';\nimport { HttpClient, Variables } from './stubs';\nimport { IntellijVariables } from './intellijVariables';\n\nexport class IntellijHttpClient implements HttpClient {\n  global: Variables;\n  constructor(private readonly context: models.ProcessorContext) {\n    this.global = new IntellijVariables(context);\n  }\n  test(testName: string, func: () => void): void {\n    testFactory(this.context)(testName, func);\n  }\n  assert(condition: boolean, message?: string): void {\n    ok(condition, message);\n  }\n  log(text: string): void {\n    if (this.context.scriptConsole) {\n      this.context.scriptConsole.info(text);\n    }\n  }\n  exit(): void {\n    this.context.scriptConsole?.warn('exit not supported');\n  }\n}\n", "import * as models from '../../../models';\nimport { userSessionStore } from '../../../store';\nimport * as utils from '../../../utils';\nimport { Variables } from './stubs';\n\ntype IntellijGlobalCacheSession = models.UserSession;\n\nexport class IntellijVariables implements Variables {\n  private userSession: IntellijGlobalCacheSession;\n  constructor(private readonly context: models.ProcessorContext) {\n    this.userSession = this.getIntellijSession();\n  }\n\n  private getIntellijSession(): IntellijGlobalCacheSession {\n    const id = `intellij_global_cache`;\n    const userSession = userSessionStore.getUserSession(id);\n    if (this.isIntellijGlobalCacheSession(userSession)) {\n      return userSession;\n    }\n    const intellijSession: IntellijGlobalCacheSession = {\n      id,\n      title: `Intellij Cache`,\n      description: `Global Cache for all Intellij Variables`,\n      details: {},\n      type: 'intellij_global_cache',\n    };\n    userSessionStore.setUserSession(intellijSession);\n    return intellijSession;\n  }\n\n  private isIntellijGlobalCacheSession(value: models.UserSession | undefined): value is IntellijGlobalCacheSession {\n    return !!value?.id && !!value.title;\n  }\n\n  set(varName: string, varValue: string): void {\n    this.userSession.details[varName] = varValue;\n    utils.setVariableInContext(\n      {\n        [varName]: varValue,\n      },\n      this.context\n    );\n  }\n  get(varName: string): string {\n    return this.context.variables[varName] as string;\n  }\n  isEmpty(): boolean {\n    return Object.entries(this.userSession.details).length === 0;\n  }\n  clear(varName: string): void {\n    delete this.userSession.details[varName];\n    utils.deleteVariableInContext(varName, this.context);\n  }\n  clearAll(): void {\n    for (const [key] of Object.entries(this.userSession.details)) {\n      this.clear(key);\n    }\n  }\n}\n", "import { createHash } from 'crypto';\nimport open from 'open';\n\nimport type * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { assertConfiguration } from '../openIdConfiguration';\nimport { OpenIdFlow } from './openIdFlow';\nimport { registerListener, unregisterListener } from './openIdHttpServer';\nimport { requestOpenIdInformation } from './requestOpenIdInformation';\n\nclass AuthorizationCodeFlow implements OpenIdFlow {\n  supportsFlow(flow: string): boolean {\n    return ['authorization_code', 'code'].indexOf(flow) >= 0;\n  }\n\n  getCacheKey(config: models.OpenIdConfiguration) {\n    assertConfiguration(config, ['tokenEndpoint', 'authorizationEndpoint', 'clientId']);\n    return `authorization_code_${config.variablePrefix}_${config.clientId}_${config.tokenEndpoint}`;\n  }\n\n  async perform(\n    config: models.OpenIdConfiguration,\n    context: models.OpenIdContext\n  ): Promise<models.OpenIdInformation | false> {\n    const id = this.getCacheKey(config);\n    if (id) {\n      return new Promise<models.OpenIdInformation | false>((resolve, reject) => {\n        const state = utils.stateGenerator();\n        const code_verifier = config.usePkce ? utils.stateGenerator(64) : undefined;\n        try {\n          utils.report(context, 'execute OAuth2 authorization_code flow');\n          const authUrl = `${config.authorizationEndpoint}${\n            config.authorizationEndpoint && config.authorizationEndpoint.indexOf('?') > 0 ? '&' : '?'\n          }${utils.toQueryParams({\n            client_id: config.clientId,\n            scope: config.scope ?? 'openid',\n            response_type: 'code',\n            state,\n            audience: config.audience,\n            resource: config.resource,\n            redirect_uri: config.redirectUri?.toString(),\n            ...(code_verifier\n              ? { code_challenge: this.createSha256(code_verifier), code_challenge_method: 'S256' }\n              : {}),\n          })}`;\n\n          let unregisterProgress: (() => void) | undefined;\n          if (context.progress) {\n            unregisterProgress = context.progress.register(() => {\n              unregisterListener(state);\n              resolve(false);\n            });\n          }\n\n          registerListener({\n            id: state,\n            port: config.serverPort || Number(config.redirectUri?.port),\n            path: config.redirectUri?.pathname || '',\n            name: `authorization for ${config.clientId}: ${config.authorizationEndpoint}`,\n            resolve: params => {\n              if (params.code && params.state === state) {\n                if (unregisterProgress) {\n                  unregisterProgress();\n                }\n                const openIdInformation = requestOpenIdInformation(\n                  {\n                    url: config.tokenEndpoint || '',\n                    method: 'POST',\n                    body: utils.toQueryParams({\n                      grant_type: 'authorization_code',\n                      scope: config.scope ?? 'opendid',\n                      code: params.code,\n                      redirect_uri: config.redirectUri?.toString(),\n                      ...(code_verifier ? { code_verifier } : {}),\n                    }),\n                  },\n                  {\n                    config,\n                    id,\n                    title: `authorization_code: ${config.clientId}`,\n                    description: `${config.variablePrefix} - ${config.tokenEndpoint}`,\n                    details: {\n                      clientId: config.clientId,\n                      tokenEndpoint: config.tokenEndpoint,\n                      grantType: 'authorization_code',\n                    },\n                  },\n                  context\n                );\n                resolve(openIdInformation);\n                return {\n                  valid: true,\n                  message: 'code received.',\n                  statusMessage: 'code and state valid. starting code exchange',\n                };\n              }\n\n              if (params.error_description) {\n                return {\n                  valid: false,\n                  message: decodeURIComponent(params.error_description),\n                  statusMessage: 'no access_token received',\n                };\n              }\n              return {\n                valid: false,\n                message: 'no code received',\n                statusMessage: 'no code received',\n              };\n            },\n            reject,\n          });\n          utils.report(context, `authorization_code browser authentication pending: ${authUrl}`);\n          open(authUrl);\n        } catch (err) {\n          unregisterListener(state);\n          reject(err);\n        }\n      });\n    }\n    return false;\n  }\n\n  private createSha256(verifier: string): string {\n    const hash = createHash('sha256').update(verifier).digest('base64');\n    return hash.replace(/=/gu, '').replace(/\\+/gu, '-').replace(/\\//gu, '_');\n  }\n}\n\nexport const authorizationCodeFlow = new AuthorizationCodeFlow();\n", "import { isEqualWith } from 'lodash';\nimport get from 'lodash/get';\nimport { URL } from 'url';\n\nimport { log } from '../../io';\nimport type * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport const DEFAULT_CALLBACK_URI = 'http://localhost:3000/callback';\nconst DefaultOAuthVariablePrefix = 'oauth2';\n\nfunction getVariableRaw(variables: models.Variables, name: string, variablePrefix: string): unknown {\n  const variableName = `${variablePrefix}_${name}`;\n  let varValue = variables[variableName];\n\n  const caseInsensitiveVariables = Object.entries(variables)\n    .filter(([key]) => key.toLowerCase() === variableName.toLowerCase())\n    .map(([, value]) => value);\n  if (caseInsensitiveVariables.length === 1) {\n    return caseInsensitiveVariables.pop();\n  }\n  if (varValue === undefined) {\n    varValue = get(variables, `${variablePrefix}.${name}`);\n  }\n  return varValue;\n}\n\nfunction getVariableUnknown(variables: models.Variables, variablePrefix: string | undefined, name: string): unknown {\n  const getter = (prefix: string) => getVariableRaw(variables, name, prefix);\n  let value: unknown;\n  if (variablePrefix) {\n    value = getter(variablePrefix);\n  }\n  if (value === undefined) {\n    value = getter(DefaultOAuthVariablePrefix);\n  }\n  const expandedValue = utils.expandVariable(value, variables);\n  return expandedValue;\n}\n\nexport function getOpenIdConfiguration(\n  variablePrefix: string | undefined,\n  variables: models.Variables\n): models.OpenIdConfiguration {\n  const getString = (name: string) => {\n    const expandedValue = getVariableUnknown(variables, variablePrefix, name);\n    return utils.ensureString(expandedValue);\n  };\n\n  const getArrayOrString = (name: string): string | Array<string> | null | undefined => {\n    const expandedValue = getVariableUnknown(variables, variablePrefix, name);\n    if (Array.isArray(expandedValue)) {\n      return expandedValue.map(v => utils.ensureString(v)) as Array<string>;\n    }\n    return utils.ensureString(expandedValue);\n  };\n\n  const getUrl = (name: string, defaultUrl: string) => {\n    const url = utils.ensureString(getVariableUnknown(variables, variablePrefix, name));\n    try {\n      return new URL(url || defaultUrl);\n    } catch {\n      throw new Error(`Expected a valid URL, but received ${url}`);\n    }\n  };\n\n  const getFunction = (name: string) => {\n    const expandedValue = getVariableUnknown(variables, variablePrefix, name);\n    if (typeof expandedValue === 'function') {\n      return expandedValue;\n    }\n    return undefined;\n  };\n\n  const getBoolean = (name: string, defaultValue = false) => {\n    const expandedValue = getVariableUnknown(variables, variablePrefix, name);\n    return utils.toBoolean(expandedValue, defaultValue);\n  };\n  const getNumber = (name: string, defaultValue = undefined) => {\n    const expandedValue = getVariableUnknown(variables, variablePrefix, name);\n    return utils.toNumber(expandedValue) || defaultValue;\n  };\n\n  const config: models.OpenIdConfiguration = {\n    variablePrefix: variablePrefix || DefaultOAuthVariablePrefix,\n    authorizationEndpoint: getString('authorizationEndpoint'),\n    deviceCodeEndpoint: getString('deviceCodeEndpoint'),\n    tokenEndpoint: getString('tokenEndpoint'),\n    clientId: getString('clientId'),\n    clientSecret: getString('clientSecret'),\n    responseType: getString('responseType'),\n    responseMode: getString('responseMode'),\n    audience: getArrayOrString('audience'),\n    scope: getString('scope'),\n    resource: getArrayOrString('resource'),\n    username: getString('username'),\n    password: getString('password'),\n    subjectIssuer: getString('subjectIssuer') || undefined,\n    redirectUri: getUrl('redirectUri', DEFAULT_CALLBACK_URI),\n    keepAlive: getBoolean('keepAlive', true),\n    useAuthorizationHeader: getBoolean('useAuthorizationHeader', true),\n    useDeviceCodeClientSecret: getBoolean('useDeviceCodeClientSecret'),\n    usePkce: getBoolean('usePkce'),\n    serverPort: getNumber('serverPort'),\n    interceptRequest: getFunction('interceptRequest') as (\n      request: models.HttpRequest,\n      context: models.ProcessorContext\n    ) => Promise<void>,\n  };\n  return config;\n}\n\nexport function isOpenIdConfigurationEqual(\n  config1: models.OpenIdConfiguration,\n  config2: models.OpenIdConfiguration\n): boolean {\n  return isEqualWith(config1, config2, (prop1, prop2, key) => {\n    const urlKeys: (keyof models.OpenIdConfiguration)[] = ['redirectUri'];\n    if (key && urlKeys.some(obj => obj === key)) {\n      return `${prop1}` === `${prop2}`;\n    }\n    return undefined;\n  });\n}\n\nexport function assertConfiguration(config: models.OpenIdConfiguration, keys: string[]): void {\n  const missingKeys = [];\n  for (const key of keys) {\n    if (!Object.entries(config).some(([obj, value]) => obj === key && !!value)) {\n      missingKeys.push(key);\n    }\n  }\n  if (missingKeys.length > 0) {\n    const message = `missing configuration: ${missingKeys.map(obj => `${config.variablePrefix}_${obj}`).join(', ')}`;\n    log.error(message);\n    throw new Error(message);\n  }\n}\n", "import { createServer, Server } from 'http';\n\nimport { log } from '../../../io';\n\ninterface RequestListener {\n  path: string;\n  port: number;\n  id: string;\n  name: string;\n  resolve: (params: Record<string, string>) => { valid: boolean; message: string; statusMessage: string };\n  reject: () => void;\n}\n\nconst listeners: Array<RequestListener> = [];\n\nlet server: Server | false;\nlet serverTimeout: NodeJS.Timeout | false;\nlet serverTimeoutTime = 0;\n\nexport function registerListener(listener: RequestListener): void {\n  listeners.push(listener);\n  initServer(listener.port, listener.path);\n}\n\nexport function unregisterListener(id: string): void {\n  const listenerIndex = listeners.findIndex(obj => obj.id === id);\n  if (listenerIndex >= 0) {\n    listeners.splice(listenerIndex, 1);\n  }\n  if (listeners.length === 0) {\n    resetServer(60);\n  }\n}\n\nfunction clearServerTimeout() {\n  if (serverTimeout) {\n    clearTimeout(serverTimeout);\n    serverTimeout = false;\n    serverTimeoutTime = 0;\n  }\n}\n\nfunction resetServer(seconds: number) {\n  clearServerTimeout();\n  const timeout = seconds * 1000;\n  serverTimeoutTime = new Date().getTime() + timeout;\n  serverTimeout = setTimeout(() => closeServer(), timeout);\n}\n\nfunction closeServer() {\n  for (const listener of listeners) {\n    listener.reject();\n  }\n  listeners.length = 0;\n  if (server) {\n    clearServerTimeout();\n    server.close(err => {\n      if (err) {\n        log.error(err);\n      } else {\n        log.debug('http server closed');\n      }\n    });\n    server = false;\n  }\n}\n\nfunction initServer(port: number, callbackPath: string) {\n  resetServer(600);\n  if (!server) {\n    server = createServer((req, res) => {\n      try {\n        let statusMessage = 'invalid';\n        let statusCode = 500;\n\n        const responseContent: string[] = [];\n\n        if (req.url) {\n          const queryParams = parseQueryParams(req.url);\n          const path = req.url.split('?')[0];\n          if (path === callbackPath) {\n            const listener = listeners.find(obj => obj.id === queryParams.state);\n            if (listener) {\n              const result = listener.resolve(queryParams);\n              responseContent.push(getMessageHtml(result.message, result.valid));\n              if (result.valid) {\n                statusCode = 200;\n                unregisterListener(listener.id);\n              }\n              statusMessage = result.statusMessage;\n            } else {\n              responseContent.push(getMessageHtml('invalid state received', false));\n              responseContent.push(`\n                <script>\n                  if(window.location.hash){\n                    window.document.querySelector('.js-message').remove();\n                    window.location.replace(\\`\\${window.location.href.substring(0,window.location.href.indexOf('#'))}?\\${window.location.hash.substring(1)}\\`);\n                  }\n                </script>\n                <noscript>\n                  ${getMessageHtml(\n                    'Please enable javascript for redirect or replace fragment (#) with query (?)',\n                    false\n                  )}\n                </noscript>\n              `);\n              statusMessage = 'invalid state received';\n            }\n          } else if (path.startsWith('/reject')) {\n            const listener = listeners.find(obj => obj.id === queryParams.id);\n            if (listener) {\n              listener.reject();\n              unregisterListener(queryParams.id);\n              statusCode = 200;\n              statusMessage = 'listener removed';\n              responseContent.push(getMessageHtml(`${listener.name} removed`, true));\n            } else {\n              statusMessage = 'listener not found';\n            }\n          } else if (path.startsWith('/shutdown')) {\n            closeServer();\n            responseContent.push(getMessageHtml('server closed', true));\n            statusCode = 200;\n            statusMessage = 'server was shut down';\n          }\n        }\n        responseContent.push(getServerStatus());\n        res.setHeader('Content-Type', 'text/html');\n        res.writeHead(statusCode, statusMessage);\n        res.end(getHtml(responseContent.join('')));\n      } catch (err) {\n        log.error(err);\n        res.end(getHtml(`${err}`));\n      }\n    });\n    server.listen(port);\n    const address = server.address();\n    if (address) {\n      log.debug(`open http server on port ${typeof address === 'string' ? address : address.port}`);\n    } else {\n      log.debug(`open http server on port ${port}`);\n    }\n  }\n}\n\nfunction parseQueryParams(url: string) {\n  return url\n    .slice(url.indexOf('?') + 1)\n    .split('&')\n    .reduce(\n      (prev, current) => {\n        const [key, value] = current.split('=');\n        prev[key] = value;\n        return prev;\n      },\n      {} as Record<string, string>\n    );\n}\n\nfunction getMessageHtml(message: string, valid: boolean) {\n  return `\n<div class=\"card js-message ${valid ? 'card--success' : 'card--error'}\">\n  <h3 class=\"card__title\">${valid ? 'success' : 'error'}</h3>\n  <div class=\"card__message\">${message}</div>\n</div>`;\n}\n\nfunction getServerStatus() {\n  const lines = [];\n  if (listeners.length > 0) {\n    lines.push(\n      ...listeners.map(\n        obj => `\n      <div class=\"card\">\n        <h3 class=\"card__title\">open requests</h3>\n        <div class=\"card__message\">${obj.name}</div>\n        <div class=\"card__actions\">\n          <a href=\"/reject?id=${obj.id}\">remove</a>\n        </div>\n      </div>`\n      )\n    );\n  }\n  if (serverTimeoutTime > 0) {\n    lines.push(`\n    <div class=\"card\">\n      <h3 class=\"card__title\">Server Status</h3>\n      <div class=\"card__message\">automatic shutdown in ${toTimeString(\n        Math.floor((serverTimeoutTime - new Date().getTime()) / 1000)\n      )}</div>\n      <div class=\"card__actions\">\n        <a href=\"/shutdown\">shutdown</a>\n      </div>\n    </div>`);\n  }\n\n  return lines.join('');\n}\n\nfunction toTimeString(seconds: number) {\n  if (seconds > 0) {\n    const minutes = Math.trunc(seconds / 60);\n    const sec = seconds % 60;\n    if (minutes > 0) {\n      if (sec > 0) {\n        return `${minutes}minute${minutes > 1 ? 's' : ''} ${sec} seconds`;\n      }\n      return `${minutes} minute${minutes > 1 ? 's' : ''}`;\n    }\n    return `${seconds} seconds`;\n  }\n  return '-';\n}\n\nfunction getHtml(message: string) {\n  return `\n  <html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>httpYac</title>\n    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>\n    <style>\n    :root{\n      --light: #FAFAFA;\n      --success: #4CAF50;\n      --success-dark: #43A047;\n      --error: #D32F2F;\n      --error-dark: #C62828;\n      --link-light: #E1F5FE;\n      --link: #00B0FF;\n      --link-dark: #0091EA;\n    }\n      body{\n        font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n        background-color: var(--light);\n        display:flex;\n        align-items: center;\n        flex-direction: column;\n      }\n\n      .card{\n        border-radius: 4px;\n        background-color: #FFF;\n        box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n        width: 22rem;\n        padding: .5rem;\n        margin: auto;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        margin: 2rem;\n      }\n\n      .card--success{\n        border-bottom: 1rem solid var(--success);\n      }\n      .card--success:hover{\n        border-bottom: 1rem solid var(--success-dark);\n      }\n\n      .card--error{\n        border-bottom: 1rem solid var(--error);\n      }\n      .card--error:hover{\n        border-bottom: 1rem solid var(--error-dark);\n      }\n      .card__title{\n        margin: 0 .5rem;\n      }\n      .card__message{\n        padding: 0 .5rem;\n        word-break: break-word;\n      }\n      .card__actions{\n        padding: 1rem 0;\n      }\n      a {\n          color: var(--link);\n          text-decoration:none;\n          border-radius:3px;\n          cursor:pointer;\n          text-transform: uppercase;\n          padding: .5rem;\n      }\n      a:focus {\n        outline-color: var(--link);\n        color: var(--link);\n      }\n      a:hover, a:active {\n          color: var(--link-dark);\n          background-color: var(--link-light);\n      }\n    </style>\n  </head>\n  <body>\n  <img src=\"https://raw.githubusercontent.com/AnWeber/vscode-httpyac/master/icon.png\" alt=\"HttpYac Logo\" />\n${message}\n</body>\n</html>\n`;\n}\n", "import { log } from '../../../io';\nimport * as io from '../../../io';\nimport type * as models from '../../../models';\nimport * as utils from '../../../utils';\n\nexport async function requestOpenIdInformation(\n  request: models.HttpClientRequest | false,\n  options: models.OpenIdSession,\n  context: models.OpenIdContext\n): Promise<models.OpenIdInformation | false> {\n  if (request) {\n    const time = new Date().getTime();\n\n    if (!request.headers) {\n      request.headers = {\n        'content-type': 'application/x-www-form-urlencoded',\n      };\n    }\n\n    if (\n      request.headers &&\n      options.config.useAuthorizationHeader &&\n      options.config.clientId &&\n      options.config.clientSecret\n    ) {\n      request.headers.authorization = `Basic ${Buffer.from(\n        `${options.config.clientId}:${options.config.clientSecret}`\n      ).toString('base64')}`;\n    } else {\n      request.body = `${request.body}&${utils.toQueryParams({\n        client_id: options.config.clientId,\n        client_secret: options.config.clientSecret,\n      })}`;\n    }\n    await addConfigRequestOptions(request, options.config, context);\n\n    const response = await io.httpClientProvider.exchange?.(\n      {\n        options: {},\n        ...request,\n      },\n      { isMainContext: false }\n    );\n    if (response) {\n      response.tags = ['auth', 'oauth2', 'automatic'];\n      if (utils.isProcessorContext(context)) {\n        response.tags = response.tags ?? [];\n        response.tags.push('httpRegion');\n        await utils.logResponse(response, context);\n      }\n      if (response.statusCode < 400 && utils.isString(response.body)) {\n        return toOpenIdInformation(JSON.parse(response.body), time, options);\n      }\n    }\n  }\n  return false;\n}\n\nexport async function addConfigRequestOptions(\n  request: models.HttpClientRequest,\n  config: models.OpenIdConfiguration,\n  context: models.OpenIdContext\n) {\n  if (utils.isProcessorContext(context)) {\n    if (context.config?.request?.rejectUnauthorized !== undefined) {\n      request.noRejectUnauthorized = !utils.toBoolean(context.config?.request?.rejectUnauthorized);\n    }\n\n    if (config.interceptRequest) {\n      await config.interceptRequest(request, context);\n    }\n  }\n}\n\nexport function toOpenIdInformation(\n  jwtToken: unknown,\n  time: number,\n  session: models.OpenIdSession\n): models.OpenIdInformation | false {\n  if (isAuthToken(jwtToken)) {\n    const parsedToken = utils.decodeJWT(jwtToken.access_token);\n    if (parsedToken) {\n      log.debug(utils.stringifySafe(parsedToken, 2));\n    }\n    return {\n      ...session,\n      type: 'OAuth2',\n      time,\n      accessToken: jwtToken.access_token,\n      expiresIn: jwtToken.expires_in ?? parsedToken?.exp,\n      refreshToken: jwtToken.refresh_token,\n      refreshExpiresIn: jwtToken.refresh_expires_in,\n      timeSkew: parsedToken?.iat ? Math.floor(time / 1000) - parsedToken.iat : 0,\n      idToken: jwtToken.id_token,\n      scope: jwtToken.scope,\n    };\n  }\n  return false;\n}\n\nexport function isAuthToken(obj: unknown): obj is AuthToken {\n  const guard = obj as AuthToken;\n  return guard && !!guard.access_token;\n}\n\ninterface AuthToken {\n  id_token?: string;\n  access_token: string;\n  expires_in?: number;\n  refresh_token?: string;\n  refresh_expires_in?: number;\n  scope?: string;\n}\n", "import type * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { assertConfiguration } from '../openIdConfiguration';\nimport { OpenIdFlow } from './openIdFlow';\nimport { requestOpenIdInformation } from './requestOpenIdInformation';\n\nclass ClientCredentialsFlow implements OpenIdFlow {\n  supportsFlow(flow: string): boolean {\n    return ['client_credentials', 'client'].indexOf(flow) >= 0;\n  }\n\n  getCacheKey(config: models.OpenIdConfiguration) {\n    assertConfiguration(config, ['tokenEndpoint', 'clientId', 'clientSecret']);\n    return `client_credentials_${config.variablePrefix}_${config.clientId}_${config.tokenEndpoint}`;\n  }\n\n  async perform(\n    config: models.OpenIdConfiguration,\n    context: models.OpenIdContext\n  ): Promise<models.OpenIdInformation | false> {\n    const id = this.getCacheKey(config);\n    if (id) {\n      utils.report(context, 'execute OAuth2 client_credentials flow');\n      return requestOpenIdInformation(\n        {\n          url: config.tokenEndpoint || '',\n          method: 'POST',\n          body: utils.toQueryParams({\n            grant_type: 'client_credentials',\n            scope: config.scope,\n            audience: config.audience,\n            resource: config.resource,\n          }),\n        },\n        {\n          config,\n          id,\n          title: `clientCredentials: ${config.clientId}`,\n          description: `${config.variablePrefix} - ${config.tokenEndpoint}`,\n          details: {\n            clientId: config.clientId,\n            tokenEndpoint: config.tokenEndpoint,\n            grantType: 'client_credentials',\n          },\n        },\n        context\n      );\n    }\n    return false;\n  }\n}\n\nexport const clientCredentialsFlow = new ClientCredentialsFlow();\n", "import open from 'open';\n\nimport * as io from '../../../io';\nimport type * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { assertConfiguration } from '../openIdConfiguration';\nimport { OpenIdFlow } from './openIdFlow';\nimport { addConfigRequestOptions, toOpenIdInformation } from './requestOpenIdInformation';\n\nclass DeviceCodeFlow implements OpenIdFlow {\n  supportsFlow(flow: string): boolean {\n    return ['device_code', 'device'].indexOf(flow) >= 0;\n  }\n\n  getCacheKey(config: models.OpenIdConfiguration) {\n    assertConfiguration(config, ['tokenEndpoint', 'deviceCodeEndpoint', 'clientId']);\n    return `device_code_${config.variablePrefix}_${config.clientId}_${config.tokenEndpoint}`;\n  }\n\n  async perform(\n    config: models.OpenIdConfiguration,\n    context: models.OpenIdContext\n  ): Promise<models.OpenIdInformation | false> {\n    const id = this.getCacheKey(config);\n    if (id) {\n      utils.report(context, 'execute device_code authorization flow');\n\n      const deviceCodeTime = new Date().getTime();\n      const deviceCodeResponse = await this.requestDeviceAuthorization(config, context);\n      if (deviceCodeResponse && utils.isProcessorContext(context)) {\n        await utils.logResponse(deviceCodeResponse, context);\n      }\n      if (deviceCodeResponse && deviceCodeResponse.statusCode === 200 && utils.isString(deviceCodeResponse.body)) {\n        utils.report(context, 'device_code received');\n\n        const deviceCodeBody: DeviceCodeBody = JSON.parse(deviceCodeResponse.body);\n\n        const intervalInSeconds = utils.toNumber(deviceCodeBody.interval) || 5;\n        let intervalInMs = intervalInSeconds * 1000.0;\n        this.showUserCode(deviceCodeBody);\n\n        while (new Date().getTime() - deviceCodeTime < Number(deviceCodeBody.expires_in) * 1000) {\n          try {\n            await utils.sleep(intervalInMs);\n            if (context.progress?.isCanceled?.()) {\n              io.log.trace('process canceled by user');\n              return false;\n            }\n            const time = new Date().getTime();\n            const response = await this.authenticateUser(config, deviceCodeBody, context);\n            if (response && utils.isString(response.body)) {\n              response.tags = ['auth', 'oauth2', 'deviceCode', 'automatic'];\n              const parsedBody = JSON.parse(response.body);\n              if (response.statusCode === 200) {\n                utils.report(context, 'accessToken received');\n                await this.logResponse(response, context);\n                return toOpenIdInformation(parsedBody, time, {\n                  config,\n                  id,\n                  title: `deviceCode: ${config.clientId}`,\n                  description: `${config.variablePrefix} - ${config.tokenEndpoint}`,\n                  details: {\n                    clientId: config.clientId,\n                    tokenEndpoint: config.tokenEndpoint,\n                    grantType: 'device_code',\n                  },\n                });\n              }\n              utils.report(context, `device code ${parsedBody.error}`);\n              if (['slow_down', 'authorization_pending'].indexOf(parsedBody.error) >= 0) {\n                if (parsedBody.error === 'slow_down' || response.statusCode === 408) {\n                  // on Timeout slow down\n                  intervalInMs += 5000;\n                  io.log.debug(`DeviceCode Flow increase interval: ${intervalInMs / 1000.0}s`);\n                }\n              } else {\n                if (\n                  parsedBody.error &&\n                  ['access_denied', 'expired_token', 'bad_verification_code'].indexOf(parsedBody.error) >= 0\n                ) {\n                  io.log.debug(`DeviceCode Flow aborted: ${parsedBody.error_description || ''}`);\n                  await this.logResponse(response, context);\n                  return false;\n                }\n                if (\n                  (await io.userInteractionProvider.showWarnMessage?.(\n                    `Unknown error code ${parsedBody.error}`,\n                    'Continue',\n                    'Cancel'\n                  )) === 'Cancel'\n                ) {\n                  await this.logResponse(response, context);\n                  return false;\n                }\n              }\n            } else {\n              io.log.debug('device code received invalid response');\n              return false;\n            }\n          } catch (err) {\n            io.log.debug('error in deviceCodeFlow', err);\n            return false;\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  private async logResponse(response: models.HttpResponse, context: models.OpenIdContext) {\n    if (utils.isProcessorContext(context)) {\n      await utils.logResponse(response, context);\n    }\n  }\n\n  private async authenticateUser(\n    config: models.OpenIdConfiguration,\n    deviceCodeBody: DeviceCodeBody,\n    context: models.OpenIdContext\n  ) {\n    const request: models.HttpRequest = {\n      url: config.tokenEndpoint || '',\n      method: 'POST',\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded',\n      },\n      body: utils.toQueryParams({\n        client_id: config.clientId,\n        grant_type: 'urn:ietf:params:oauth:grant-type:device_code',\n        device_code: deviceCodeBody.device_code,\n      }),\n    };\n    await addConfigRequestOptions(request, config, context);\n    const response = await io.httpClientProvider.exchange?.(request, { isMainContext: false });\n    if (response && utils.isProcessorContext(context)) {\n      await utils.logResponse(response, context);\n    }\n    return response;\n  }\n\n  private async requestDeviceAuthorization(config: models.OpenIdConfiguration, context: models.OpenIdContext) {\n    const request: models.HttpRequest = {\n      url: config.deviceCodeEndpoint || '',\n      method: 'POST',\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded',\n      },\n      body: utils.toQueryParams({\n        client_id: config.clientId,\n        client_secret: config.useDeviceCodeClientSecret ? config.clientSecret : undefined,\n        scope: config.scope ?? 'openid',\n        audience: config.audience,\n        resource: config.resource,\n      }),\n    };\n    await addConfigRequestOptions(request, config, context);\n    const response = await io.httpClientProvider.exchange?.(request, { isMainContext: false });\n\n    if (response && utils.isProcessorContext(context)) {\n      response.tags = ['auth', 'oauth2', 'deviceCode', 'automatic'];\n      await utils.logResponse(response, context);\n    }\n    return response;\n  }\n\n  private showUserCode(deviceCodeBody: DeviceCodeBody) {\n    const message =\n      deviceCodeBody.message ||\n      `To sign in, use a web browser to open the page ${deviceCodeBody.verification_uri_complete} and enter the code ${deviceCodeBody.user_code} to authenticate.`;\n    io.log.info(message);\n    io.log.info(`Verification_Uri: ${deviceCodeBody.verification_uri_complete || deviceCodeBody.verification_uri}`);\n    io.log.info(`User_Code: ${deviceCodeBody.user_code}`);\n\n    const openVerificationUri = async () => {\n      await io.userInteractionProvider.setClipboard?.(deviceCodeBody.user_code);\n      await open(deviceCodeBody.verification_uri_complete || deviceCodeBody.verification_uri);\n    };\n\n    if (io.userInteractionProvider.showInformationMessage) {\n      io.userInteractionProvider.showInformationMessage(message, 'Open').then(button => {\n        if (button) {\n          openVerificationUri();\n        }\n      });\n    } else {\n      openVerificationUri();\n    }\n  }\n}\n\ninterface DeviceCodeBody {\n  user_code: string;\n  device_code: string;\n  verification_uri: string;\n  verification_uri_complete?: string;\n  expires_in: string;\n  interval?: string;\n  message?: string;\n}\n\nexport const deviceCodeFlow = new DeviceCodeFlow();\n", "import open from 'open';\n\nimport { log } from '../../../io';\nimport type * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { assertConfiguration } from '../openIdConfiguration';\nimport { OpenIdFlow } from './openIdFlow';\nimport { registerListener, unregisterListener } from './openIdHttpServer';\nimport { requestOpenIdInformation, toOpenIdInformation } from './requestOpenIdInformation';\n\nclass ImplicitFlow implements OpenIdFlow {\n  supportsFlow(flow: string): boolean {\n    return ['implicit', 'hybrid'].indexOf(flow) >= 0;\n  }\n\n  getCacheKey(config: models.OpenIdConfiguration) {\n    assertConfiguration(config, ['tokenEndpoint', 'authorizationEndpoint', 'clientId']);\n    return `implicit_${config.variablePrefix}_${config.clientId}_${config.tokenEndpoint}`;\n  }\n\n  async perform(\n    config: models.OpenIdConfiguration,\n    context: models.OpenIdContext\n  ): Promise<models.OpenIdInformation | false> {\n    const id = this.getCacheKey(config);\n    if (id) {\n      return new Promise<models.OpenIdInformation | false>((resolve, reject) => {\n        utils.report(context, 'execute OAuth2 implicit flow');\n        const state = utils.stateGenerator();\n        try {\n          const authUrl = `${config.authorizationEndpoint}${\n            config.authorizationEndpoint && config.authorizationEndpoint.indexOf('?') > 0 ? '&' : '?'\n          }${utils.toQueryParams({\n            client_id: config.clientId,\n            scope: config.scope ?? 'openid',\n            response_type: config.responseType ?? 'token',\n            nonce: utils.stateGenerator(),\n            state,\n            response_mode: config.responseMode,\n            audience: config.audience,\n            resource: config.resource,\n            redirect_uri: config.redirectUri?.toString(),\n          })}`;\n\n          let unregisterProgress: (() => void) | undefined;\n          if (context.progress) {\n            unregisterProgress = context.progress.register(() => {\n              unregisterListener(state);\n              resolve(false);\n            });\n          }\n\n          registerListener({\n            id: state,\n            port: config.serverPort || Number(config.redirectUri?.port),\n            path: config.redirectUri?.pathname || '',\n            name: `authorization for ${config.clientId}: ${config.authorizationEndpoint}`,\n            resolve: params => {\n              if (params.state === state) {\n                if (params.code) {\n                  const openIdInformation = requestOpenIdInformation(\n                    {\n                      url: config.tokenEndpoint || '',\n                      method: 'POST',\n                      body: utils.toQueryParams({\n                        grant_type: 'authorization_code',\n                        scope: config.scope,\n                        code: params.code,\n                        redirect_uri: config.redirectUri?.toString(),\n                      }),\n                    },\n                    {\n                      config,\n                      id,\n                      title: `implicit: ${config.clientId}`,\n                      description: `${config.variablePrefix} - ${config.tokenEndpoint}`,\n                      details: {\n                        clientId: config.clientId,\n                        tokenEndpoint: config.tokenEndpoint,\n                        grantType: 'implicit',\n                      },\n                    },\n                    context\n                  );\n                  resolve(openIdInformation);\n                  return {\n                    valid: true,\n                    message: 'code received.',\n                    statusMessage: 'code valid. starting code exchange',\n                  };\n                }\n                if (params.access_token) {\n                  if (unregisterProgress) {\n                    unregisterProgress();\n                  }\n                  const openIdInformation = toOpenIdInformation(params, new Date().getTime(), {\n                    config,\n                    id,\n                    title: `implicit: ${config.clientId}`,\n                    description: config.tokenEndpoint || '',\n                    details: {\n                      clientId: config.clientId,\n                      tokenEndpoint: config.tokenEndpoint,\n                      grantType: 'implicit',\n                    },\n                  });\n                  resolve(openIdInformation);\n                  return {\n                    valid: true,\n                    message: 'access_token received.',\n                    statusMessage: 'access_token and state valid.',\n                  };\n                }\n              }\n\n              if (params.error_description) {\n                return {\n                  valid: false,\n                  message: decodeURIComponent(params.error_description),\n                  statusMessage: 'no access_token received',\n                };\n              }\n              return {\n                valid: false,\n                message: 'no access_token received',\n                statusMessage: 'no access_token received',\n              };\n            },\n            reject,\n          });\n          log.debug(`open browser: ${authUrl}`);\n          utils.report(context, `implicit browser authentication pending: ${authUrl}`);\n          open(authUrl);\n        } catch (err) {\n          unregisterListener(state);\n          reject(err);\n        }\n      });\n    }\n    return false;\n  }\n}\n\nexport const implicitFlow = new ImplicitFlow();\n", "import type * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { assertConfiguration } from '../openIdConfiguration';\nimport { OpenIdFlow } from './openIdFlow';\nimport { requestOpenIdInformation } from './requestOpenIdInformation';\n\nclass PasswordFlow implements OpenIdFlow {\n  supportsFlow(flow: string): boolean {\n    return ['password'].indexOf(flow) >= 0;\n  }\n\n  getCacheKey(config: models.OpenIdConfiguration) {\n    assertConfiguration(config, ['tokenEndpoint', 'clientId', 'username', 'password']);\n    return `password_${config.variablePrefix}_${config.clientId}_${config.username}_${config.tokenEndpoint}`;\n  }\n\n  async perform(\n    config: models.OpenIdConfiguration,\n    context: models.OpenIdContext\n  ): Promise<models.OpenIdInformation | false> {\n    const id = this.getCacheKey(config);\n    if (id) {\n      utils.report(context, 'execute OAuth2 password flow');\n      return requestOpenIdInformation(\n        {\n          url: config.tokenEndpoint || '',\n          method: 'POST',\n          body: utils.toQueryParams({\n            grant_type: 'password',\n            scope: config.scope,\n            username: config.username,\n            password: config.password,\n            audience: config.audience,\n            resource: config.resource,\n          }),\n        },\n        {\n          config,\n          id,\n          title: `password flow: ${config.username} (${config.clientId})`,\n          description: `${config.variablePrefix} - ${config.tokenEndpoint}`,\n          details: {\n            clientId: config.clientId,\n            tokenEndpoint: config.tokenEndpoint,\n            grantType: 'password',\n            username: config.username,\n          },\n        },\n        context\n      );\n    }\n    return false;\n  }\n}\n\nexport const passwordFlow = new PasswordFlow();\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { requestOpenIdInformation } from './requestOpenIdInformation';\n\nclass RefreshTokenFlow {\n  private isTokenExpired(time: number, timeSkew: number, expiresIn?: number) {\n    if (typeof expiresIn !== 'undefined') {\n      return time + 1000 * (expiresIn - timeSkew) < new Date().getTime();\n    }\n    return false;\n  }\n\n  async perform(\n    openIdInformation: models.OpenIdInformation,\n    context: models.OpenIdContext\n  ): Promise<models.OpenIdInformation | false> {\n    if (!this.isTokenExpired(openIdInformation.time, openIdInformation.timeSkew, openIdInformation.expiresIn)) {\n      return openIdInformation;\n    }\n    if (\n      openIdInformation.refreshToken &&\n      !this.isTokenExpired(openIdInformation.time, openIdInformation.timeSkew, openIdInformation.refreshExpiresIn)\n    ) {\n      utils.report(context, 'execute OAuth2 refresh_token flow');\n      const { tokenEndpoint, scope, resource, audience } = openIdInformation.config;\n      return requestOpenIdInformation(\n        {\n          url: tokenEndpoint || '',\n          method: 'POST',\n          body: utils.toQueryParams({\n            grant_type: 'refresh_token',\n            refresh_token: openIdInformation.refreshToken,\n            scope,\n            audience,\n            resource,\n          }),\n        },\n        {\n          config: openIdInformation.config,\n          id: openIdInformation.id,\n          title: openIdInformation.title,\n          description: openIdInformation.description,\n          details: {\n            clientId: openIdInformation.config.clientId,\n            tokenEndpoint: openIdInformation.config.tokenEndpoint,\n            grantType: 'refresh_token',\n          },\n        },\n        context\n      );\n    }\n    return false;\n  }\n}\n\nexport const refreshTokenFlow = new RefreshTokenFlow();\n", "import encodeUrl from 'encodeurl';\n\nimport type * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { assertConfiguration } from '../openIdConfiguration';\nimport { requestOpenIdInformation } from './requestOpenIdInformation';\n\nexport class TokenExchangeFlow {\n  static getCacheKey(config: models.OpenIdConfiguration): string | false {\n    assertConfiguration(config, ['tokenEndpoint', 'clientId', 'clientSecret']);\n    return `${config.tokenEndpoint}_${config.clientId}`;\n  }\n\n  static async perform(\n    config: models.OpenIdConfiguration,\n    openIdInformation: models.OpenIdInformation,\n    context: models.OpenIdContext\n  ): Promise<models.OpenIdInformation | false> {\n    if (openIdInformation) {\n      utils.report(context, 'execute OAuth2 token exchange flow');\n      const jwtToken = utils.decodeJWT(openIdInformation.accessToken);\n\n      return requestOpenIdInformation(\n        {\n          url: config.tokenEndpoint || '',\n          method: 'POST',\n          body: utils.toQueryParams({\n            grant_type: 'urn:ietf:params:oauth:grant-type:token-exchange',\n            requested_token_type: 'urn:ietf:params:oauth:token-type:access_token',\n            subject_token_type: 'urn:ietf:params:oauth:token-type:access_token',\n            scope: config.scope ?? 'openid',\n            subject_issuer: config.subjectIssuer || jwtToken?.iss,\n            subject_token: encodeUrl(openIdInformation.accessToken),\n            audience: config.audience,\n            resource: config.resource,\n          }),\n        },\n        {\n          config,\n          id: openIdInformation.id,\n          title: `${openIdInformation.title} (token exchange)`,\n          description: openIdInformation.description,\n          details: {\n            clientId: config.clientId,\n            tokenEndpoint: config.tokenEndpoint,\n            grantType: 'urn:ietf:params:oauth:grant-type:token-exchange',\n          },\n        },\n        context\n      );\n    }\n    return false;\n  }\n}\n", "import { HookCancel } from 'hookpoint';\n\nimport { log } from '../../io';\nimport * as models from '../../models';\nimport { userSessionStore } from '../../store';\nimport * as utils from '../../utils';\nimport * as flows from './flow';\nimport { getOpenIdConfiguration, isOpenIdConfigurationEqual } from './openIdConfiguration';\n\nexport async function oauth2VariableReplacer(\n  text: unknown,\n  type: string,\n  context: models.ProcessorContext\n): Promise<unknown> {\n  if (type.toLowerCase() === 'authorization' && utils.isString(text)) {\n    const match = utils.OAuth2Regex.exec(text);\n    if (match && match.groups) {\n      const flow = match.groups.flow || 'client_credentials';\n      utils.report(context, `get OAuth2 Authorization (${flow})`);\n\n      const openIdInformation = await getOAuth2Response(\n        flow,\n        match.groups.variablePrefix,\n        context,\n        match.groups.tokenExchangePrefix\n      );\n\n      if (openIdInformation) {\n        return `Bearer ${openIdInformation.accessToken}`;\n      }\n      utils.addTestResultToHttpRegion(context.httpRegion, {\n        message: 'OAuth2 did not retrieve AccessToken',\n        status: models.TestResultStatus.ERROR,\n      });\n      return HookCancel;\n    }\n  }\n  return text;\n}\n\nexport async function getOAuth2Response(\n  flow: string,\n  prefix: string | undefined,\n  context: models.OpenIdContext,\n  tokenExchangePrefix?: string\n): Promise<models.OpenIdInformation | undefined> {\n  const openIdFlow = getOpenIdFlow(flow);\n  if (openIdFlow) {\n    const config = getOpenIdConfiguration(prefix, context.variables);\n    const cacheKey = openIdFlow.getCacheKey(config);\n\n    const tokenExchangeConfig = getOpenIdConfiguration(tokenExchangePrefix, context.variables);\n    let openIdInformation = getSessionOpenIdInformation(cacheKey, tokenExchangePrefix ? tokenExchangeConfig : config);\n    userSessionStore.removeUserSession(cacheKey);\n    if (openIdInformation) {\n      log.trace(`openid refresh token flow used: ${cacheKey}`);\n      openIdInformation = await flows.refreshTokenFlow.perform(openIdInformation, context);\n    }\n    if (!openIdInformation) {\n      log.trace(`openid flow ${flow} used: ${cacheKey}`);\n      openIdInformation = await openIdFlow.perform(config, context);\n      if (openIdInformation && tokenExchangePrefix) {\n        openIdInformation = await flows.TokenExchangeFlow.perform(tokenExchangeConfig, openIdInformation, context);\n      }\n    }\n    if (openIdInformation) {\n      log.trace(`openid flow ${flow} finished`);\n      if (utils.isProcessorContext(context)) {\n        utils.setVariableInContext({ oauth2Session: openIdInformation }, context);\n      }\n      userSessionStore.setUserSession(openIdInformation);\n      keepAlive(cacheKey, context.variables);\n      return openIdInformation;\n    }\n  }\n  return undefined;\n}\n\nfunction getSessionOpenIdInformation(\n  cacheKey: string,\n  config: models.OpenIdConfiguration\n): models.OpenIdInformation | false {\n  const openIdInformation = userSessionStore.userSessions.find(obj => obj.id === cacheKey);\n  if (utils.isOpenIdInformation(openIdInformation) && isOpenIdConfigurationEqual(openIdInformation.config, config)) {\n    return openIdInformation;\n  }\n  return false;\n}\n\nfunction getOpenIdFlow(flowType: string) {\n  const openIdFlows: Array<flows.OpenIdFlow> = [\n    flows.authorizationCodeFlow,\n    flows.clientCredentialsFlow,\n    flows.deviceCodeFlow,\n    flows.passwordFlow,\n    flows.implicitFlow,\n  ];\n  return openIdFlows.find(flow => flow.supportsFlow(flowType));\n}\n\nfunction keepAlive(cacheKey: string, variables: models.Variables) {\n  const openIdInformation = userSessionStore.userSessions.find(obj => obj.id === cacheKey);\n  if (\n    utils.isOpenIdInformation(openIdInformation) &&\n    openIdInformation.expiresIn &&\n    openIdInformation.refreshToken &&\n    openIdInformation.config.keepAlive\n  ) {\n    const timeoutId = setTimeout(\n      async () => {\n        const result = await flows.refreshTokenFlow.perform(openIdInformation, { variables });\n        if (result) {\n          log.trace(`token ${result.title} refreshed`);\n          userSessionStore.setUserSession(result);\n          keepAlive(cacheKey, variables);\n        }\n      },\n      (openIdInformation.expiresIn - openIdInformation.timeSkew) * 1000\n    );\n    openIdInformation.delete = () => clearTimeout(timeoutId);\n  }\n}\n", "import * as models from '../../models';\nimport { getOAuth2Response, oauth2VariableReplacer } from './oauth2VariableReplacer';\n\nexport function registerOAuth2Plugin(api: models.HttpyacHooksApi) {\n  api.hooks.replaceVariable.addHook('oauth2', oauth2VariableReplacer);\n  api.hooks.provideVariables.addHook('oauth2', () => ({\n    $getOAuth2Response: getOAuth2Response,\n  }));\n}\n", "import { OpenIdConfiguration, ProcessorContext, Variables } from '../../../models';\nimport { getOAuth2Response } from '../../oauth2';\nimport { setVariableInContext } from '../../../utils';\nimport { log } from '../../../io';\nexport async function replaceIntellijVariableAuth(\n  variable: string,\n  context: ProcessorContext\n): Promise<string | undefined> {\n  const trimmedVariable = variable.trim();\n  if (trimmedVariable.startsWith('$auth.token') || trimmedVariable.startsWith('$auth.idToken')) {\n    const token = await getOAuthToken(trimmedVariable, context);\n    if (token) {\n      return `${token}`;\n    }\n  }\n  return undefined;\n}\n\nasync function getOAuthToken(variable: string, context: ProcessorContext) {\n  const match = /^\\$auth.(?<type>token|idToken)\\s*\\(\\s*\"?(?<name>[^\"]*)\"?\\s*\\)$/u.exec(variable);\n  if (match && match.groups?.type && match.groups?.name) {\n    const authConfig = getOpenIdConfiguration(match.groups.name, context.variables);\n    if (!authConfig?.flow) {\n      return undefined;\n    }\n    setVariableInContext(\n      {\n        intellij_oauth2: authConfig.config,\n      },\n      context\n    );\n\n    const openIdInformation = await getOAuth2Response(authConfig.flow, 'intellij_oauth2', context);\n\n    if (authConfig.useIdToken || match.groups.type === 'idToken') {\n      return openIdInformation?.idToken;\n    }\n    return openIdInformation?.accessToken;\n  }\n  return undefined;\n}\n\nfunction getOpenIdConfiguration(name: string, variables: Variables) {\n  if (!isIntellijAuth(variables.Security)) {\n    log.warn('no intellij auth security found');\n    return undefined;\n  }\n  const auth = variables.Security?.Auth?.[name];\n  if (!auth) {\n    log.warn(`no auth security found with name ${name}`);\n    return undefined;\n  }\n\n  const config: OpenIdConfiguration = {\n    variablePrefix: '__intellij_oauth2__',\n    authorizationEndpoint: auth['Auth URL'],\n    deviceCodeEndpoint: auth['Device Auth URL'],\n    tokenEndpoint: auth['Token URL'],\n    clientId: auth['Client ID'],\n    clientSecret: auth['Client Secret'],\n    resource: transformCustomRequestParamterToString(auth['Custom Request Parameters']?.resource),\n    audience: transformCustomRequestParamterToString(auth['Custom Request Parameters']?.audience),\n    scope: auth.Scope,\n    username: auth.Username,\n    password: auth.Password,\n    useAuthorizationHeader: auth['Client Credentials'] === 'basic',\n    usePkce: !!auth.PKCE,\n  };\n\n  return {\n    flow: mapGrantType(auth['Grant Type']),\n    useIdToken: auth['Use ID Token'],\n    config,\n  };\n}\n\nfunction transformCustomRequestParamterToString(\n  val: undefined | string | Array<string> | CustomRequestParameter | Array<CustomRequestParameter>\n): string | Array<string> | undefined {\n  if (!val) {\n    return val;\n  }\n  if (typeof val === 'string') {\n    return val;\n  }\n  if (Array.isArray(val)) {\n    return val.map(v => (typeof v === 'string' ? v : v.Value));\n  }\n  return val.Value;\n}\n\nfunction mapGrantType(\n  type: undefined | 'Authorization Code' | 'Implicit' | 'Password' | 'Client Credentials' | 'Device Authorization'\n) {\n  switch (type) {\n    case 'Authorization Code':\n      return 'authorization_code';\n    case 'Client Credentials':\n      return 'client_credentials';\n    case 'Device Authorization':\n      return 'device_code';\n    case 'Implicit':\n      return 'implicit';\n    case 'Password':\n      return 'password';\n    default:\n      return undefined;\n  }\n}\n\ninterface IntellijSecurity {\n  Auth: Record<\n    string,\n    {\n      Type: 'OAuth2' | 'Mock';\n      'Grant Type'?: 'Authorization Code' | 'Implicit' | 'Password' | 'Client Credentials' | 'Device Authorization';\n      'Auth URL'?: string;\n      'Token URL'?: string;\n      'Redirect URL'?: string;\n      'Client ID'?: string;\n      'Client Secret'?: string;\n      'Client Credentials'?: boolean | 'basic' | 'in body' | 'none';\n      Username?: string;\n      Password?: string;\n      'Acquire Automatically'?: boolean;\n      Scope?: string;\n      State?: string;\n      PKCE?: boolean | { 'Code Challenge Method': 'SHA-256' | 'Plain'; 'Code Verifier': string };\n      'Open Complete URI'?: boolean;\n      'Device Auth URL'?: string;\n      'Start Polling After Browser'?: boolean;\n      'Use ID Token'?: boolean;\n      'Custom Request Parameters': {\n        resource: string | Array<string> | CustomRequestParameter | Array<CustomRequestParameter>;\n        audience: string | Array<string>;\n      };\n      Token?: 'string';\n      'ID Token'?: string;\n    }\n  >;\n}\ntype CustomRequestParameter = {\n  Value: string;\n  Use: 'In Auth Request' | 'In Token Request' | 'Everywhere';\n};\n\nfunction isIntellijAuth(obj: unknown): obj is IntellijSecurity {\n  const sec = obj as IntellijSecurity;\n  return !!sec?.Auth;\n}\n", "import { v4 } from 'uuid';\n\nimport * as utils from '../../../utils';\n\nexport function replaceIntellijVariableRandom(variable: string): string | undefined {\n  const trimmedVariable = variable.trim();\n  if (['$uuid', '$random.uuid'].indexOf(trimmedVariable) >= 0) {\n    return v4();\n  }\n  if (trimmedVariable === '$timestamp') {\n    return utils.toString(Date.now());\n  }\n  if (trimmedVariable === '$isoTimestamp') {\n    return new Date().toISOString();\n  }\n  if (trimmedVariable === '$randomInt') {\n    return `${Math.floor(Math.random() * 1000)}`;\n  }\n  if (trimmedVariable.startsWith('$random.integer')) {\n    const float = randomFloat(trimmedVariable);\n    if (float) {\n      return `${Math.floor(float)}`;\n    }\n  }\n  if (trimmedVariable.startsWith('$random.float')) {\n    const float = randomFloat(trimmedVariable);\n    if (float) {\n      return `${float}`;\n    }\n  }\n  if (trimmedVariable.startsWith('$random.alphabetic')) {\n    return randomAlphabetic(trimmedVariable);\n  }\n  if (trimmedVariable.startsWith('$random.alphanumeric')) {\n    return randomAlphanumeric(trimmedVariable);\n  }\n  if (trimmedVariable.startsWith('$random.hexadecimal')) {\n    return randomHexadecimal(trimmedVariable);\n  }\n\n  if (trimmedVariable.startsWith('$random.email')) {\n    return utils.randomEmail();\n  }\n\n  return undefined;\n}\n\nfunction randomFloat(variable: string) {\n  const match = /^\\$random.(integer|float)\\s*\\(\\s*(?<from>-?\\d+)\\s*,\\s*(?<to>-?\\d+)\\s*\\)$/u.exec(variable);\n  if (match && match.groups?.from && match.groups?.to) {\n    let from = utils.toNumber(match.groups?.from) || 0;\n    let to = utils.toNumber(match.groups?.to) || 0;\n    if (!Number.isNaN(from) && !Number.isNaN(to)) {\n      if (from > to) {\n        const temp = to;\n        to = from;\n        from = temp;\n      }\n      return Math.random() * (to - from) + from;\n    }\n  }\n  return undefined;\n}\n\nfunction randomAlphabetic(variable: string) {\n  const match = /^\\$random.alphabetic\\s*\\(\\s*(?<length>-?\\d+)\\s*\\)\\s*$/u.exec(variable);\n  if (match && match.groups?.length) {\n    const length = utils.toNumber(match.groups?.length);\n    if (length) {\n      return utils.randomText(length, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz');\n    }\n  }\n  return undefined;\n}\n\nfunction randomAlphanumeric(variable: string) {\n  const match = /^\\$random.alphanumeric\\s*\\(\\s*(?<length>-?\\d+)\\s*\\)\\s*$/u.exec(variable);\n  if (match && match.groups?.length) {\n    const length = utils.toNumber(match.groups?.length);\n    if (length) {\n      return utils.randomText(length);\n    }\n  }\n  return undefined;\n}\n\nfunction randomHexadecimal(variable: string) {\n  const match = /^\\$random.hexadecimal\\s*\\(\\s*(?<length>-?\\d+)\\s*\\)\\s*$/u.exec(variable);\n  if (match && match.groups?.length) {\n    const length = utils.toNumber(match.groups?.length);\n    if (length) {\n      return utils.randomText(length, '1234567890ABCDEF');\n    }\n  }\n  return undefined;\n}\n", "import * as models from '../../../models';\nimport { parseHandlebarsString } from '../../../utils';\nimport { replaceIntellijVariableAuth } from './replaceIntellijVariableAuth';\nimport { replaceIntellijVariableRandom } from './replaceIntellijVariableRandom';\n\nexport async function replaceDynamicIntellijVariables(\n  text: unknown,\n  _type: models.VariableType | string,\n  context: models.ProcessorContext\n): Promise<unknown> {\n  return parseHandlebarsString(text, async (variable: string) => {\n    const randomResult = replaceIntellijVariableRandom(variable);\n    if (randomResult) {\n      return randomResult;\n    }\n    return await replaceIntellijVariableAuth(variable, context);\n  });\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport {\n  HttpClientRequest,\n  PreRequestHttpClientRequest,\n  RequestBody,\n  RequestEnvironment,\n  RequestHeader,\n  RequestHeaders,\n  RequestUrl,\n  Variables,\n} from './stubs';\nimport { IntellijVariables } from './intellijVariables';\nimport { replaceIntellijVariableRandom } from '../replacer';\n\nexport class IntellijHttpClientRequest implements HttpClientRequest {\n  private _url: string;\n  method: string;\n  private _body: string | undefined;\n  headers: RequestHeaders;\n  environment: RequestEnvironment;\n  variables: Variables;\n\n  public url() {\n    return this._url;\n  }\n  public body(): string {\n    return this._body || '';\n  }\n  constructor(context: models.ProcessorContext) {\n    this._url = context.request?.url || '';\n    this.method = context.request?.method || '';\n    this._body = context.request?.body && utils.toString(context.request?.body);\n    this.headers = new IntellijRequestHeaders(context);\n    this.environment = new IntellijRequestEnvironment(context.variables);\n    this.variables = new IntellijVariables(context);\n  }\n}\n\nexport class IntellijPreRequestHttpClientRequest implements PreRequestHttpClientRequest {\n  url: RequestUrl;\n  method: string;\n  body: IntellijRequestBody;\n  headers: RequestHeaders;\n  environment: RequestEnvironment;\n  variables: Variables;\n\n  constructor(context: models.ProcessorContext) {\n    this.url = new IntellijRequestUrl(context);\n    this.method = context.request?.method || '';\n    this.body = new IntellijRequestBody(context);\n    this.headers = new IntellijRequestHeaders(context);\n    this.environment = new IntellijRequestEnvironment(context.variables);\n    this.variables = new IntellijVariables(context);\n  }\n}\n\nclass IntellijRequestBody implements RequestBody {\n  constructor(private readonly context: models.ProcessorContext) {}\n  getRaw(): string {\n    return utils.toString(this.context.request?.body) || '';\n  }\n  tryGetSubstituted(): string {\n    const result = tryGetSubstituted(this.getRaw(), this.context.variables);\n    if (result && this.context.request?.body) {\n      this.context.request.body = result;\n    }\n    return result;\n  }\n}\n\nclass IntellijRequestHeaders implements RequestHeaders {\n  constructor(private readonly context: models.ProcessorContext) {}\n  all(): Array<RequestHeader> {\n    if (this.context.request?.headers) {\n      return Object.keys(this.context.request.headers).map(name => new IntellijRequestHeader(name, this.context));\n    }\n    return [];\n  }\n  findByName(name: string): RequestHeader | null {\n    if (utils.getHeader(this.context.request?.headers, name)) {\n      return new IntellijRequestHeader(name, this.context);\n    }\n    return null;\n  }\n}\n\nclass IntellijRequestHeader implements RequestHeader {\n  constructor(\n    readonly name: string,\n    private readonly context: models.ProcessorContext\n  ) {}\n  value(): string {\n    return this.getRawValue();\n  }\n  getRawValue(): string {\n    return utils.toString(utils.getHeader(this.context.request?.headers, this.name)) || '';\n  }\n  tryGetSubstitutedValue(): string {\n    const result = tryGetSubstituted(this.getRawValue(), this.context.variables);\n    if (result && this.context.request?.headers) {\n      utils.deleteHeader(this.context.request.headers, this.name);\n      this.context.request.headers[this.name] = result;\n    }\n    return result;\n  }\n}\n\nclass IntellijRequestUrl implements RequestUrl {\n  constructor(private readonly context: models.ProcessorContext) {}\n  getRaw(): string {\n    return this.context.request?.url || '';\n  }\n  tryGetSubstituted(): string {\n    const result = tryGetSubstituted(this.getRaw(), this.context.variables);\n    if (result && this.context.request?.body) {\n      this.context.request.body = result;\n    }\n    return result;\n  }\n}\n\nclass IntellijRequestEnvironment implements RequestEnvironment {\n  constructor(private readonly variables: models.Variables) {}\n  get(name: string): string | null {\n    const result = utils.toString(this.variables[name]);\n    if (utils.isUndefined(result)) {\n      return null;\n    }\n    return result;\n  }\n}\n\nfunction tryGetSubstituted(value: string, variables: models.Variables) {\n  let result = value;\n\n  const replacers: Array<(variable: string) => string | undefined> = [\n    replaceIntellijVariableRandom,\n    variable => {\n      const obj = variables[variable];\n      if (!utils.isUndefined(obj)) {\n        return utils.toString(obj);\n      }\n      return undefined;\n    },\n  ];\n\n  for (const replacer of replacers) {\n    result = parseHandlebars(result, replacer);\n  }\n  return result;\n}\n\nfunction parseHandlebars(text: string, evalExpression: (variable: string, searchValue: string) => string | undefined) {\n  if (!utils.isString(text)) {\n    return text;\n  }\n  let match: RegExpExecArray | null;\n  let start;\n  let result = text;\n  let infiniteLoopStopper = 0;\n  while (start !== result && infiniteLoopStopper++ < 100) {\n    start = result;\n    while ((match = utils.HandlebarsSingleLine.exec(start)) !== null) {\n      const [searchValue, variable] = match;\n      const value = evalExpression(variable, searchValue);\n      if (typeof value !== 'undefined' && searchValue === text) {\n        return value;\n      }\n      const valueString = utils.toString(value);\n      if (typeof valueString !== 'undefined') {\n        result = result.replace(searchValue, () => valueString);\n      }\n    }\n  }\n  return result;\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { ContentType, HttpResponse, ResponseHeaders, TextStreamResponse } from './stubs';\n\nexport class IntellijHttpResponse implements HttpResponse {\n  body: string | TextStreamResponse | unknown;\n  status: number;\n  contentType: ContentType;\n  headers: ResponseHeaders;\n\n  constructor(response: models.HttpResponse) {\n    this.body = response.parsedBody || response.body;\n    this.status = response.statusCode;\n    this.contentType = toContentType(response.contentType);\n    this.headers = new IntellijHeaders(response.headers);\n  }\n}\n\nfunction toContentType(contentType?: models.ContentType) {\n  return {\n    mimeType: contentType?.mimeType || 'application/octet-stream',\n    charset: contentType?.charset || 'utf-8',\n  };\n}\n\nexport class IntellijHeaders implements ResponseHeaders {\n  constructor(private readonly headers: Record<string, unknown> | undefined) {}\n\n  valueOf(headerName: string): string | null {\n    if (this.headers) {\n      const obj = utils.getHeader(this.headers, headerName);\n      if (obj && utils.isString(obj)) {\n        return obj;\n      }\n    }\n    return null;\n  }\n  valuesOf(headerName: string): string[] {\n    if (this.headers) {\n      const obj = utils.getHeader(this.headers, headerName);\n      if (obj) {\n        if (utils.isString(obj)) {\n          return [obj];\n        }\n        if (Array.isArray(obj)) {\n          return obj;\n        }\n      }\n    }\n    return [];\n  }\n}\n\nexport class IntellijTextStreamResponse implements HttpResponse {\n  body: TextStreamResponse;\n  status = 0;\n  contentType: ContentType = toContentType();\n  headers: ResponseHeaders;\n\n  private lazyHeaders: Record<string, unknown> = {};\n  constructor(\n    private readonly requestClient: models.RequestClient,\n    private readonly resolve: () => void\n  ) {\n    this.body = {\n      onEachLine: (...args) => this.onEachLine(...args),\n      onEachMessage: (...args) => this.onEachMessage(...args),\n    };\n    this.headers = new IntellijHeaders(this.lazyHeaders);\n  }\n  onEachLine(\n    subscriber: (line: string | object, unsubscribe: () => void) => void,\n    onFinish?: (() => void) | undefined\n  ): void {\n    this.onEachMessage(subscriber, onFinish);\n  }\n  onEachMessage(\n    subscriber: (\n      message: string | object,\n      unsubscribe: () => void,\n      output?: ((answer: string) => void) | undefined\n    ) => void,\n    onFinish?: (() => void) | undefined\n  ): void {\n    const subscriberHandler = (evt: models.RequestClientEvent<[string, models.HttpResponse]>) => {\n      const [, response] = evt.detail;\n      this.status = response.statusCode;\n      Object.assign(this.headers, response.headers);\n      this.contentType = toContentType(response.contentType);\n\n      const message = utils.toString(response.body);\n      if (message) {\n        const unsubscribe = () => {\n          this.requestClient.removeEventListener('message', subscriberHandler);\n          this.resolve();\n        };\n        const output = (answer: string) => this.requestClient.send(answer);\n        subscriber(message, unsubscribe, output);\n      }\n    };\n    this.requestClient.addEventListener('message', subscriberHandler);\n    if (onFinish) {\n      this.requestClient.addEventListener('end', onFinish);\n    }\n  }\n}\n", "import { completionItemProvider } from '../../io';\n\ncompletionItemProvider.variableProvider.push(() => [\n  {\n    name: '$uuid',\n    description: 'UUID',\n  },\n  {\n    name: '$uuid',\n    description: 'UUID',\n  },\n  {\n    name: '$random.uuid',\n    description: 'UUID',\n  },\n  {\n    name: '$timestamp',\n    description: 'Timestamp',\n  },\n  {\n    name: '$isoTimestamp',\n    description: 'ISOTimestamp',\n  },\n  {\n    name: '$randomInt',\n    description: 'randomInt (0 -1000)',\n  },\n  {\n    name: '$random.integer',\n    description: 'integer',\n  },\n  {\n    name: '$random.float',\n    description: 'float',\n  },\n  {\n    name: '$random.alphabetic',\n    description: 'Alphabetic Text',\n  },\n  {\n    name: '$random.alphanumeric',\n    description: 'Alphanumeric Text',\n  },\n  {\n    name: '$random.hexadecimal',\n    description: 'Hexadecimal String',\n  },\n  {\n    name: '$random.email',\n    description: 'EMail',\n  },\n]);\n", "import * as io from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport * as intellij from './api';\n\nexport interface IntellijScriptData {\n  fileName: string;\n}\n\nexport class IntellijAction {\n  public id = 'intellij';\n\n  public before: Array<string> | undefined;\n\n  constructor(\n    private scriptData: models.ScriptData | IntellijScriptData,\n    beforeReqeust: boolean\n  ) {\n    if (beforeReqeust) {\n      this.before = ['requestVariableReplacer'];\n    }\n  }\n\n  private isStreamingScript(scriptData: models.ScriptData) {\n    return ['onEachLine', 'onEachMessage'].some(obj => scriptData.script.indexOf(obj) > 0);\n  }\n\n  async processOnRequest(_request: models.Request, context: models.ProcessorContext): Promise<void> {\n    utils.report(context, 'execute Intellij Javascript');\n    const scriptData = await this.loadScript(context);\n    if (this.isStreamingScript(scriptData)) {\n      return;\n    }\n\n    const intellijVars = initIntellijVariables(context);\n    await this.executeScriptData(scriptData, intellijVars, context);\n  }\n\n  async processOnStreaming(context: models.ProcessorContext): Promise<void> {\n    const scriptData = await this.loadScript(context);\n    this.scriptData = scriptData;\n    if (this.isStreamingScript(scriptData) && context.requestClient) {\n      const requestClient = context.requestClient;\n      await new Promise<void>(resolve => {\n        const intellijVars = initIntellijVariables(context);\n        intellijVars.response = new intellij.IntellijTextStreamResponse(requestClient, resolve);\n        this.executeScriptData(scriptData, intellijVars, context);\n      });\n    }\n  }\n\n  async processOnResponse(response: models.HttpResponse, context: models.ProcessorContext): Promise<void> {\n    utils.report(context, 'execute Intellij Javascript');\n    const scriptData = await this.loadScript(context);\n    if (this.isStreamingScript(scriptData)) {\n      return;\n    }\n\n    const intellijVars = initIntellijVariables(context);\n    intellijVars.response = new intellij.IntellijHttpResponse(response);\n    await this.executeScriptData(scriptData, intellijVars, context);\n  }\n\n  private async executeScriptData(\n    scriptData: models.ScriptData,\n    intellijVars: Record<string, unknown>,\n    context: models.ProcessorContext\n  ) {\n    if (io.javascriptProvider.runScript) {\n      await io.javascriptProvider.runScript(scriptData.script, {\n        fileName: context.httpFile.fileName,\n        context: {\n          console: context.scriptConsole,\n          ...intellijVars,\n        },\n        lineOffset: scriptData.lineOffset,\n      });\n      return true;\n    }\n    return false;\n  }\n\n  private async loadScript(context: models.ProcessorContext): Promise<models.ScriptData> {\n    if (this.isIntellijScriptData(this.scriptData)) {\n      try {\n        return {\n          script:\n            (await utils.replaceFilePath(this.scriptData.fileName, context, path =>\n              io.fileProvider.readFile(path, 'utf-8')\n            )) || '',\n          lineOffset: 0,\n        };\n      } catch (err) {\n        (context.scriptConsole || io.log).error(this.scriptData.fileName, err);\n        throw new Error(`error loading script ${this.scriptData.fileName}`);\n      }\n    } else {\n      return this.scriptData;\n    }\n  }\n\n  private isIntellijScriptData(scriptData: IntellijScriptData | models.ScriptData): scriptData is IntellijScriptData {\n    const guard = scriptData as IntellijScriptData;\n    return !!guard.fileName;\n  }\n}\n\nfunction initIntellijVariables(context: models.ProcessorContext): intellij.IntellijJavascriptGlobal {\n  const variables: intellij.IntellijJavascriptGlobal = {\n    client: new intellij.IntellijHttpClient(context),\n    crypto: new intellij.IntellijCryptoSupport(),\n  };\n  if (context.request) {\n    if (context.httpRegion.response) {\n      variables.request = new intellij.IntellijHttpClientRequest(context);\n    } else {\n      variables.request = new intellij.IntellijPreRequestHttpClientRequest(context);\n    }\n  }\n  return variables;\n}\n", "import * as models from '../../models';\nimport { userSessionStore } from '../../store';\n\nexport async function provideIntellijGlobalVariables(): Promise<models.Variables> {\n  const userSession: models.UserSession | undefined = userSessionStore.getUserSession(`intellij_global_cache`);\n  return userSession?.details || {};\n}\n", "import * as models from '../../models';\nimport { toMultiLineString } from '../../utils';\nimport { IntellijAction, IntellijScriptData } from './intellijAction';\n\nexport interface IntelliJParserResult {\n  startLine: number;\n  endLine: number;\n  endOffset: number;\n  data: models.ScriptData | IntellijScriptData;\n  isBeforeRequest: boolean;\n  symbols?: Array<models.HttpSymbol>;\n}\n\nexport async function parseIntellijScript(\n  getLineReader: models.getHttpLineGenerator,\n  { httpRegion }: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n  const intellijContent = getIntellijContent(lineReader, !!httpRegion.request);\n\n  if (intellijContent) {\n    const intellijAction = new IntellijAction(intellijContent.data, intellijContent.isBeforeRequest);\n\n    if (intellijContent.isBeforeRequest) {\n      httpRegion.hooks.onRequest.addObjHook(obj => obj.processOnRequest, intellijAction);\n    } else {\n      httpRegion.hooks.onStreaming.addObjHook(obj => obj.processOnStreaming, intellijAction);\n      httpRegion.hooks.onResponse.addObjHook(obj => obj.processOnResponse, intellijAction);\n    }\n\n    return {\n      nextParserLine: intellijContent.endLine,\n      symbols: [\n        new models.HttpSymbol({\n          name: 'Intellij Script',\n          description: 'Intellij Script',\n          kind: models.HttpSymbolKind.script,\n          startLine: intellijContent.startLine,\n          startOffset: 0,\n          endLine: intellijContent.endLine,\n          endOffset: intellijContent.endOffset,\n          children: intellijContent.symbols,\n        }),\n      ],\n    };\n  }\n  return false;\n}\n\nfunction getIntellijContent(lineReader: models.HttpLineGenerator, hasRequest: boolean): IntelliJParserResult | false {\n  let next = lineReader.next();\n  if (!next.done) {\n    const startLine = next.value.line;\n\n    const fileMatches = /^\\s*(?<event>(<|>))\\s+(?<fileName>[^\\s{%}]+\\s*)$/u.exec(next.value.textLine);\n    if (fileMatches?.groups?.fileName) {\n      if (fileMatches.groups.event === '<' && hasRequest) {\n        return false;\n      }\n      const fileName = fileMatches.groups.fileName.trim();\n      return {\n        startLine,\n        endLine: startLine,\n        endOffset: next.value.textLine.length,\n        data: {\n          fileName,\n        },\n        isBeforeRequest: fileMatches.groups.event === '<',\n        symbols: [\n          new models.HttpSymbol({\n            name: 'filename',\n            description: fileName,\n            kind: models.HttpSymbolKind.path,\n            startLine: next.value.line,\n            startOffset: next.value.textLine.indexOf(fileName),\n            endLine: next.value.line,\n            endOffset: next.value.textLine.indexOf(fileName) + fileName.length,\n          }),\n        ],\n      };\n    }\n\n    const singleLineMatch = /^\\s*(?<event>(<|>))\\s+\\{%\\s*(?<script>.*)\\s*%\\}\\s*$/u.exec(next.value.textLine);\n    if (singleLineMatch?.groups?.script) {\n      if (singleLineMatch.groups.event === '<' && hasRequest) {\n        return false;\n      }\n      return {\n        startLine,\n        endLine: startLine,\n        endOffset: next.value.textLine.length,\n        data: {\n          script: singleLineMatch.groups.script,\n          lineOffset: startLine,\n        },\n        isBeforeRequest: singleLineMatch.groups.event === '<',\n      };\n    }\n\n    const multiLineMatch = /^\\s*(?<event>(<|>))\\s+\\{%\\s*$/u.exec(next.value.textLine);\n    if (multiLineMatch?.groups?.event) {\n      if (multiLineMatch.groups.event === '<' && hasRequest) {\n        return false;\n      }\n      next = lineReader.next();\n      const scriptLines: Array<string> = [];\n      while (!next.done) {\n        if (/^\\s*%\\}\\s*$/u.test(next.value.textLine)) {\n          return {\n            startLine,\n            endLine: next.value.line,\n            endOffset: next.value.textLine.length,\n            data: {\n              script: toMultiLineString(scriptLines),\n              lineOffset: startLine,\n            },\n            isBeforeRequest: multiLineMatch.groups.event === '<',\n          };\n        }\n        scriptLines.push(next.value.textLine);\n        next = lineReader.next();\n      }\n    }\n  }\n  return false;\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport async function replaceIntellijProjectContext(\n  text: unknown,\n  _type: string,\n  context: models.ProcessorContext\n): Promise<unknown> {\n  return utils.parseHandlebarsString(text, async (variable: string) => {\n    if (variable.trim() === '$projectRoot') {\n      return context.httpFile.rootDir;\n    }\n    return undefined;\n  });\n}\n", "import { fileProvider, log } from '../../io';\nimport { PathLike, VariableProviderContext, Variables } from '../../models';\nimport * as utils from '../../utils';\n\nexport async function provideIntellijEnvironments(context: VariableProviderContext): Promise<string[]> {\n  const envs = Object.keys(await getAllEnvironmentVariables(context));\n\n  log.info('Intellij Env Provider found environments', envs);\n  return envs;\n}\n\nasync function getAllEnvironmentVariables(context: VariableProviderContext) {\n  const envJsonFiles: Array<PathLike> = [];\n\n  const envJsonFilter = (file: string) => ['http-client.env.json', 'http-client.private.env.json'].includes(file);\n\n  const globalEnv = process.env.HTTPYAC_ENV;\n  if (globalEnv && utils.isString(globalEnv)) {\n    const globalEnvAbsolute = await utils.toAbsoluteFilename(globalEnv, context.httpFile.rootDir);\n    if (globalEnvAbsolute) {\n      envJsonFiles.push(...(await readAbsoluteDirs(globalEnvAbsolute, envJsonFilter)));\n    }\n  }\n  if (context.config?.envDirName) {\n    const absolute = await utils.toAbsoluteFilename(context.config.envDirName, context.httpFile.rootDir);\n    if (absolute) {\n      envJsonFiles.push(...(await readAbsoluteDirs(absolute, envJsonFilter)));\n    }\n  }\n  const dirOfFile = fileProvider.dirname(context.httpFile.fileName);\n  if (dirOfFile) {\n    await utils.iterateUntilRoot(dirOfFile, context.httpFile.rootDir, async (dir: PathLike) => {\n      envJsonFiles.push(...(await readAbsoluteDirs(dir, envJsonFilter)));\n    });\n  }\n  const environments: Record<string, Variables> = {};\n  if (envJsonFiles.length > 0) {\n    log.trace(`Intellij environment files found: ${envJsonFiles.join(', ')}`);\n  }\n  envJsonFiles.sort((path1, path2) => {\n    const path1String = fileProvider.toString(path1);\n    const path2String = fileProvider.toString(path2);\n    const path1Private = path1String.endsWith('private.env.json');\n    const path2Private = path2String.endsWith('private.env.json');\n    if (path1Private === path2Private) {\n      return path1String.localeCompare(path2String);\n    }\n    if (path1Private) {\n      return 1;\n    }\n    return -1;\n  });\n  for (const file of envJsonFiles) {\n    const envs = await getEnvironmentVariables(file);\n    if (envs) {\n      for (const [key, value] of Object.entries(envs)) {\n        if (environments[key]) {\n          if (!fileProvider.toString(file).endsWith('private.env.json')) {\n            log.warn(`Multiple files with environment ${key} were found.`);\n          }\n          Object.assign(environments[key], value);\n        } else {\n          environments[key] = value;\n        }\n      }\n    }\n  }\n  return environments;\n}\n\nasync function readAbsoluteDirs(dir: PathLike, filter: (file: string) => boolean) {\n  const files = await utils.useDefaultOnError(fileProvider.readdir(dir), []);\n  return files.filter(filter).map(file => fileProvider.joinPath(dir, file));\n}\n\nexport async function provideIntellijVariables(\n  envs: string[] | undefined,\n  context: VariableProviderContext\n): Promise<Variables> {\n  const environments = await getAllEnvironmentVariables(context);\n  const variables: Array<Variables> = [];\n  if (envs) {\n    for (const env of envs) {\n      variables.push(environments[env]);\n    }\n  }\n  return Object.assign({}, ...variables);\n}\n\nasync function getEnvironmentVariables(fileName: PathLike): Promise<Record<string, Variables> | undefined> {\n  try {\n    if (await fileProvider.exists(fileName)) {\n      const content = await fileProvider.readFile(fileName, 'utf-8');\n      return JSON.parse(content);\n    }\n  } catch (err) {\n    log.trace(`${fileName} not found`);\n    log.trace(err);\n  }\n  return undefined;\n}\n", "import './completionItemProvider';\n\nimport * as models from '../../models';\nimport { provideIntellijGlobalVariables } from './intellijGlobalVariableProvider';\nimport { parseIntellijScript } from './intellijHttpRegionParser';\nimport { replaceIntellijProjectContext } from './intellijProjectContextReplacer';\nimport { provideIntellijEnvironments, provideIntellijVariables } from './intellijVariableProvider';\nimport { replaceDynamicIntellijVariables } from './replacer';\n\nexport function registerIntellijPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.parse.addHook('intellijScript', parseIntellijScript, { before: ['request'] });\n  api.hooks.provideEnvironments.addHook('intellij', provideIntellijEnvironments);\n  api.hooks.provideVariables.addHook('intellij', provideIntellijVariables);\n  api.hooks.provideVariables.addHook('intellij_global', provideIntellijGlobalVariables);\n  api.hooks.replaceVariable.addHook('intellijDynamic', replaceDynamicIntellijVariables, { before: ['name'] });\n  api.hooks.replaceVariable.addHook('intellijProjectContext', replaceIntellijProjectContext, { before: ['name'] });\n}\n", "import { completionItemProvider } from '../../io';\n\ncompletionItemProvider.emptyLineProvider.push(() => [\n  {\n    name: '{{@streaming\\n',\n    description: 'Streaming Javascript Block',\n  },\n  {\n    name: '{{@response\\n',\n    description: 'Response Javascript Block',\n  },\n  {\n    name: '{{@request\\n',\n    description: 'Request Javascript Block',\n  },\n]);\n\ncompletionItemProvider.variableProvider.push(() => [\n  {\n    name: '$random.alphabetic()',\n    description: 'random letters',\n  },\n  {\n    name: '$random.number()',\n    description: 'random number',\n  },\n  {\n    name: '$random.hexadecimal()',\n    description: 'random hexadecimal',\n  },\n  {\n    name: '$random.email()',\n    description: 'random email',\n  },\n  {\n    name: '$random.float()',\n    description: 'random float',\n  },\n  {\n    name: '$random.integer()',\n    description: 'random integer',\n  },\n  {\n    name: '$random.uuid()',\n    description: 'random uuid',\n  },\n  {\n    name: '$random.date()',\n    description: 'Date format function',\n  },\n]);\n", "import type { HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../models';\nimport { userSessionStore } from '../../store';\nimport { toEnvironmentKey } from '../../utils';\n\nexport async function provideGlobalVariableStore(env: string[] | undefined): Promise<models.Variables> {\n  const id = getGlobalUserSessionId(env);\n  const userSession: models.UserSession | undefined = userSessionStore.getUserSession(id);\n  return (\n    userSession?.details || {\n      $global: {},\n    }\n  );\n}\nexport class GlobalVariablesInterceptor implements HookInterceptor<[models.ProcessorContext], boolean | void> {\n  id = 'globalVariables';\n\n  async afterLoop(\n    hookContext: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    const [context] = hookContext.args;\n    const global = context.variables.$global;\n    if (global && typeof global === 'object' && Object.keys(global).length > 0) {\n      const id = getGlobalUserSessionId(context.activeEnvironment);\n      userSessionStore.setUserSession({\n        id,\n        title: 'global store',\n        description: context.activeEnvironment\n          ? `global Variables for ${context.activeEnvironment.join(', ')}`\n          : 'global Variables',\n        type: 'global_cache',\n        details: {\n          $global: global,\n        },\n      });\n    }\n    return true;\n  }\n}\nfunction getGlobalUserSessionId(env: string[] | undefined) {\n  const envKey = toEnvironmentKey(env);\n  const id = `global_cache_${envKey}`;\n  return id;\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport class HttpyacJsApi {\n  constructor(\n    private readonly context: models.ProcessorContext,\n    private readonly httpFileStore: models.HttpFileStore\n  ) {}\n\n  findHttpRegionInContext(name: string) {\n    return utils.findHttpRegionInContext(name, this.context);\n  }\n\n  async import(fileName: string) {\n    return await utils.importHttpFileInContext(fileName, this.httpFileStore, this.context);\n  }\n\n  setVariables(vars: models.Variables) {\n    utils.setVariableInContext(vars, this.context);\n  }\n\n  async execute(httpRegion: models.HttpRegion | string, vars?: models.Variables): Promise<models.Variables> {\n    if (vars) {\n      utils.setVariableInContext(vars, this.context);\n    }\n    let obj: models.HttpRegion | undefined;\n    if (utils.isString(httpRegion)) {\n      obj = utils.findHttpRegionInContext(httpRegion, this.context);\n    } else {\n      obj = httpRegion;\n    }\n    if (obj) {\n      const result = await obj?.execute(this.context);\n      if (result) {\n        const envKey = utils.toEnvironmentKey(this.context.activeEnvironment);\n        utils.setVariableInContext(obj.variablesPerEnv[envKey], this.context);\n      }\n    }\n    return this.context.variables;\n  }\n}\n", "import Module from 'module';\nimport path from 'path';\nimport vm from 'vm';\n\nimport * as io from '../../io';\nimport { log } from '../../io';\nimport { PathLike, ProcessorContext } from '../../models';\nimport { randomData } from '../../utils';\nimport { isPromise } from '../../utils/promiseUtils';\nimport { toMultiLineArray } from '../../utils/stringUtils';\n\nfunction resolveModule(request: string, context: string): string | undefined {\n  let resolvedPath: string | undefined;\n  try {\n    try {\n      resolvedPath = Module.createRequire(path.resolve(context, 'package.json')).resolve(request);\n    } catch (e) {\n      resolvedPath = require.resolve(request, { paths: [context] });\n    }\n  } catch (e) {\n    io.log.debug(e);\n  }\n  return resolvedPath;\n}\n\nexport function loadModule<T>(request: string, context: string, force = false): T | undefined {\n  if (io.userInteractionProvider.isTrusted('loadModule')) {\n    try {\n      if (force) {\n        clearModule(request, context);\n      }\n      return Module.createRequire(path.resolve(context, 'package.json'))(request);\n    } catch (e) {\n      const resolvedPath = resolveModule(request, context);\n      if (resolvedPath) {\n        if (force) {\n          clearRequireCache(resolvedPath);\n        }\n        return require(resolvedPath);\n      }\n    }\n  }\n  return undefined;\n}\n\nfunction createModule(filename: string, source?: string | undefined): Module {\n  const mod = new Module(filename, require.main);\n  mod.filename = filename;\n  // see https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L565-L640\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, no-underscore-dangle\n  mod.paths = (Module as any)._nodeModulePaths(path.dirname(filename));\n  if (source) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, no-underscore-dangle\n    (mod as any)._compile(source, filename);\n  }\n  return mod;\n}\n\nfunction clearModule(request: string, context: string): void {\n  const resolvedPath = resolveModule(request, context);\n  if (resolvedPath) {\n    clearRequireCache(resolvedPath);\n  }\n}\n\nfunction clearRequireCache(id: string, map = new Map()) {\n  const module = require.cache[id];\n  if (module) {\n    map.set(id, true);\n    // Clear children modules\n    module.children.forEach(child => {\n      if (!map.get(child.id)) {\n        clearRequireCache(child.id, map);\n      }\n    });\n    delete require.cache[id];\n  }\n}\n\nexport async function runScript(\n  source: string,\n  options: {\n    fileName: PathLike;\n    lineOffset: number;\n    context: Record<string, unknown>;\n    deleteVariable?: (key: string) => void;\n  }\n): Promise<Record<string, unknown>> {\n  if (!io.userInteractionProvider.isTrusted('runScript')) {\n    return {};\n  }\n  const filename = toModuleFilename(options.fileName);\n\n  const mod = createModule(filename);\n\n  function extendedRequire(id: string) {\n    const proivderRequire = io.javascriptProvider.require;\n    if (proivderRequire && proivderRequire[id]) {\n      return proivderRequire[id];\n    }\n    return mod.require(id);\n  }\n\n  const validContent = checkVariableNames(options.context);\n  const context = Object.assign({\n    $context: validContent,\n    ...validContent,\n  });\n\n  const contextKeys = Object.keys(context);\n  const sourceAsync = `(async function userJS(exports, require, module, __filename, __dirname, context){ with(context){${io.fileProvider.EOL}${source}${io.fileProvider.EOL}}})`;\n  const compiledWrapper = vm.runInThisContext(sourceAsync, {\n    filename,\n    lineOffset: options.lineOffset,\n    displayErrors: true,\n  });\n  await compiledWrapper.apply(context, [mod.exports, extendedRequire, mod, filename, path.dirname(filename), context]);\n\n  deleteVariables(contextKeys, context, options.deleteVariable);\n\n  let result = mod.exports;\n  if (isPromise(result)) {\n    result = await result;\n  } else {\n    for (const [key, value] of Object.entries(result)) {\n      if (isPromise(value)) {\n        result[key] = await value;\n      }\n    }\n  }\n  return result;\n}\nfunction toModuleFilename(fileName: PathLike) {\n  return io.fileProvider.fsPath(fileName) || io.fileProvider.toString(fileName);\n}\n\nfunction deleteVariables(contextKeys: string[], context: vm.Context, deleteVariable?: (key: string) => void) {\n  if (deleteVariable) {\n    for (const key of contextKeys) {\n      try {\n        if (context[key] === undefined) {\n          deleteVariable(key);\n        }\n      } catch (err) {\n        log.info(`error on delete of ${key}`, err);\n      }\n    }\n  }\n}\n\nexport async function evalExpression(\n  expression: string,\n  context: ProcessorContext,\n  scriptContext?: Record<string, unknown>\n): Promise<unknown> {\n  if (!io.userInteractionProvider.isTrusted('evalExpression')) {\n    return undefined;\n  }\n  const script = `exports.$result = (${expression});`;\n  let lineOffset = context.httpRegion.symbol.startLine;\n  if (context.httpRegion.symbol.source) {\n    const index = toMultiLineArray(context.httpRegion.symbol.source).findIndex(line => line.indexOf(expression) >= 0);\n    if (index >= 0) {\n      lineOffset += index;\n    }\n  }\n  const value = await runScript(script, {\n    fileName: context.httpFile.fileName,\n    context: {\n      ...context.variables,\n      httpFile: context.httpFile,\n      httpRegion: context.httpRegion,\n      request: context.request,\n      console: context.scriptConsole,\n      $random: randomData,\n      ...scriptContext,\n      $context: context,\n    },\n    lineOffset,\n  });\n  return value.$result;\n}\n\nfunction checkVariableNames(context: Record<string, unknown>) {\n  const result: Record<string, unknown> = {};\n\n  for (const [key, value] of Object.entries(context)) {\n    const name = key\n      .trim()\n      .replace(/\\s/gu, '-')\n      .replace(/-./gu, val => val[1].toUpperCase());\n    if (JAVASCRIPT_KEYWORDS.indexOf(name) < 0 && typeof value !== 'undefined') {\n      result[name] = value;\n    }\n  }\n  return result;\n}\n\nexport function isAllowedKeyword(key: string) {\n  if (JAVASCRIPT_KEYWORDS.indexOf(key) >= 0) {\n    log.debug(`Keyword ${key} prevented, because Javascript Keyword`);\n    return false;\n  }\n  if (HTTPYAC_KEYWORDS.indexOf(key) >= 0) {\n    log.debug(`Keyword ${key} prevented, because used by httpYac`);\n    return false;\n  }\n  return true;\n}\n\nexport const HTTPYAC_KEYWORDS = ['httpFile', 'httpRegion', 'request', 'test', 'sleep'];\n\nexport const JAVASCRIPT_KEYWORDS = [\n  'await',\n  'break',\n  'case',\n  'catch',\n  'class',\n  'const',\n  'continue',\n  'debugger',\n  'default',\n  'delete',\n  'do',\n  'else',\n  'enum',\n  'export',\n  'extends',\n  'false',\n  'finally',\n  'for',\n  'function',\n  'if',\n  'implements',\n  'import',\n  'in',\n  'instanceof',\n  'interface',\n  'let',\n  'new',\n  'null',\n  'package',\n  'private',\n  'protected',\n  'public',\n  'return',\n  'super',\n  'switch',\n  'static',\n  'this',\n  'throw',\n  'try',\n  'true',\n  'typeof',\n  'var',\n  'void',\n  'while',\n  'with',\n  'yield',\n];\n", "import { HookInterceptor, HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { HttpyacJsApi } from './httpyacJsApi';\nimport { runScript } from './moduleUtils';\n\nconst JavaScriptStart =\n  /^\\s*\\{\\{(@js\\s+)?(?<modifier>\\+|@)?(?<event>(request|streaming|response|after|responseLogging)?)?\\s*$/iu;\nconst JavaScriptEnd = /^\\s*\\}\\}\\s*$/u;\n\nexport interface ScriptData {\n  script: string;\n  lineOffset: number;\n}\n\nexport async function parseJavascript(\n  getLineReader: models.getHttpLineGenerator,\n  { httpRegion, httpFile, httpFileStore }: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n  let next = lineReader.next();\n\n  if (!next.done) {\n    const match = JavaScriptStart.exec(next.value.textLine);\n    if (match?.groups) {\n      const lineOffset = next.value.line;\n      next = lineReader.next();\n      const script: Array<string> = [];\n      while (!next.done) {\n        if (JavaScriptEnd.test(next.value.textLine)) {\n          const scriptData: ScriptData = {\n            script: utils.toMultiLineString(script),\n            lineOffset,\n          };\n          const isOnEveryRequest = match.groups.modifier === '+';\n\n          switch (match.groups.event) {\n            case 'request':\n              addRequestHook(isOnEveryRequest ? httpFile.hooks : httpRegion.hooks, scriptData, httpFileStore);\n              break;\n            case 'streaming':\n              addStreamingHook(isOnEveryRequest ? httpFile.hooks : httpRegion.hooks, scriptData, httpFileStore);\n              break;\n            case 'response':\n              addResponseHook(isOnEveryRequest ? httpFile.hooks : httpRegion.hooks, scriptData, httpFileStore);\n              break;\n            case 'after':\n              addExecuteAfterInterceptor(\n                isOnEveryRequest ? httpFile.hooks : httpRegion.hooks,\n                scriptData,\n                httpFileStore\n              );\n              break;\n            case 'responseLogging':\n              addResponseLoggingHook(isOnEveryRequest ? httpFile.hooks : httpRegion.hooks, scriptData, httpFileStore);\n              break;\n            default:\n              addExecuteHook(isOnEveryRequest ? httpFile.hooks : httpRegion.hooks, scriptData, httpFileStore);\n              break;\n          }\n\n          return {\n            nextParserLine: next.value.line,\n            symbols: [\n              new models.HttpSymbol({\n                name: 'script',\n                description: 'nodejs script',\n                kind: models.HttpSymbolKind.script,\n                startLine: lineOffset,\n                startOffset: 0,\n                endLine: next.value.line,\n                endOffset: next.value.textLine.length,\n              }),\n            ],\n          };\n        }\n        script.push(next.value.textLine);\n        next = lineReader.next();\n      }\n    }\n  }\n  return false;\n}\n\nfunction addStreamingHook(\n  hooks: { onStreaming: models.OnStreaming },\n  scriptData: ScriptData,\n  httpFileStore: models.HttpFileStore\n) {\n  hooks.onStreaming.addHook('js', async context => {\n    const result = await executeScriptData(scriptData, context, httpFileStore, 'streaming');\n    return result ? undefined : models.HookCancel;\n  });\n}\n\nfunction addExecuteHook(\n  hooks: { execute: models.ExecuteHook },\n  scriptData: ScriptData,\n  httpFileStore: models.HttpFileStore\n) {\n  hooks.execute.addHook('js', context => executeScriptData(scriptData, context, httpFileStore));\n}\nfunction addRequestHook(\n  hooks: { onRequest: models.OnRequestHook },\n  scriptData: ScriptData,\n  httpFileStore: models.HttpFileStore\n) {\n  hooks.onRequest.addHook('js', async (_request, context) => {\n    const result = await executeScriptData(scriptData, context, httpFileStore, 'request');\n    return result ? undefined : models.HookCancel;\n  });\n}\n\nfunction addResponseHook(\n  hooks: { onResponse: models.OnResponseHook },\n  scriptData: ScriptData,\n  httpFileStore: models.HttpFileStore\n) {\n  hooks.onResponse.addHook('js', async (response, context) => {\n    context.variables.response = response;\n    const result = await executeScriptData(scriptData, context, httpFileStore, 'response');\n    return result ? undefined : models.HookCancel;\n  });\n}\nfunction addResponseLoggingHook(\n  hooks: { responseLogging: models.ResponseLoggingHook },\n  scriptData: ScriptData,\n  httpFileStore: models.HttpFileStore\n) {\n  hooks.responseLogging.addHook('js', async (response, context) => {\n    const originalResponse = context.variables.response;\n    context.variables.response = response;\n    await executeScriptData(scriptData, context, httpFileStore, 'responseLogging');\n    context.variables.response = originalResponse;\n  });\n}\n\nfunction addExecuteAfterInterceptor(\n  hooks: { execute: models.ExecuteHook },\n  scriptData: ScriptData,\n  httpFileStore: models.HttpFileStore\n) {\n  hooks.execute.addInterceptor(new AfterJavascriptHookInterceptor(scriptData, httpFileStore));\n}\n\nexport class AfterJavascriptHookInterceptor implements HookInterceptor<[models.ProcessorContext], boolean> {\n  id: string;\n  constructor(\n    private readonly scriptData: ScriptData,\n    private readonly httpFileStore: models.HttpFileStore\n  ) {\n    this.id = `afterJavascript_${scriptData.script}`;\n  }\n  async afterLoop(\n    context: HookTriggerContext<[models.ProcessorContext], boolean | undefined>\n  ): Promise<boolean | undefined> {\n    return await executeScriptData(this.scriptData, context.args[0], this.httpFileStore, 'after');\n  }\n}\nasync function executeScriptData(\n  scriptData: ScriptData,\n  context: models.ProcessorContext,\n  httpFileStore: models.HttpFileStore,\n  eventName?: string\n) {\n  utils.report(context, eventName ? `execute javascript (@${eventName})` : 'execute javascript');\n  const result = await runScript(scriptData.script, {\n    fileName: context.httpFile.fileName,\n    context: {\n      ...context.variables,\n      httpFile: context.httpFile,\n      httpRegion: context.httpRegion,\n      request: context.request,\n      console: context.scriptConsole,\n      sleep: utils.sleep,\n      test: utils.testFactory(context),\n      $httpyac: new HttpyacJsApi(context, httpFileStore),\n      $random: utils.randomData,\n      $context: context,\n    },\n    lineOffset: scriptData.lineOffset,\n    deleteVariable: (key: string) => utils.deleteVariableInContext(key, context),\n  });\n  const cancel = result.$cancel;\n\n  if (cancel) {\n    delete result.$cancel;\n    utils.addSkippedTestResult(context.httpRegion);\n  }\n  utils.setVariableInContext(result, context);\n  return !cancel;\n}\n", "import { log } from '../../io';\nimport { ProcessorContext, VariableType } from '../../models';\nimport * as utils from '../../utils';\nimport { evalExpression } from './moduleUtils';\n\nexport async function replaceJavascriptExpressions(\n  text: unknown,\n  type: VariableType | string,\n  context: ProcessorContext\n): Promise<unknown> {\n  return await utils.parseHandlebarsString(text, async (variable: string, searchValue: string) => {\n    try {\n      return await evalExpression(variable, context);\n    } catch (err) {\n      if (type === VariableType.variable) {\n        (context.scriptConsole || log).debug(`variable ${variable} not defined`);\n        (context.scriptConsole || log).debug(err);\n      } else {\n        (context.scriptConsole || log).error(`expression ${variable} throws error`);\n        throw err;\n      }\n      return searchValue;\n    }\n  });\n}\n", "import './completionItemProvider';\n\nimport { default as dayjs } from 'dayjs';\nimport open from 'open';\nimport * as uuid from 'uuid';\n\nimport * as httpyac from '../..';\nimport * as models from '../../models';\nimport { GlobalVariablesInterceptor, provideGlobalVariableStore } from './globalVariableProvider';\nimport { parseJavascript } from './javascriptHttpRegionParser';\nimport { replaceJavascriptExpressions } from './javascriptVariableReplacer';\nimport * as moduleUtils from './moduleUtils';\n\n// register early to allow using imported Javascript Plugins\nhttpyac.io.javascriptProvider.loadModule = moduleUtils.loadModule;\n\nexport function registerJavascriptPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.replaceVariable.addHook('javascript', replaceJavascriptExpressions, { before: ['aws'] });\n  api.hooks.parse.addHook('javascript', parseJavascript, { before: ['request'] });\n  api.hooks.execute.addInterceptor(new GlobalVariablesInterceptor());\n  api.hooks.provideVariables.addHook('globalVariables', provideGlobalVariableStore);\n\n  addDefaultRequire();\n  httpyac.io.javascriptProvider.evalExpression = moduleUtils.evalExpression;\n  httpyac.io.javascriptProvider.runScript = moduleUtils.runScript;\n  httpyac.io.javascriptProvider.isAllowedKeyword = moduleUtils.isAllowedKeyword;\n}\n\nfunction addDefaultRequire() {\n  Object.assign(httpyac.io.javascriptProvider.require, {\n    httpyac,\n    dayjs,\n    open,\n    uuid,\n  });\n}\n", "import { IClientOptions as MQTTOptions } from 'mqtt';\n\nimport { Request } from '../../models';\n\nexport interface MQTTRequest extends Request<'MQTT'> {\n  headers?: Record<string, string | string[] | undefined> | undefined;\n  body?: string;\n  options?: MQTTOptions;\n}\n\nexport function isMQTTRequest(request: Request | undefined): request is MQTTRequest {\n  return request?.protocol === 'MQTT';\n}\n", "import { completionItemProvider } from '../../io';\nimport { isMQTTRequest } from './mqttRequest';\n\ncompletionItemProvider.emptyLineProvider.push(() => [\n  {\n    name: 'MQTT',\n    description: 'MQTT request',\n  },\n]);\n\ncompletionItemProvider.requestHeaderProvider.push(request => {\n  if (isMQTTRequest(request)) {\n    return [\n      {\n        name: 'username',\n        description: 'the username required by your broker',\n      },\n      {\n        name: 'password',\n        description: 'the password required by your broker',\n      },\n      {\n        name: 'clean',\n        description: 'true, set to false to receive QoS 1 and 2 messages while offline',\n      },\n      {\n        name: 'keepalive',\n        description: '10 seconds, set to 0 to disable',\n      },\n      {\n        name: 'QoS',\n        description: 'the QoS used for subscribe or publish',\n      },\n      { name: 'retain', description: 'the retain flat used for publish' },\n      { name: 'subscribe', description: 'topics to subscribe to' },\n      { name: 'publish', description: 'topics to publish to' },\n      { name: 'topic', description: 'topic to subscribe and publish to' },\n    ];\n  }\n  return [];\n});\n", "import { connectAsync, IClientOptions, MqttClient, MqttClientEventCallbacks } from 'mqtt';\n\nimport { log } from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { isMQTTRequest, MQTTRequest } from './mqttRequest';\n\ntype QoS = 0 | 1 | 2;\n\nexport class MQTTRequestClient extends models.AbstractRequestClient<MqttClient | undefined> {\n  private responseTemplate: Partial<models.HttpResponse> & { protocol: string } = {\n    protocol: 'MQTT',\n  };\n  private promises: Array<Promise<void>> = [];\n\n  constructor(\n    private readonly request: models.Request,\n    private readonly context: models.ProcessorContext\n  ) {\n    super();\n  }\n  get reportMessage(): string {\n    return `perform MQTT Request (${this.request.url})`;\n  }\n\n  get supportsStreaming() {\n    return true;\n  }\n\n  private _nativeClient: MqttClient | undefined;\n  get nativeClient(): MqttClient | undefined {\n    return this._nativeClient;\n  }\n\n  private get publishTopics() {\n    if (isMQTTRequest(this.request)) {\n      return [\n        ...utils.getHeaderArray(this.request.headers, 'topic'),\n        ...utils.getHeaderArray(this.request.headers, 'publish'),\n      ];\n    }\n    return [];\n  }\n\n  private get subscribeTopics() {\n    if (isMQTTRequest(this.request)) {\n      return [\n        ...utils.getHeaderArray(this.request.headers, 'topic'),\n        ...utils.getHeaderArray(this.request.headers, 'subscribe'),\n      ];\n    }\n    return [];\n  }\n\n  async connect(): Promise<MqttClient | undefined> {\n    if (isMQTTRequest(this.request)) {\n      const request = this.request;\n      const options: IClientOptions = {};\n      if (isMQTTRequest(this.request)) {\n        Object.assign(options, this.getClientOptions(this.request, this.context));\n      }\n\n      this._nativeClient = await connectAsync(this.request.url || '', options);\n      this.registerEvents(this._nativeClient);\n      this.subscribe(this._nativeClient, this.subscribeTopics, request);\n    }\n    return this._nativeClient;\n  }\n\n  async send(body?: unknown): Promise<void> {\n    if (isMQTTRequest(this.request) && this.nativeClient) {\n      const request = { ...this.request, body: utils.toString(body || this.request.body) };\n      const promise = this.publish(this.nativeClient, this.publishTopics, request);\n      this.promises.push(promise);\n      await promise;\n      const index = this.promises.findIndex(obj => obj === promise);\n      if (index >= 0) {\n        this.promises.splice(index, 1);\n      }\n    }\n  }\n\n  disconnect(err?: Error): void {\n    const close = () => {\n      this.nativeClient?.end(!!err, undefined, err => err && log.error('error on close', err));\n      this.onDisconnect();\n    };\n    if (this.promises.length > 0) {\n      Promise.all([...this.promises]).then(close);\n    } else {\n      close();\n    }\n  }\n\n  private registerEvents(client: MqttClient) {\n    client.on('message', (topic, message, packet) => {\n      this.onMessage(topic, {\n        ...this.responseTemplate,\n        statusCode: 0,\n        name: `MQTT ${topic} (${this.request.url})`,\n        message: message.toString('utf-8'),\n        request: this.request,\n        body: message.toString('utf-8'),\n        rawBody: message,\n        headers: {\n          topic,\n          ...packet.properties,\n        },\n      });\n    });\n    client.on('error', err => {\n      this.onMessage('error', {\n        ...this.responseTemplate,\n        statusCode: 1,\n        request: this.request,\n        body: utils.errorToString(err),\n      });\n    });\n\n    const metaDataEvents: Array<keyof MqttClientEventCallbacks> = [\n      'close',\n      'connect',\n      'disconnect',\n      'end',\n      'offline',\n      'outgoingEmpty',\n      'packetreceive',\n      'packetsend',\n      'reconnect',\n    ];\n    for (const event of metaDataEvents) {\n      if (utils.isString(event)) {\n        client.on(event, (packet: unknown) => {\n          this.onMetaData(event, {\n            ...this.responseTemplate,\n            statusCode: 0,\n            message: packet ? `${utils.toString(packet)}` : undefined,\n            body: {\n              event,\n              packet,\n              date: new Date(),\n            },\n          });\n        });\n      }\n    }\n  }\n\n  private getClientOptions(request: MQTTRequest, context: models.ProcessorContext): IClientOptions {\n    const { config } = context;\n\n    const configOptions: IClientOptions = {};\n    if (config?.request) {\n      const timeout = request.timeout || utils.toNumber(config.request.timeout);\n      if (timeout !== undefined) {\n        configOptions.connectTimeout = timeout;\n      }\n      if (!utils.isUndefined(config.request.rejectUnauthorized)) {\n        configOptions.rejectUnauthorized = utils.toBoolean(config.request.rejectUnauthorized, true);\n      }\n    }\n    if (request.noRejectUnauthorized) {\n      configOptions.rejectUnauthorized = false;\n    }\n\n    const headers = Object.fromEntries(\n      Object.entries(request.headers || {}).filter(\n        ([key]) => ['topic', 'qos', 'retain', 'subscribe', 'publish'].indexOf(key.toLowerCase()) < 0\n      )\n    );\n\n    return Object.assign({}, config?.request, request.options, configOptions, headers);\n  }\n\n  private subscribe(client: MqttClient, topics: string[], request: MQTTRequest) {\n    for (const topic of topics) {\n      client.subscribe(topic, {\n        qos: this.toQoS(utils.getHeaderString(request.headers, 'qos')),\n      });\n    }\n  }\n  private async publish(client: MqttClient, topics: string[], request: MQTTRequest) {\n    if (request.body) {\n      const body = request.body;\n      const header = {\n        qos: this.toQoS(utils.getHeaderString(request.headers, 'qos')),\n        retain: !!utils.getHeader(request.headers, 'retain'),\n      };\n      await Promise.all(\n        topics.map(async topic => {\n          try {\n            await client.publishAsync(topic, body, header);\n          } catch (err) {\n            log.error('publish error', err);\n          }\n        })\n      );\n    }\n  }\n  private toQoS(qos: string | undefined, defaultVal: QoS = 0): QoS {\n    switch (qos) {\n      case '2':\n        return 2;\n      case '1':\n        return 1;\n      default:\n        return defaultVal;\n    }\n  }\n}\n", "import * as utils from '../../utils';\nimport { MQTTRequestClient } from './mqttRequestClient';\nimport { userSessionStore } from '../../store';\n\nexport const parseMqttLine = utils.parseRequestLineFactory({\n  protocol: 'MQTT',\n  methodRegex: /^\\s*(MQTT(S)?)\\s+(?<url>.+?)\\s*$/u,\n  protocolRegex: /^\\s*(?<url>mqtt(s)?:\\/\\/.+?)\\s*$/iu,\n  requestClientFactory(request, context) {\n    return new MQTTRequestClient(request, context);\n  },\n  modifyRequest(request) {\n    request.supportsStreaming = true;\n  },\n  sessionStore: userSessionStore,\n});\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport async function parseMQTTResponse(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  return utils.parseInlineResponse(\n    getLineReader,\n    context,\n    /^\\s*MQTT\\s*(?<statusCode>([0-9]+))\\s*(-)?\\s*(?<statusMessage>.*)$/u\n  );\n}\n", "import './completionItemProvider';\n\nimport * as mqtt from 'mqtt';\n\nimport { javascriptProvider } from '../../io';\nimport * as models from '../../models';\nimport { parseMqttLine } from './mqttHttpRegionParser';\nimport { parseMQTTResponse } from './mqttResponseHttpRegionParser';\n\nexport function registerMqttPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.parse.addHook('mqtt', parseMqttLine, { before: ['request'] });\n  api.hooks.parse.addHook('mqttResponse', parseMQTTResponse, { before: ['requestBody'] });\n  javascriptProvider.require.mqtt = mqtt;\n}\n", "import { utils } from '../../..';\nimport { AmqpRequest } from '../amqpRequest';\n\nexport const AmqpChannelId = 'amqp_channel_id';\nexport const AmqpQueue = 'amqp_queue';\nexport const AmqpExchange = 'amqp_exchange';\nexport const AmqpMethod = 'amqp_method';\nexport const AmqpExchangeDestination = 'amqp_exchange_destination';\nexport const AmqpRoutingKey = 'amqp_routing_key';\nexport const AmqpTag = 'amqp_tag';\nexport const AmqpNoAck = 'amqp_no_ack';\nexport const AmqpExclusive = 'amqp_exclusive';\n\nexport const AmqpMandatory = 'amqp_mandatory';\nexport const AmqpInternal = 'amqp_internal';\nexport const AmqpCorrelationId = 'amqp_correlation_id';\nexport const AmqpContentType = 'amqp_content_type';\nexport const AmqpContentEncoding = 'amqp_content_encoding';\nexport const AmqpDeliveryMode = 'amqp_delivery_mode';\nexport const AmqpExpiration = 'amqp_expiration';\nexport const AmqpMessageId = 'amqp_message_id';\nexport const AmqpPriority = 'amqp_priority';\nexport const AmqpReplyTo = 'amqp_replyTo';\nexport const AmqpType = 'amqp_type';\nexport const AmqpUserId = 'amqp_user_id';\n\nexport const AmqpRequeue = 'amqp_requeue';\nexport const AmqpMultiple = 'amqp_multiple';\n\nexport const AmqpIfUnused = 'amqp_if_unused';\nexport const AmqpIfEmpty = 'amqp_if_empty';\n\nexport const AmqpPassive = 'amqp_passive';\nexport const AmqpDurable = 'amqp_durable';\nexport const AmqpAutoDelete = 'amqp_auto_delete';\n\nexport function getAmqpMethod(request: AmqpRequest) {\n  let method = utils.getHeaderString(request.headers, AmqpMethod);\n  if (!method) {\n    if (request.body) {\n      method = 'publish';\n    } else {\n      method = 'consume';\n    }\n  }\n  return method;\n}\n", "import type { AMQPProperties } from '@cloudamqp/amqp-client';\n\nimport { Request } from '../../models';\n\nexport interface AmqpRequest extends Request<string> {\n  headers?: Record<string, string | string[] | undefined> | undefined;\n  body?: string | Buffer;\n  options?: AMQPProperties;\n}\n\nexport function isAmqpRequest(request: Request | undefined): request is AmqpRequest {\n  return request?.protocol === 'AMQP';\n}\n", "import { AMQPChannel, AMQPClient } from '@cloudamqp/amqp-client';\n\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport * as amqpMethods from './amqpMethods';\nimport * as constants from './amqpMethods/amqpConstants';\nimport { AmqpRequest, isAmqpRequest } from './amqpRequest';\n\nexport class AmqpRequestClient extends models.AbstractRequestClient<AMQPClient | undefined> {\n  constructor(\n    private readonly request: models.Request,\n    private readonly context: models.ProcessorContext\n  ) {\n    super();\n  }\n  get reportMessage(): string {\n    return `perform AMQP Request (${this.request.url})`;\n  }\n\n  get supportsStreaming() {\n    return true;\n  }\n\n  public getSessionId() {\n    return utils.replaceInvalidChars(this.request.url);\n  }\n\n  private _channel: AMQPChannel | undefined;\n  public get channel(): AMQPChannel | undefined {\n    return this._channel;\n  }\n\n  private _nativeClient: AMQPClient | undefined;\n  get nativeClient(): AMQPClient | undefined {\n    return this._nativeClient;\n  }\n\n  async connect(obj: AMQPClient | undefined): Promise<AMQPClient | undefined> {\n    if (isAmqpRequest(this.request)) {\n      if (obj) {\n        this._nativeClient = obj;\n      } else {\n        this._nativeClient = new AMQPClient(this.request.url || '');\n        await this._nativeClient.connect();\n      }\n      const channelId = utils.getHeaderNumber(this.request.headers, constants.AmqpChannelId);\n      this._channel = await this._nativeClient.channel(channelId);\n      await this.executeAmqpMethod(this.request);\n      return this._nativeClient;\n    }\n    return undefined;\n  }\n\n  async send(body?: unknown): Promise<void> {\n    if (isAmqpRequest(this.request) && this.channel && body) {\n      await this.executeAmqpMethod({\n        ...this.request,\n        body: utils.toBufferLike(body),\n      });\n    }\n  }\n\n  private async executeAmqpMethod(request: AmqpRequest) {\n    if (this.channel) {\n      const context: amqpMethods.AmqpMethodContext = {\n        channel: this.channel,\n        request,\n        context: this.context,\n        onMessage: (type, msg) => this.onMessage(type, msg),\n      };\n      try {\n        const method = this.getMethod(constants.getAmqpMethod(request));\n        return await method.exchange(context);\n      } catch (err) {\n        return amqpMethods.errorToHttpResponse(err, request);\n      }\n    }\n    return undefined;\n  }\n\n  override disconnect(err?: Error): void {\n    if (err) {\n      this.channel?.close();\n      this._nativeClient?.close(err.message);\n    } else {\n      this._channel?.close();\n      this._nativeClient?.close();\n    }\n    this.onDisconnect();\n  }\n\n  private getMethod(methodName = 'publish') {\n    const result: Record<string, (context: amqpMethods.AmqpMethodContext) => Promise<models.HttpResponse | undefined>> =\n      {\n        ack: amqpMethods.ack,\n        bind: amqpMethods.bind,\n        cancel: amqpMethods.cancel,\n        consume: amqpMethods.consume,\n        declare: amqpMethods.declare,\n        delete: amqpMethods.deleteMessage,\n        nack: amqpMethods.nack,\n        publish: amqpMethods.publish,\n        purge: amqpMethods.purge,\n        subscribe: amqpMethods.consume,\n        unbind: amqpMethods.unbind,\n      };\n    if (methodName) {\n      return {\n        method: methodName,\n        exchange: result[methodName],\n      };\n    }\n\n    throw new Error(\n      `Amqp Method ${methodName} not supported (supported: ${Object.entries(amqpMethods)\n        .map(([key]) => key)\n        .join(', ')})`\n    );\n  }\n}\n", "export * from './ack';\nexport * from './amqpConstants';\nexport * from './amqpMethodContext';\nexport * from './amqpUtils';\nexport * from './bind';\nexport * from './cancel';\nexport * from './consume';\nexport * from './declare';\nexport * from './deleteMessage';\nexport * from './nack';\nexport * from './publish';\nexport * from './purge';\nexport * from './unbind';\n", "import * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\n\nexport async function ack({ channel, request }: AmqpMethodContext) {\n  const tags = utils.getHeaderArray(request.headers, constants.AmqpTag);\n  for (const tag of tags) {\n    const result = await channel.basicAck(\n      Number(tag),\n      utils.getHeaderBoolean(request.headers, constants.AmqpMultiple, true)\n    );\n    return {\n      protocol: 'AMQP',\n      name: `AMQP ack`,\n      statusCode: 0,\n      headers: {\n        channelId: channel.id,\n        method: 'ack',\n      },\n      request,\n      body: utils.stringifySafe({\n        tag,\n        ack: true,\n        result,\n      }),\n    };\n  }\n  return undefined;\n}\n", "import * as models from '../../../models';\nimport * as utils from '../../../utils';\nimport { AmqpRequest } from '../amqpRequest';\nimport { AmqpError } from './amqpMethodContext';\n\nexport function getNonAmqpHeaders(headers: Record<string, string | Array<string> | undefined> | undefined) {\n  if (headers) {\n    return Object.fromEntries(Object.entries(headers).filter(([key]) => !key.startsWith('amqp_')));\n  }\n  return undefined;\n}\n\nexport function isAmqpError(obj: unknown): obj is AmqpError {\n  const guard = obj as AmqpError;\n  return guard?.isError;\n}\n\nexport function errorToHttpResponse(err: unknown, request: AmqpRequest): models.HttpResponse & models.StreamResponse {\n  if (utils.isError(err)) {\n    return {\n      protocol: 'AMQP',\n      statusCode: 1,\n      message: err.message,\n      request,\n      body: utils.stringifySafe({\n        name: err.name,\n        message: err.message,\n        stack: err.stack,\n      }),\n    };\n  }\n  return {\n    protocol: 'AMQP',\n    statusCode: 1,\n    message: utils.toString(err),\n    body: utils.toString(err),\n  };\n}\n", "import * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\nimport { getNonAmqpHeaders } from './amqpUtils';\n\nexport async function bind({ channel, request, onMessage }: AmqpMethodContext) {\n  const exchanges = utils.getHeaderArray(request.headers, constants.AmqpExchange);\n  const queues = utils.getHeaderArray(request.headers, constants.AmqpQueue);\n  const destinationExchanges = utils.getHeaderArray(request.headers, constants.AmqpExchangeDestination);\n  const routingKey = utils.getHeaderString(request.headers, constants.AmqpRoutingKey) || '';\n  for (const exchange of exchanges) {\n    for (const queue of queues) {\n      const result = await channel.queueBind(queue, exchange, routingKey, getNonAmqpHeaders(request.headers));\n      onMessage(queue, {\n        protocol: 'AMQP',\n        name: `AMQP bind ${routingKey}`,\n        statusCode: 0,\n        headers: {\n          channelId: channel.id,\n          method: 'bind',\n          queue,\n          exchange,\n        },\n        request,\n        message: `bind ${exchange} (${routingKey}, ${queue})`,\n        body: utils.stringifySafe({\n          bind: true,\n          routingKey,\n          result,\n          queue,\n          exchange,\n        }),\n      });\n    }\n    for (const destination of destinationExchanges) {\n      const result = await channel.exchangeBind(destination, exchange, routingKey, getNonAmqpHeaders(request.headers));\n      onMessage(exchange, {\n        protocol: 'AMQP',\n        name: `AMQP bind ${routingKey}`,\n        statusCode: 0,\n        headers: {\n          channelId: channel.id,\n          method: 'bind',\n          exchange,\n        },\n        request,\n        message: `bind ${exchange} (${routingKey}, ${destination})`,\n        body: utils.stringifySafe({\n          bind: true,\n          routingKey,\n          result,\n          exchange,\n        }),\n      });\n    }\n  }\n  return undefined;\n}\n", "import * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\n\nexport async function cancel({ channel, request }: AmqpMethodContext) {\n  const tags = utils.getHeaderArray(request.headers, constants.AmqpTag);\n  for (const tag of tags) {\n    const result = await channel.basicCancel(tag);\n    return {\n      protocol: 'AMQP',\n      name: `AMQP cancel`,\n      statusCode: 0,\n      headers: {\n        channelId: channel.id,\n        method: 'cancel',\n      },\n      request,\n      body: utils.stringifySafe(\n        {\n          tag,\n          cancel: true,\n          result,\n        },\n        2\n      ),\n    };\n  }\n  return undefined;\n}\n", "import * as io from '../../../io';\nimport * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\nimport { getNonAmqpHeaders } from './amqpUtils';\n\nexport async function consume({ channel, request, onMessage }: AmqpMethodContext) {\n  const queues = utils.getHeaderArray(request.headers, constants.AmqpQueue);\n  const options = {\n    tag: utils.getHeaderString(request.headers, constants.AmqpTag),\n    noAck: utils.getHeaderBoolean(request.headers, constants.AmqpNoAck, false),\n    exclusive: utils.getHeaderBoolean(request.headers, constants.AmqpExclusive, false),\n    args: getNonAmqpHeaders(request.headers),\n  };\n  for (const queue of queues) {\n    channel.basicConsume(queue, options, async message => {\n      onMessage(queue, {\n        protocol: 'AMQP',\n        name: `AMQP consume ${queue}`,\n        statusCode: 0,\n        headers: {\n          channelId: channel.id,\n          method: 'consume',\n          queue,\n          exchange: message.exchange,\n          routingKey: message.routingKey,\n          bodySize: message.bodySize,\n          deliveryTag: message.deliveryTag,\n          consumerTag: message.consumerTag,\n          redelivered: message.redelivered,\n          messageCount: message.messageCount,\n          replyCode: message.replyCode,\n          replyText: message.replyCode,\n          options,\n        },\n        request,\n        message: `${message.bodyString()} (deliveryTag: ${message.deliveryTag}, channel: ${message.channel.id})`,\n        body: message.bodyString(),\n        rawBody: message.body ? Buffer.from(message.body) : undefined,\n      });\n    });\n  }\n  if (queues.length === 0) {\n    const message = `no queues to consume`;\n    io.userInteractionProvider.showWarnMessage?.(message);\n    io.log.warn(message);\n  }\n  return undefined;\n}\n", "import * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\n\nexport async function declare({ channel, request, onMessage }: AmqpMethodContext) {\n  const exchanges = utils.getHeaderArray(request.headers, constants.AmqpExchange);\n  const options = {\n    passive: utils.getHeaderBoolean(request.headers, constants.AmqpPassive, false),\n    durable: utils.getHeaderBoolean(request.headers, constants.AmqpDurable, true),\n    autoDelete: utils.getHeaderBoolean(request.headers, constants.AmqpAutoDelete, false),\n    internal: utils.getHeaderBoolean(request.headers, constants.AmqpInternal),\n  };\n  for (const exchange of exchanges) {\n    const type = utils.getHeaderString(request.headers, constants.AmqpType) || 'direct';\n    const result = await channel.exchangeDeclare(exchange, type, options);\n    onMessage(exchange, {\n      protocol: 'AMQP',\n      name: `AMQP declare`,\n      statusCode: 0,\n      headers: {\n        channelId: channel.id,\n        exchange,\n        method: 'declare',\n      },\n      request,\n      message: `declare`,\n      body: utils.stringifySafe(\n        {\n          ...options,\n          declare: true,\n          type,\n          result,\n        },\n        2\n      ),\n    });\n  }\n  const queues = utils.getHeaderArray(request.headers, constants.AmqpQueue);\n  for (const queue of queues) {\n    const result = await channel.queueDeclare(queue, options);\n    onMessage(queue, {\n      protocol: 'AMQP',\n      name: `AMQP declare`,\n      statusCode: 0,\n      headers: {\n        channelId: channel.id,\n        queue,\n        method: 'declare',\n      },\n      request,\n      message: `declare`,\n      body: utils.stringifySafe(\n        {\n          ...options,\n          declare: true,\n          result,\n        },\n        2\n      ),\n    });\n  }\n  return undefined;\n}\n", "import * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\n\nexport async function deleteMessage({ channel, request, onMessage }: AmqpMethodContext) {\n  const exchanges = utils.getHeaderArray(request.headers, constants.AmqpExchange);\n  const options = {\n    ifUnused: utils.getHeaderBoolean(request.headers, constants.AmqpIfUnused, true),\n    ifEmpty: utils.getHeaderBoolean(request.headers, constants.AmqpIfEmpty),\n  };\n  for (const exchange of exchanges) {\n    const result = await channel.exchangeDelete(exchange, options);\n    onMessage(exchange, {\n      protocol: 'AMQP',\n      name: `AMQP delete`,\n      statusCode: 0,\n      headers: {\n        channelId: channel.id,\n        exchange,\n        method: 'delete',\n      },\n      request,\n      message: `delete`,\n      body: utils.stringifySafe(\n        {\n          ...options,\n          delete: true,\n          result,\n        },\n        2\n      ),\n    });\n  }\n  const queues = utils.getHeaderArray(request.headers, constants.AmqpQueue);\n  for (const queue of queues) {\n    const result = await channel.queueDelete(queue, options);\n    onMessage(queue, {\n      protocol: 'AMQP',\n      name: `AMQP delete`,\n      statusCode: 0,\n      headers: {\n        channelId: channel.id,\n        queue,\n        method: 'delete',\n      },\n      request,\n      message: `delete`,\n      body: utils.stringifySafe(\n        {\n          ...options,\n          delete: true,\n          result,\n        },\n        2\n      ),\n    });\n  }\n  return undefined;\n}\n", "import * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\n\nexport async function nack({ channel, request }: AmqpMethodContext) {\n  const tags = utils.getHeaderArray(request.headers, constants.AmqpTag);\n  for (const tag of tags) {\n    const result = await channel.basicNack(\n      Number(tag),\n      utils.getHeaderBoolean(request.headers, constants.AmqpRequeue, false),\n      utils.getHeaderBoolean(request.headers, constants.AmqpMultiple, false)\n    );\n    return {\n      protocol: 'AMQP',\n      name: `AMQP nack`,\n      statusCode: 0,\n      headers: {\n        channelId: channel.id,\n        method: 'nack',\n      },\n      request,\n      body: utils.stringifySafe(\n        {\n          tag,\n          nack: true,\n          result,\n        },\n        2\n      ),\n    };\n  }\n  return undefined;\n}\n", "import { AMQPProperties } from '@cloudamqp/amqp-client';\n\nimport * as io from '../../../io';\nimport * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\nimport { getNonAmqpHeaders } from './amqpUtils';\n\nexport async function publish({ channel, request, onMessage }: AmqpMethodContext) {\n  if (request.body) {\n    const properties: AMQPProperties = {\n      appId: 'httpyac',\n      timestamp: new Date(),\n      correlationId: utils.getHeaderString(request.headers, constants.AmqpCorrelationId),\n      contentType:\n        utils.getHeaderString(request.headers, constants.AmqpContentType) ||\n        utils.getHeaderString(request.headers, 'content-type'),\n      contentEncoding: utils.getHeaderString(request.headers, constants.AmqpContentEncoding),\n      deliveryMode: utils.getHeaderNumber(request.headers, constants.AmqpDeliveryMode),\n      expiration: utils.getHeaderString(request.headers, constants.AmqpExpiration),\n      messageId: utils.getHeaderString(request.headers, constants.AmqpMessageId),\n      priority: utils.getHeaderNumber(request.headers, constants.AmqpPriority),\n      replyTo: utils.getHeaderString(request.headers, constants.AmqpReplyTo),\n      type: utils.getHeaderString(request.headers, constants.AmqpType),\n      userId: utils.getHeaderString(request.headers, constants.AmqpUserId),\n      headers: getNonAmqpHeaders(request.headers),\n    };\n    const exchanges = utils.getHeaderArray(request.headers, constants.AmqpExchange);\n    const routingKey = utils.getHeaderString(request.headers, constants.AmqpRoutingKey) || '';\n    for (const exchange of exchanges) {\n      const publish = await channel.basicPublish(\n        exchange,\n        routingKey,\n        request.body,\n        properties,\n        utils.getHeaderBoolean(request.headers, constants.AmqpMandatory)\n      );\n      onMessage(exchange, {\n        protocol: 'AMQP',\n        name: `AMQP publish ${routingKey}`,\n        statusCode: 0,\n        headers: {\n          exchange,\n          channelId: channel.id,\n        },\n        request,\n        message: `publish ${routingKey}`,\n        body: utils.stringifySafe(\n          {\n            published: true,\n            ...properties,\n            routingKey,\n            publish,\n          },\n          2\n        ),\n      });\n    }\n    const queues = utils.getHeaderArray(request.headers, constants.AmqpQueue);\n    for (const queue of queues) {\n      const publish = await channel.basicPublish(\n        '',\n        queue,\n        request.body,\n        properties,\n        utils.getHeaderBoolean(request.headers, constants.AmqpMandatory)\n      );\n      onMessage(queue, {\n        protocol: 'AMQP',\n        name: `AMQP publish ${routingKey}`,\n        statusCode: 0,\n        headers: {\n          queue,\n          channelId: channel.id,\n        },\n        request,\n        message: `publish ${routingKey}`,\n        body: utils.stringifySafe({\n          published: true,\n          routingKey,\n          publish,\n        }),\n      });\n    }\n\n    if (queues.length === 0 && exchanges.length === 0) {\n      const message = `no queues or exchanges to publish`;\n      io.userInteractionProvider.showWarnMessage?.(message);\n      io.log.warn(message);\n    }\n  } else {\n    const message = `no body for publish`;\n    io.userInteractionProvider.showWarnMessage?.(message);\n    io.log.warn(message);\n  }\n\n  return undefined;\n}\n", "import * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\n\nexport async function purge({ channel, request, onMessage }: AmqpMethodContext) {\n  const queues = utils.getHeaderArray(request.headers, constants.AmqpQueue);\n  for (const queue of queues) {\n    const result = await channel.queuePurge(queue);\n    onMessage(queue, {\n      protocol: 'AMQP',\n      name: `AMQP purge`,\n      statusCode: 0,\n      headers: {\n        queue,\n        channelId: channel.id,\n      },\n      request,\n      message: `purge`,\n      body: utils.stringifySafe(\n        {\n          purge: true,\n          result,\n        },\n        2\n      ),\n    });\n  }\n  return undefined;\n}\n", "import * as utils from '../../../utils';\nimport * as constants from './amqpConstants';\nimport { AmqpMethodContext } from './amqpMethodContext';\nimport { getNonAmqpHeaders } from './amqpUtils';\n\nexport async function unbind({ channel, request, onMessage }: AmqpMethodContext) {\n  const exchanges = utils.getHeaderArray(request.headers, constants.AmqpExchange);\n  const queues = utils.getHeaderArray(request.headers, constants.AmqpQueue);\n  const destinationExchanges = utils.getHeaderArray(request.headers, constants.AmqpExchangeDestination);\n  const routingKey = utils.getHeaderString(request.headers, constants.AmqpRoutingKey) || '';\n\n  const nonAmqpHeaders = getNonAmqpHeaders(request.headers);\n  for (const exchange of exchanges) {\n    for (const queue of queues) {\n      const result = await channel.queueUnbind(queue, exchange, routingKey, nonAmqpHeaders);\n      onMessage(queue, {\n        protocol: 'AMQP',\n        name: `AMQP unbind ${routingKey}`,\n        statusCode: 0,\n        headers: {\n          channelId: channel.id,\n          queue,\n          exchange,\n          method: 'unbind',\n        },\n        request,\n        message: `unbind ${exchange} (${routingKey}, ${queue})`,\n        body: utils.stringifySafe(\n          {\n            routingKey,\n            unbind: true,\n            result,\n            queue,\n            exchange,\n          },\n          2\n        ),\n      });\n    }\n    for (const destination of destinationExchanges) {\n      const result = await channel.exchangeUnbind(destination, exchange, routingKey, nonAmqpHeaders);\n      onMessage(exchange, {\n        protocol: 'AMQP',\n        name: `AMQP unbind ${routingKey}`,\n        statusCode: 0,\n        headers: {\n          channelId: channel.id,\n          exchange,\n          method: 'unbind',\n        },\n        request,\n        message: `unbind ${exchange} (${routingKey}, ${destination})`,\n        body: utils.stringifySafe(\n          {\n            routingKey,\n            destination,\n            unbind: true,\n            result,\n            exchange,\n          },\n          2\n        ),\n      });\n    }\n  }\n  return undefined;\n}\n", "import * as utils from '../../utils';\nimport { getAmqpMethod } from './amqpMethods/amqpConstants';\nimport { isAmqpRequest } from './amqpRequest';\nimport { AmqpRequestClient } from './amqpRequestClient';\nimport { userSessionStore } from '../../store';\n\nexport const parseAmqpLine = utils.parseRequestLineFactory({\n  protocol: 'AMQP',\n  methodRegex: /^\\s*(AMQP)\\s+(?<url>.+?)\\s*$/u,\n  protocolRegex: /^\\s*(?<url>amqp(s)?:\\/\\/.+?)\\s*$/iu,\n  requestClientFactory(request, context) {\n    return new AmqpRequestClient(request, context);\n  },\n  modifyRequest(request) {\n    request.supportsStreaming = true;\n    if (isAmqpRequest(request)) {\n      request.method = getAmqpMethod(request);\n    }\n  },\n  sessionStore: userSessionStore,\n});\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport async function parseAmqpResponse(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  return utils.parseInlineResponse(\n    getLineReader,\n    context,\n    /^\\s*AMQP\\s*(?<statusCode>(-1|0))\\s*(-)?\\s*(?<statusMessage>.*)$/u\n  );\n}\n", "import { CompletionItem, completionItemProvider } from '../../io';\nimport * as utils from '../../utils';\nimport { isAmqpRequest } from './amqpRequest';\n\ncompletionItemProvider.emptyLineProvider.push(() => [\n  {\n    name: 'AMQP',\n    description: 'AMQP request',\n  },\n]);\n\ncompletionItemProvider.requestHeaderProvider.push(request => {\n  const result: Array<CompletionItem> = [];\n  if (isAmqpRequest(request)) {\n    result.push(\n      ...[\n        { name: 'amqp_exchange', description: 'Exchange' },\n        { name: 'amqp_queue', description: 'Queue' },\n        {\n          name: 'amqp_method',\n          description:\n            'Method (default if no body, consume, with body publish. Valid Values: bind, unbind, declare, delete, consume, publish, purge, ack, nack, cancel',\n        },\n        { name: 'amqp_routing_key', description: 'Routing Key' },\n      ]\n    );\n\n    const method = utils.getHeader(request?.headers, 'amqp_method') || '';\n    if (utils.isString(method)) {\n      switch (method.toLowerCase()) {\n        case 'bind':\n        case 'unbind':\n          result.push(\n            ...[\n              {\n                name: 'amqp_exchange_destination',\n                description: 'Exchange destination for Bind/ Unbind',\n              },\n            ]\n          );\n          break;\n        case 'declare':\n          result.push(\n            ...[\n              {\n                name: 'amqp_passive',\n                description: `if the exchange name doesn't exists the channel will be closed with an error, fulfilled if the exchange name does exists`,\n              },\n              {\n                name: 'amqp_durable',\n                description: 'if the exchange should survive server restarts',\n              },\n              {\n                name: 'amqp_auto_delete',\n                description: 'if the exchange should be deleted when the last binding from it is deleted',\n              },\n              {\n                name: 'amqp_internal',\n                description: `if exchange is internal to the server. Client's can't publish to internal exchanges.`,\n              },\n            ]\n          );\n          break;\n        case 'delete':\n          result.push(\n            ...[\n              {\n                name: 'amqp_if_unused',\n                description: `only delete if the queue doesn't have any consumers`,\n              },\n              {\n                name: 'amqp_if_empty',\n                description: 'only delete if the queue is empty',\n              },\n            ]\n          );\n          break;\n        case 'nack':\n          result.push(\n            {\n              name: 'amqp_tag',\n              description: 'tag of the consumer, will be server generated if left empty',\n            },\n            {\n              name: 'amqp_requeue',\n              description: `if the message should be requeued or removed`,\n            },\n            {\n              name: 'amqp_multiple',\n              description: `batch confirm all messages up to this delivery tag`,\n            }\n          );\n          break;\n        case 'ack':\n          result.push(\n            {\n              name: 'amqp_tag',\n              description: 'tag of the consumer, will be server generated if left empty',\n            },\n            {\n              name: 'amqp_multiple',\n              description: `batch confirm all messages up to this delivery tag`,\n            }\n          );\n          break;\n        case 'cancel':\n          result.push({\n            name: 'amqp_tag',\n            description: 'tag of the consumer, will be server generated if left empty',\n          });\n          break;\n        case 'consume':\n        case 'publish':\n        case '':\n          result.push(\n            ...[\n              {\n                name: 'amqp_tag',\n                description: 'tag of the consumer, will be server generated if left empty',\n              },\n              {\n                name: 'amqp_no_ack',\n                description:\n                  'if messages are removed from the server upon delivery, or have to be acknowledged (default: false)',\n              },\n              {\n                name: 'amqp_exclusive',\n                description:\n                  'if this can be the only consumer of the queue, will return an Error if there are other consumers to the queue already',\n              },\n\n              {\n                name: 'amqp_correlation_id',\n                description: 'for RPC requests',\n              },\n              {\n                name: 'amqp_content_type',\n                description: 'content type of body, eg. application/json',\n              },\n              {\n                name: 'amqp_content_encoding',\n                description: 'content encoding of body, eg. gzip',\n              },\n              {\n                name: 'amqp_deliveryMode',\n                description: '1 for transient messages, 2 for persistent messages',\n              },\n              { name: 'amqp_expiration', description: 'Exchange' },\n              {\n                name: 'amqp_messageId',\n                description: 'Message TTL, in milliseconds, as string',\n              },\n              { name: 'amqp_priority', description: 'between 0 and 255' },\n              { name: 'amqp_replyTo', description: 'for RPC requests' },\n              { name: 'amqp_type', description: 'type' },\n              { name: 'amqp_userId', description: 'user id' },\n              {\n                name: 'amqp_mandatory',\n                description: `if the message should be returned if there's no queue to be delivered to`,\n              },\n            ]\n          );\n          break;\n        default:\n          break;\n      }\n    }\n  }\n  return result;\n});\n", "import './completionItemProvider';\nimport '../grpc/completionItemProvider';\n\nimport * as amqpClient from '@cloudamqp/amqp-client';\n\nimport { javascriptProvider } from '../../io';\nimport * as models from '../../models';\nimport { parseAmqpLine } from './amqpHttpRegionParser';\nimport { parseAmqpResponse } from './amqpResponseHttpRegionParser';\n\nexport function registerAmqpPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.parse.addHook('amqp', parseAmqpLine, { before: ['request'] });\n  api.hooks.parse.addHook('amqpResponse', parseAmqpResponse, { before: ['requestBody'] });\n  javascriptProvider.require['@cloudamqp/amqp-client'] = amqpClient;\n}\n", "import { completionItemProvider } from '../../io';\n\ncompletionItemProvider.emptyLineProvider.push(() => [\n  {\n    name: 'WSS',\n    description: 'WSS request',\n  },\n]);\n", "import './completionItemProvider';\n\nimport * as ws from 'ws';\n\nimport { javascriptProvider } from '../../io';\nimport * as models from '../../models';\nimport { setWebsocketEnvRejectUnauthorized } from './setWebsocketEnvRejectUnauthorized';\nimport { parseWebsocketLine } from './websocketHttpRegionParser';\nimport { parseWebSocketResponse } from './websocketResponseHttpRegionParser';\n\nexport function registerWebsocketPlugin(api: models.HttpyacHooksApi) {\n  api.hooks.onRequest.addHook('setWebsocketEnvRejectUnauthorized', setWebsocketEnvRejectUnauthorized);\n  api.hooks.parse.addHook('websocket', parseWebsocketLine, { before: ['request'] });\n  api.hooks.parse.addHook('websocketResponse', parseWebSocketResponse, { before: ['requestBody'] });\n  javascriptProvider.require.ws = ws;\n}\n", "import { ClientOptions } from 'ws';\n\nimport { Request } from '../../models';\nimport { isString } from '../../utils';\n\nexport interface WebsocketRequest extends Request<'WS'> {\n  options?: ClientOptions;\n  body?: string | Buffer;\n  headers?: Record<string, string>;\n}\n\nexport function isWebsocketRequest(request: Request | undefined): request is WebsocketRequest {\n  const hasValidBody = !request?.body || isString(request.body) || Buffer.isBuffer(request.body);\n  return request?.protocol === 'WS' && hasValidBody;\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\nimport { isWebsocketRequest } from './websocketRequest';\n\nexport async function setWebsocketEnvRejectUnauthorized(\n  request: models.Request,\n  { variables }: models.ProcessorContext\n): Promise<void> {\n  if (isWebsocketRequest(request) && variables) {\n    if (typeof variables.request_rejectUnauthorized !== 'undefined') {\n      const rejectUnauthorized = utils.toBoolean(variables.request_rejectUnauthorized);\n      request.options = Object.assign({}, request.options, { rejectUnauthorized });\n    }\n  }\n}\n", "import { IncomingMessage } from 'http';\nimport { HttpProxyAgent } from 'http-proxy-agent';\nimport { HttpsProxyAgent } from 'https-proxy-agent';\nimport { SocksProxyAgent } from 'socks-proxy-agent';\nimport WebSocket, { ClientOptions } from 'ws';\n\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { isWebsocketRequest, WebsocketRequest } from './websocketRequest';\n\nconst WEBSOCKET_CLOSE_NORMAL = 1000;\nconst WEBSOCKET_CLOSE_GOING_AWAY = 1001;\n\nexport class WebsocketRequestClient extends models.AbstractRequestClient<WebSocket | undefined> {\n  private _nativeClient: WebSocket | undefined;\n  private responseTemplate: Partial<models.HttpResponse> & { protocol: string } = {\n    protocol: 'WS',\n  };\n\n  constructor(\n    private readonly request: models.Request,\n    private readonly context: models.ProcessorContext\n  ) {\n    super();\n  }\n  get reportMessage(): string {\n    return `perform WebSocket Request (${this.request.url})`;\n  }\n\n  get supportsStreaming() {\n    return true;\n  }\n\n  get nativeClient(): WebSocket | undefined {\n    return this._nativeClient;\n  }\n\n  public getSessionId() {\n    return utils.replaceInvalidChars(this.request.url);\n  }\n\n  async connect(obj: WebSocket | undefined): Promise<WebSocket | undefined> {\n    if (obj) {\n      this._nativeClient = obj;\n      return obj;\n    }\n    if (isWebsocketRequest(this.request)) {\n      this._nativeClient = new WebSocket(this.request.url || '', this.getClientOptions(this.request));\n      this.registerEvents(this._nativeClient);\n      await new Promise<void>(resolve => {\n        const resolveListener = () => {\n          resolve();\n          this.nativeClient?.off('open', resolveListener);\n          this.nativeClient?.off('close', resolveListener);\n        };\n        this._nativeClient?.on('open', resolveListener);\n        this._nativeClient?.on('close', resolveListener);\n      });\n    }\n    return this._nativeClient;\n  }\n\n  async send(body?: unknown): Promise<void> {\n    if (isWebsocketRequest(this.request)) {\n      const sendBody = utils.toBufferLike(body || this.request.body);\n      if (sendBody) {\n        this.nativeClient?.send(sendBody, err => {\n          if (err) {\n            this.onMessage('error', {\n              ...this.responseTemplate,\n              statusCode: 400,\n              request: this.request,\n              body: utils.errorToString(err),\n            });\n          }\n        });\n      }\n    }\n  }\n\n  override disconnect(err?: Error): void {\n    if (err) {\n      this._nativeClient?.close(WEBSOCKET_CLOSE_GOING_AWAY, err.message);\n    } else {\n      this._nativeClient?.close(WEBSOCKET_CLOSE_NORMAL, 'CLOSE_NORMAL');\n    }\n    this.onDisconnect();\n  }\n\n  private registerEvents(client: WebSocket) {\n    client.on('error', err => {\n      this.onMessage('error', {\n        ...this.responseTemplate,\n        statusCode: 400,\n        request: this.request,\n        body: utils.toString(err),\n      });\n    });\n    client.on('message', message => {\n      this.onMessage('message', {\n        ...this.responseTemplate,\n        statusCode: 0,\n        name: `${client.protocol} (${this.request.url})`,\n        message: utils.toString(message),\n        headers: {\n          date: new Date(),\n        },\n        request: this.request,\n        body: utils.toString(message),\n        rawBody: Buffer.isBuffer(message) ? message : undefined,\n      });\n    });\n    client.on('close', (statusCode, reason) => {\n      this.onMessage('message', {\n        ...this.responseTemplate,\n        statusCode,\n        name: `${client.protocol} (${this.request.url})`,\n        message: utils.toString(reason),\n        headers: {\n          date: new Date(),\n        },\n        request: this.request,\n        body: utils.toString(reason) || 'close',\n        rawBody: Buffer.isBuffer(reason) ? reason : undefined,\n      });\n    });\n\n    const metaDataEvents = ['upgrade', 'unexpected-response', 'ping', 'pong', 'closing', 'close'];\n    for (const event of metaDataEvents) {\n      if (utils.isString(event)) {\n        client.on(event, (message: IncomingMessage) => {\n          this.onMetaData(event, {\n            ...this.responseTemplate,\n            statusCode: message?.statusCode || 0,\n            statusMessage: message?.statusMessage,\n            headers: message?.headers,\n            httpVersion: message?.httpVersion,\n            message: message ? `${event}: ${utils.toString(message)}` : event,\n            body: {\n              event,\n              message,\n              date: new Date(),\n            },\n          });\n        });\n      }\n    }\n  }\n\n  private getClientOptions(request: WebsocketRequest): ClientOptions {\n    const { config } = this.context;\n\n    const configOptions: ClientOptions = {};\n    if (config?.request) {\n      configOptions.handshakeTimeout = request.timeout || utils.toNumber(config.request.timeout);\n      configOptions.sessionTimeout = configOptions.handshakeTimeout;\n      if (!utils.isUndefined(config.request.rejectUnauthorized)) {\n        configOptions.rejectUnauthorized = utils.toBoolean(config.request.rejectUnauthorized, true);\n      }\n      if (!utils.isUndefined(config.request.followRedirects)) {\n        configOptions.followRedirects = utils.toBoolean(config.request.followRedirects, true);\n      }\n    }\n\n    const metaDataOptions: Record<string, unknown> = {\n      headers: request.headers,\n    };\n    if (request.noRedirect) {\n      metaDataOptions.followRedirects = false;\n    }\n    if (request.noRejectUnauthorized) {\n      metaDataOptions.rejectUnauthorized = false;\n    }\n    if (request.proxy) {\n      this.initProxy(configOptions, request.proxy);\n    }\n    return Object.assign({}, config?.request, request.options, metaDataOptions);\n  }\n\n  private initProxy(options: ClientOptions, proxy: string | undefined) {\n    if (proxy) {\n      if (proxy.startsWith('socks://')) {\n        const socksProxy = new SocksProxyAgent(proxy);\n        options.agent = socksProxy;\n      } else if (proxy.startsWith('http://')) {\n        options.agent = new HttpProxyAgent(proxy);\n      } else {\n        options.agent = new HttpsProxyAgent(proxy);\n      }\n    }\n  }\n}\n", "import * as utils from '../../utils';\nimport { WebsocketRequestClient } from './websocketRequestClient';\nimport { userSessionStore } from '../../store';\n\nexport const parseWebsocketLine = utils.parseRequestLineFactory({\n  protocol: 'WS',\n  methodRegex: /^\\s*(WS|WSS|WEBSOCKET)\\s+(?<url>.+?)\\s*$/u,\n  protocolRegex: /^\\s*(?<url>ws(s)?:\\/\\/.+?)\\s*$/iu,\n  requestClientFactory(request, context) {\n    return new WebsocketRequestClient(request, context);\n  },\n  modifyRequest(request) {\n    request.supportsStreaming = true;\n  },\n  sessionStore: userSessionStore,\n});\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\n\nexport async function parseWebSocketResponse(\n  getLineReader: models.getHttpLineGenerator,\n  context: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  return utils.parseInlineResponse(\n    getLineReader,\n    context,\n    /^\\s*WS\\s*(?<statusCode>([0-9]{4}|0))\\s*(-)?\\s*(?<statusMessage>.*)$/u\n  );\n}\n", "/* eslint-disable no-undef */\nimport { DOMParser } from '@xmldom/xmldom';\n\nimport { log } from '../../io';\nimport { Variables } from '../../models';\nimport * as utils from '../../utils';\n\nexport function getNode(variableName: string | undefined, variables: Variables) {\n  let xml: string | undefined;\n  if (variableName) {\n    const variable = variables[variableName];\n    if (utils.isString(variable)) {\n      xml = variable;\n    } else if (utils.isHttpResponse(variable) && utils.isString(variable.body)) {\n      xml = variable.body;\n    } else if (isNode(variable)) {\n      return variable;\n    }\n  } else if (variables.response && utils.isHttpResponse(variables.response)) {\n    const response = variables.response;\n    if (utils.isString(response.body) && utils.isMimeTypeXml(response.contentType)) {\n      xml = response.body;\n    }\n  }\n  if (xml) {\n    return parseFromString(xml);\n  }\n  return undefined;\n}\n\nexport function isNode(obj: unknown): obj is Node {\n  const node = obj as Node;\n  return (\n    node && utils.isString(node.nodeName) && Number.isInteger(node.nodeType) && typeof node.cloneNode === 'function'\n  );\n}\n\nexport function parseFromString(xml: string, mimeType?: string | undefined): Document {\n  return new DOMParser({\n    errorHandler(level: string, message: unknown) {\n      log.debug(level, message);\n    },\n  }).parseFromString(xml, mimeType);\n}\n", "import { select, SelectedValue, SelectReturnType, useNamespaces } from 'xpath';\n\nimport { log } from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { isNode, parseFromString } from './nodeUtils';\nimport { XPathProcessorContext } from './xpathProcessorContext';\n\nexport async function provideAssertValueXPath(\n  type: string,\n  value: string | undefined,\n  response: models.HttpResponse,\n  context: XPathProcessorContext\n) {\n  if (type === 'xpath' && value && response.body) {\n    const body = utils.toString(response.body);\n    if (!body) {\n      return '';\n    }\n    try {\n      const node = parseFromString(body);\n\n      let evaluate = select;\n      if (context.options.xpath_namespaces) {\n        evaluate = useNamespaces(context.options.xpath_namespaces);\n      }\n\n      const results = evaluate(value, node);\n      return getSelectReturnType(results);\n    } catch (err) {\n      log.warn(`xpath ${value} throws error`, err);\n      return value;\n    }\n  }\n  return false;\n}\n\nexport function getSelectReturnType(results: SelectReturnType) {\n  if (results !== null) {\n    if (Array.isArray(results)) {\n      if (results.length === 0) {\n        return undefined;\n      }\n      if (results.length === 1) {\n        const resultNode = results[0];\n        return getTextContent(resultNode);\n      }\n      return results.map(obj => getTextContent(obj));\n    }\n  }\n  return getTextContent(results);\n}\n\nfunction getTextContent(resultNode: SelectedValue) {\n  if (isNode(resultNode)) {\n    return resultNode.textContent;\n  }\n  return resultNode;\n}\n", "import * as xmldom from '@xmldom/xmldom';\nimport * as xpath from 'xpath';\n\nimport { javascriptProvider } from '../../io';\nimport * as models from '../../models';\nimport { provideAssertValueXPath } from './provideAssertValueXPath';\nimport { xmlResponseInterceptor } from './xmlResponseInterceptor';\nimport { parseXpathNamespace } from './xpathNamespaceHttpRegionParser';\nimport { xpathVariableReplacer } from './xpathVariableReplacer';\n\nexport function registerXmlPuglin(api: models.HttpyacHooksApi) {\n  api.hooks.parse.addHook('xpath_ns', parseXpathNamespace, { before: ['variable'] });\n  api.hooks.onResponse.addInterceptor(xmlResponseInterceptor);\n  api.hooks.provideAssertValue.addHook('xpath', provideAssertValueXPath);\n  api.hooks.replaceVariable.addHook('xpath', xpathVariableReplacer, { before: ['javascript'] });\n  javascriptProvider.require.xpath = xpath;\n  javascriptProvider.require['@xmldom/xmldom'] = xmldom;\n}\n", "import { HookTriggerContext } from 'hookpoint';\nimport { EOL } from 'os';\nimport { formatXml } from 'xmldom-format';\n\nimport * as io from '../../io';\nimport * as models from '../../models';\nimport * as utils from '../../utils';\nimport { parseFromString } from './nodeUtils';\n\nexport const xmlResponseInterceptor = {\n  id: 'xmlResponseBody',\n  beforeLoop: async function addXmlResponse(\n    hookContext: HookTriggerContext<[models.HttpResponse, models.ProcessorContext], void>\n  ): Promise<boolean> {\n    const [response] = hookContext.args;\n    if (response) {\n      if (\n        utils.isMimeTypeXml(response.contentType) &&\n        !response.prettyPrintBody &&\n        utils.isString(response.body) &&\n        response.body.length > 0\n      ) {\n        const document = parseFromString(response.body, response.contentType?.mimeType);\n        response.parsedBody = document;\n        try {\n          response.prettyPrintBody = formatXml(document, {\n            eol: EOL,\n            indentation: '  ',\n            useWhitespaceInAutoClosingNode: true,\n          });\n        } catch (err) {\n          io.log.warn('xml format error', response.body, err);\n        }\n      }\n    }\n    return true;\n  },\n};\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\nimport { XPathProcessorContext } from './xpathProcessorContext';\n\nexport async function parseXpathNamespace(\n  getLineReader: models.getHttpLineGenerator,\n  { httpRegion }: models.ParserContext\n): Promise<models.HttpRegionParserResult> {\n  const lineReader = getLineReader();\n  const next = lineReader.next();\n  if (!next.done) {\n    const textLine = next.value.textLine;\n\n    const match = /^\\s*@xpath_ns\\s+(?<key>[^\\s=:]*)\\s*=\\s*\"?(?<value>.*)\"?\\s*$/u.exec(textLine);\n\n    if (match && match.groups && match.groups.key && match.groups.value) {\n      const key = match.groups.key;\n      const value = match.groups.value;\n      httpRegion.hooks.execute.addHook(`xpath_ns_${key}`, async (context: XPathProcessorContext) => {\n        if (!context.options.xpath_namespaces) {\n          context.options.xpath_namespaces = {};\n        }\n        const namespace = await utils.replaceVariables(value, models.VariableType.variable, context);\n        if (utils.isString(namespace)) {\n          context.options.xpath_namespaces[key] = namespace;\n        }\n        return true;\n      });\n\n      return {\n        nextParserLine: next.value.line,\n        symbols: [\n          new models.HttpSymbol({\n            name: match.groups.key,\n            description: match.groups.value,\n            kind: models.HttpSymbolKind.variableDefinition,\n            startLine: next.value.line,\n            startOffset: 0,\n            endLine: next.value.line,\n            endOffset: next.value.textLine.length,\n            children: [\n              new models.HttpSymbol({\n                name: match.groups.key,\n                description: 'key',\n                kind: models.HttpSymbolKind.key,\n                startLine: next.value.line,\n                startOffset: next.value.textLine.indexOf(match.groups.key),\n                endLine: next.value.line,\n                endOffset: next.value.textLine.indexOf(match.groups.key) + match.groups.key.length,\n              }),\n              new models.HttpSymbol({\n                name: match.groups.value,\n                description: 'value',\n                kind: models.HttpSymbolKind.value,\n                startLine: next.value.line,\n                startOffset: next.value.textLine.indexOf(match.groups.value),\n                endLine: next.value.line,\n                endOffset: next.value.textLine.indexOf(match.groups.value) + match.groups.value.length,\n              }),\n            ],\n          }),\n        ],\n      };\n    }\n  }\n  return false;\n}\n", "import { select, useNamespaces } from 'xpath';\n\nimport { log } from '../../io';\nimport { VariableType } from '../../models';\nimport * as utils from '../../utils';\nimport { getNode } from './nodeUtils';\nimport { getSelectReturnType } from './provideAssertValueXPath';\nimport { XPathProcessorContext } from './xpathProcessorContext';\n\nexport async function xpathVariableReplacer(\n  text: unknown,\n  _type: VariableType | string,\n  { variables, scriptConsole, options }: XPathProcessorContext\n): Promise<unknown> {\n  return utils.parseHandlebarsString(text, async (variable: string) => {\n    const match = /^\\s*\\$xpath(:(?<variable>[^\\s]*))?\\s*(?<xpath>.*)\\s*$/iu.exec(variable);\n    if (match?.groups?.xpath) {\n      try {\n        const node = getNode(match.groups.variable, variables);\n        if (node) {\n          let evaluate = select;\n          if (options.xpath_namespaces) {\n            evaluate = useNamespaces(options.xpath_namespaces);\n          }\n          const results = evaluate(match.groups.xpath, node);\n          return getSelectReturnType(results);\n        }\n      } catch (err) {\n        (scriptConsole || log).warn(`xpath ${match.groups.xpath} throws error`, err);\n      }\n      return '';\n    }\n    return undefined;\n  });\n}\n", "import * as plugins from './plugins';\nimport { pluginStore } from './store';\n\npluginStore.core = plugins.registerCorePlugins;\npluginStore.dotenv = plugins.registerDotenvPlugin;\npluginStore.eventSource = plugins.registerEventSourcePlugin;\npluginStore.graphql = plugins.registerGraphQL;\npluginStore.grpc = plugins.registerGrpcPlugin;\npluginStore.http = plugins.registerHttpPlugin;\npluginStore.intellij = plugins.registerIntellijPlugin;\npluginStore.injection = plugins.registerInjectionPlugin;\npluginStore.javascript = plugins.registerJavascriptPlugin;\npluginStore.mqtt = plugins.registerMqttPlugin;\npluginStore.oauth2 = plugins.registerOAuth2Plugin;\npluginStore.rabbitMQ = plugins.registerAmqpPlugin;\npluginStore.assert = plugins.registerAssertPlugin;\npluginStore.websocket = plugins.registerWebsocketPlugin;\npluginStore.xml = plugins.registerXmlPuglin;\n", "import './registerPlugins';\n\nimport { HookCancel } from 'hookpoint';\n\nimport { log } from './io';\nimport * as models from './models';\nimport { getEnvironmentConfig } from './store';\nimport * as utils from './utils';\n\n/**\n * process one httpRegion of HttpFile\n * @param httpFile httpFile\n */\nexport async function send(context: models.SendContext): Promise<boolean> {\n  let result = false;\n  if (utils.isHttpRegionSendContext(context)) {\n    result = await sendHttpRegion(context);\n  } else if (utils.isHttpRegionsSendContext(context)) {\n    result = await sendHttpRegions(context);\n  } else {\n    result = await sendHttpFile(context);\n  }\n  return result;\n}\n\nasync function sendHttpRegion(context: models.HttpRegionSendContext): Promise<boolean> {\n  const processorContext = await createEmptyProcessorContext(context);\n  if (await utils.executeGlobalScripts(processorContext)) {\n    return await context.httpRegion.execute(processorContext, true);\n  }\n  return false;\n}\n\nasync function sendHttpRegions(context: models.HttpRegionsSendContext): Promise<boolean> {\n  const processorContext = await createEmptyProcessorContext(context);\n  if (await utils.executeGlobalScripts(processorContext)) {\n    if (context.progress) {\n      context.progress.divider = context.httpRegions.length;\n    }\n    for (const httpRegion of context.httpRegions) {\n      await httpRegion.execute(processorContext, true);\n    }\n    return true;\n  }\n  return false;\n}\n\nasync function sendHttpFile(context: models.HttpFileSendContext): Promise<boolean> {\n  const httpRegions: Array<models.HttpRegion> = [];\n  for (const httpRegion of context.httpFile.httpRegions) {\n    if (context.httpRegionPredicate && !context.httpRegionPredicate(httpRegion)) {\n      log.debug(`${httpRegion.symbol.name} disabled by predicate`);\n    } else if (!httpRegion.isGlobal()) {\n      httpRegions.push(httpRegion);\n    }\n  }\n  return await sendHttpRegions({ ...context, httpRegions });\n}\n\nexport async function createEmptyProcessorContext<T extends models.VariableProviderContext>(\n  context: T\n): Promise<\n  T & {\n    variables: models.Variables;\n    options: Record<string, unknown>;\n  }\n> {\n  return Object.assign(context, {\n    variables: await getVariables(context),\n    options: {},\n  });\n}\n\nexport async function getVariables(context: models.VariableProviderContext): Promise<Record<string, unknown>> {\n  context.config = await getEnvironmentConfig(context.config, context.httpFile);\n\n  const vars = await context.httpFile.hooks.provideVariables.trigger(context.activeEnvironment, context);\n  if (vars === HookCancel) {\n    return context.variables || {};\n  }\n  const variables = Object.assign(\n    context.variables || {},\n    ...vars.map(variables => utils.cleanVariables(variables)),\n    context.variables\n  );\n  log.debug('current environment variables', variables);\n  return variables;\n}\n\nexport async function getEnvironments(context: models.VariableProviderContext): Promise<Array<string>> {\n  context.config = await getEnvironmentConfig(context.config, context.httpFile);\n\n  const result = await context.httpFile.hooks.provideEnvironments.trigger(context);\n  if (result !== HookCancel && result.length > 0) {\n    return result\n      .reduce((prev, current) => {\n        for (const cur of current) {\n          if (prev.indexOf(cur) < 0) {\n            prev.push(cur);\n          }\n        }\n        return prev;\n      }, [] as Array<string>)\n      .sort();\n  }\n  return [];\n}\n", "import { default as chalk } from 'chalk';\nimport { Command } from 'commander';\nimport { promises as fs } from 'fs';\nimport type { Options } from 'globby';\nimport { sep } from 'path';\n\nimport { send } from '../../httpYacApi';\nimport { Logger } from '../../io';\nimport * as models from '../../models';\nimport { HttpFileStore } from '../../store';\nimport * as utils from '../../utils';\nimport { toSendJsonOutput } from './jsonOutput';\nimport { getLogLevel, OutputType, SendFilterOptions, SendOptions } from './options';\nimport { createCliPluginRegister } from './plugin';\nimport { transformToJunit } from './junitUtils';\nimport { selectHttpFiles } from './selectHttpFiles';\n\nexport function sendCommand() {\n  const program = new Command('send')\n    .description('send/ execute http files')\n    .usage('<fileName...> [options]')\n    .argument('<fileName...>', 'path to file or glob pattern')\n    .option('-a, --all', 'execute all http requests in a http file')\n    .option('--bail', 'stops when a test case fails')\n    .option('-e, --env  <env...>', 'list of environments')\n    .option('--filter <filter>', ' filter requests output (only-failed)')\n    .option('--insecure', 'allow insecure server connections when using ssl')\n    .option('-i --interactive', 'do not exit the program after request, go back to selection')\n    .option('--json', 'use json output')\n    .option('--junit', 'use junit xml output')\n    .option('-l, --line <line>', 'line of the http requests')\n    .option('-n, --name <name>', 'name of the http requests')\n    .option('--no-color', 'disable color support')\n    .option('-o, --output <output>', 'output format of response (short, body, headers, response, exchange, none)')\n    .option(\n      '--output-failed <output>',\n      'output format of failed response (short, body, headers, response, exchange, none)'\n    )\n    .option('--raw', 'prevent formatting of response body')\n    .option('--quiet', '')\n    .option('--repeat <count>', 'repeat count for requests', utils.toNumber)\n    .option('--repeat-mode <mode>', 'repeat mode: sequential, parallel (default)')\n    .option('--parallel <count>', 'send parallel requests', utils.toNumber)\n    .option('-s, --silent', 'log only request')\n    .option('-t, --tag  <tag...>', 'list of tags to execute')\n    .option('--timeout <timeout>', 'maximum time allowed for connections', utils.toNumber)\n    .option('--var  <variables...>', 'list of variables (e.g foo=\"bar\")')\n    .option('-v, --verbose', 'make the operation more talkative')\n    .action(execute);\n  return program;\n}\n\nasync function execute(fileNames: Array<string>, options: SendOptions): Promise<void> {\n  const context = convertCliOptionsToContext(options);\n  const { httpFiles, config } = await getHttpFiles(fileNames, options, context.config || {});\n  context.config = config;\n  initRequestLogger(options, context);\n  try {\n    if (httpFiles.length > 0) {\n      let isFirstRequest = true;\n      while (options.interactive || isFirstRequest) {\n        isFirstRequest = false;\n        const selection = await selectHttpFiles(httpFiles, options);\n\n        context.processedHttpRegions = [];\n\n        const sendFuncs = selection.map(\n          ({ httpFile, httpRegions }) =>\n            async function sendHttpFile() {\n              if (!options.junit && !options.json && context.scriptConsole && selection.length > 1) {\n                context.scriptConsole.info(`--------------------- ${httpFile.fileName}  --`);\n              }\n              await send(Object.assign({}, context, { httpFile, httpRegions }));\n            }\n        );\n        await utils.promiseQueue(options.parallel || 1, ...sendFuncs);\n\n        reportOutput(context, options);\n      }\n    } else {\n      console.error(`httpYac cannot find the specified file ${fileNames.join(', ')}.`);\n    }\n  } finally {\n    context.scriptConsole?.flush?.();\n  }\n}\n\nfunction reportOutput(context: Omit<models.HttpFileSendContext, 'httpFile'>, options: SendOptions) {\n  const processedHttpRegions = context.processedHttpRegions || [];\n\n  const cliJsonOutput = toSendJsonOutput(processedHttpRegions, options);\n  if (options.json) {\n    console.info(utils.stringifySafe(cliJsonOutput, 2));\n  } else if (options.junit) {\n    console.info(transformToJunit(cliJsonOutput));\n  } else if (context.scriptConsole) {\n    context.scriptConsole.info('');\n\n    const requestCounts: Array<string> = [];\n    if (cliJsonOutput.summary.successRequests > 0) {\n      requestCounts.push(chalk`{green ${cliJsonOutput.summary.successRequests} succeeded}`);\n    }\n    if (cliJsonOutput.summary.failedRequests > 0) {\n      requestCounts.push(chalk`{red ${cliJsonOutput.summary.failedRequests} failed}`);\n    }\n    if (cliJsonOutput.summary.erroredRequests > 0) {\n      requestCounts.push(chalk`{red ${cliJsonOutput.summary.erroredRequests} errored}`);\n    }\n    if (cliJsonOutput.summary.skippedRequests > 0) {\n      requestCounts.push(chalk`{yellow ${cliJsonOutput.summary.skippedRequests} skipped}`);\n    }\n    context.scriptConsole.info(\n      chalk`{bold ${cliJsonOutput.summary.totalRequests}} requests processed (${requestCounts.join(', ')})`\n    );\n  }\n}\n\nexport function convertCliOptionsToContext(cliOptions: SendOptions) {\n  const context: Omit<models.HttpFileSendContext, 'httpFile'> = {\n    activeEnvironment: cliOptions.env,\n    repeat: cliOptions.repeat\n      ? {\n          count: cliOptions.repeat,\n          type: cliOptions.repeatMode === 'sequential' ? models.RepeatOrder.sequential : models.RepeatOrder.parallel,\n        }\n      : undefined,\n    config: {\n      log: {\n        level: getLogLevel(cliOptions),\n      },\n      request: {\n        timeout: cliOptions.timeout,\n        https: cliOptions.insecure ? { rejectUnauthorized: false } : undefined,\n      },\n    },\n    variables: cliOptions.var\n      ? Object.fromEntries(\n          cliOptions.var.map(obj => {\n            const split = obj.split('=');\n            return [split[0], split.slice(1).join('=')];\n          })\n        )\n      : undefined,\n  };\n  return context;\n}\n\nexport function initRequestLogger(cliOptions: SendOptions, context: Omit<models.HttpFileSendContext, 'httpFile'>) {\n  const scriptConsole = new Logger({\n    level: getLogLevel(cliOptions),\n    onlyFailedTests: cliOptions.filter === SendFilterOptions.onlyFailed,\n  });\n  scriptConsole.collectMessages();\n  context.scriptConsole = scriptConsole;\n  if (!cliOptions.json && !cliOptions.junit) {\n    context.logStream = getStreamLogger(cliOptions);\n    const logger = getRequestLogger(cliOptions, context.config, scriptConsole);\n    context.logResponse = async (response, httpRegion) => {\n      if (logger) {\n        await logger(response, httpRegion);\n      }\n      scriptConsole.flush();\n    };\n  }\n}\n\nasync function getHttpFiles(fileNames: Array<string>, options: SendOptions, config: models.EnvironmentConfig) {\n  const httpFiles: models.HttpFile[] = [];\n  const httpFileStore = new HttpFileStore({\n    cli: createCliPluginRegister(!!options.bail),\n  });\n\n  const parseOptions: models.HttpFileStoreOptions = {\n    workingDir: process.cwd(),\n    config,\n  };\n  const paths: Array<string> = [];\n\n  for (const fileName of fileNames) {\n    paths.push(...(await queryGlobbyPattern(fileName)));\n  }\n  for (const path of paths) {\n    const httpFile = await httpFileStore.getOrCreate(\n      path,\n      async () => await fs.readFile(path, 'utf8'),\n      0,\n      parseOptions\n    );\n    httpFiles.push(httpFile);\n  }\n\n  return {\n    httpFiles,\n    config: parseOptions.config,\n  };\n}\n\nasync function queryGlobbyPattern(fileName: string) {\n  const globOptions: Options = {\n    gitignore: true,\n  };\n  const { globby } = await import('globby');\n  const paths = await globby(fileName, globOptions);\n  if ((paths && paths.length > 0) || sep === '/') {\n    return paths;\n  }\n  return await globby(fileName.replace(/\\\\/gu, '/'), globOptions);\n}\n\nfunction getStreamLogger(options: SendOptions): models.StreamLogger | undefined {\n  if (options.output !== 'none') {\n    return async function logStream(type, response) {\n      const data = Buffer.isBuffer(response.body) ? response.body.toString('utf-8') : response.body;\n      console.info(`${new Date().toLocaleTimeString()} - ${type}: `, data);\n    };\n  }\n  return undefined;\n}\n\nfunction getRequestLogger(\n  options: SendOptions,\n  config: models.EnvironmentConfig | undefined,\n  logger: models.ConsoleLogHandler\n): models.RequestLogger | undefined {\n  const cliLoggerOptions = {\n    onlyFailed: options.filter === SendFilterOptions.onlyFailed,\n    responseBodyPrettyPrint: !options.raw,\n  };\n  const requestLoggerOptions = getRequestLoggerOptions(options.output, cliLoggerOptions, config?.log?.options);\n\n  const requestFailedLoggerOptions = getRequestLoggerOptions(\n    options.outputFailed,\n    cliLoggerOptions,\n    config?.log?.options\n  );\n\n  if (requestLoggerOptions || requestFailedLoggerOptions) {\n    return utils.requestLoggerFactory(\n      args => logger.logPriority(args),\n      requestLoggerOptions,\n      requestFailedLoggerOptions\n    );\n  }\n  return undefined;\n}\nfunction getRequestLoggerOptions(\n  output: OutputType | undefined,\n  ...options: Array<models.RequestLoggerFactoryOptions | undefined>\n): models.RequestLoggerFactoryOptions | undefined {\n  let result: models.RequestLoggerFactoryOptions | undefined;\n  switch (output) {\n    case 'body':\n      result = {\n        responseBodyLength: 0,\n      };\n      break;\n    case 'headers':\n      result = {\n        requestOutput: true,\n        requestHeaders: true,\n        responseHeaders: true,\n      };\n      break;\n    case 'response':\n      result = {\n        responseHeaders: true,\n        responseBodyLength: 0,\n      };\n      break;\n    case 'none':\n      return undefined;\n    case 'short':\n      result = { useShort: true };\n      break;\n    case 'timings':\n      result = {\n        timings: true,\n      };\n      break;\n    case 'exchange':\n      result = {\n        requestOutput: true,\n        requestHeaders: true,\n        requestBodyLength: 0,\n        responseHeaders: true,\n        responseBodyLength: 0,\n        timings: true,\n      };\n      break;\n    default:\n      result = {\n        requestOutput: true,\n        requestHeaders: true,\n        requestBodyLength: 0,\n        responseHeaders: true,\n        responseBodyLength: 0,\n      };\n      break;\n  }\n\n  return Object.assign({}, ...options, result);\n}\n", "import { LogLevel } from '../../models';\n\nexport enum SendFilterOptions {\n  onlyFailed = 'only-failed',\n}\n\nexport type OutputType = 'body' | 'headers' | 'response' | 'none' | 'short' | 'exchange' | 'timings';\n\nexport interface SendOptions {\n  env?: Array<string>;\n  all?: boolean;\n  bail?: boolean;\n  filter?: SendFilterOptions;\n  help?: boolean;\n  line?: number;\n  name?: string;\n  interactive?: boolean;\n  insecure?: boolean;\n  json?: boolean;\n  junit?: boolean;\n  output?: OutputType;\n  outputFailed?: OutputType;\n  raw?: boolean;\n  repeatMode?: 'sequential' | 'parallel';\n  repeat?: number;\n  parallel?: number;\n  silent?: boolean;\n  tag?: Array<string>;\n  timeout?: number;\n  var?: Array<string>;\n  verbose?: boolean;\n}\n\nexport function getLogLevel(cliOptions: SendOptions): LogLevel | undefined {\n  if (cliOptions.json || cliOptions.junit) {\n    return LogLevel.none;\n  }\n  if (cliOptions.silent) {\n    return LogLevel.error;\n  }\n  if (cliOptions.verbose) {\n    return LogLevel.trace;\n  }\n  return undefined;\n}\n", "import { HttpResponse, ProcessedHttpRegion, TestResult, TestResultStatus } from '../../models';\nimport * as utils from '../../utils';\nimport { SendFilterOptions, SendOptions } from './options';\nimport { fileProvider } from '../../io';\n\nexport interface SendJsonOutput {\n  _meta: {\n    version: string;\n  };\n  summary: SendRequestSummary & SendTestSummary;\n  requests: Array<SendOutputRequest>;\n}\n\nexport interface SendOutputRequest {\n  fileName: string;\n  name: string;\n  title?: string;\n  description?: string;\n  line?: number;\n  summary: SendTestSummary;\n  response?: HttpResponse;\n  testResults?: Array<TestResult>;\n  timestamp?: string;\n  duration?: number;\n}\n\nexport interface SendRequestSummary {\n  totalRequests: number;\n  skippedRequests: number;\n  failedRequests: number;\n  erroredRequests: number;\n  successRequests: number;\n}\n\nexport interface SendTestSummary {\n  totalTests: number;\n  failedTests: number;\n  skippedTests: number;\n  erroredTests: number;\n  successTests: number;\n}\n\nfunction sum(x: number, y: number) {\n  return x + y;\n}\n\nexport function toSendJsonOutput(\n  processedHttpRegions: Array<ProcessedHttpRegion>,\n  options: SendOptions\n): SendJsonOutput {\n  const requests: Array<SendOutputRequest> = [];\n\n  for (const httpRegion of processedHttpRegions) {\n    let output = options.output;\n    if (options.outputFailed && httpRegion.testResults?.some?.(test => !test.status)) {\n      output = options.outputFailed;\n    }\n    const result: SendOutputRequest = {\n      fileName: fileProvider.fsPath(httpRegion.filename) || fileProvider.toString(httpRegion.filename),\n      response: convertResponse(httpRegion.response, output),\n      name: utils.toString(httpRegion.metaData?.name) || httpRegion.symbol.name,\n      line: httpRegion.symbol.startLine,\n      title: utils.toString(httpRegion.metaData?.title),\n      description: utils.toString(httpRegion.metaData?.description),\n      testResults: httpRegion.testResults,\n      timestamp: new Date(performance.timeOrigin + httpRegion.start).toISOString(),\n      duration: httpRegion.duration,\n      summary: {\n        totalTests: httpRegion.testResults?.length || 0,\n        failedTests: httpRegion.testResults?.filter?.(t => t.status === TestResultStatus.FAILED).length || 0,\n        successTests: httpRegion.testResults?.filter?.(t => t.status === TestResultStatus.SUCCESS).length || 0,\n        erroredTests: httpRegion.testResults?.filter?.(t => t.status === TestResultStatus.ERROR).length || 0,\n        skippedTests: httpRegion.testResults?.filter?.(t => t.status === TestResultStatus.SKIPPED).length || 0,\n      },\n    };\n    requests.push(result);\n  }\n  let resultRequests = requests;\n  if (options.filter === SendFilterOptions.onlyFailed) {\n    resultRequests = requests.filter(obj => obj.summary.failedTests > 0);\n  }\n  return {\n    _meta: {\n      version: '1.1.0',\n    },\n    requests: resultRequests,\n    summary: createTestSummary(requests),\n  };\n}\n\nexport function createTestSummary(requests: Array<SendOutputRequest>): SendRequestSummary & SendTestSummary {\n  return {\n    totalRequests: requests.length,\n    skippedRequests: requests.filter(obj => obj.summary.skippedTests > 0).length,\n    failedRequests: requests.filter(obj => obj.summary.failedTests > 0).length,\n    successRequests: requests.filter(\n      obj => obj.summary.failedTests + obj.summary.erroredTests + obj.summary.skippedTests === 0\n    ).length,\n    erroredRequests: requests.filter(obj => obj.summary.erroredTests > 0).length,\n    totalTests: requests.map(obj => obj.summary.totalTests).reduce(sum, 0),\n    failedTests: requests.map(obj => obj.summary.failedTests).reduce(sum, 0),\n    successTests: requests.map(obj => obj.summary.successTests).reduce(sum, 0),\n    erroredTests: requests.map(obj => obj.summary.erroredTests).reduce(sum, 0),\n    skippedTests: requests.map(obj => obj.summary.skippedTests).reduce(sum, 0),\n  };\n}\n\nfunction convertResponse(response: HttpResponse | undefined, output: string | undefined) {\n  if (response) {\n    delete response.rawHeaders;\n    delete response.rawBody;\n    delete response.prettyPrintBody;\n    delete response.parsedBody;\n    delete response.contentType;\n    delete response.tags;\n\n    switch (output) {\n      case 'body':\n      case 'response':\n        delete response.request;\n        return response;\n      case 'short':\n        delete response.body;\n        delete response.request;\n        return response;\n      case 'none':\n        return undefined;\n      case 'headers':\n        delete response.body;\n        delete response.request?.body;\n        return response;\n      case 'exchange':\n      default:\n        return response;\n    }\n  }\n  return undefined;\n}\n", "import { HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\nimport { addSkippedTestResult } from '../../../utils';\n\nlet bailInBeforeLoop = false;\n\nexport const bailOnFailedTestInterceptor = {\n  id: 'bailOnFailed',\n  beforeLoop: async function beforeLoop(hookContext: { args: [models.ProcessorContext] }) {\n    if (bailInBeforeLoop) {\n      const [context] = hookContext.args;\n      addSkippedTestResult(context.httpRegion, 'request skipped because of bail');\n      return false;\n    }\n    return true;\n  },\n  onError: async function bailOnError() {\n    bailInBeforeLoop = true;\n    return true;\n  },\n  afterTrigger: async function bail(hookContext: HookTriggerContext<[models.ProcessorContext], boolean>) {\n    const context = hookContext.args[0];\n    const failedTest = context.httpRegion.testResults?.find?.(obj =>\n      [models.TestResultStatus.FAILED].includes(obj.status)\n    );\n    if (failedTest) {\n      bailInBeforeLoop = true;\n    }\n    return true;\n  },\n};\n", "import { HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\n\nexport const loggerFlushInterceptor = {\n  id: 'loggerFlush',\n  afterLoop: async function flushLogger(hookContext: HookTriggerContext<[models.ProcessorContext], boolean>) {\n    const context = hookContext.args[0];\n    context?.scriptConsole?.flush?.();\n    return true;\n  },\n};\n", "import { HookTriggerContext } from 'hookpoint';\n\nimport * as models from '../../../models';\n\nexport const testExitCodeInterceptor = {\n  id: 'testExitCode',\n\n  onError: async function onError(): Promise<boolean | undefined> {\n    process.exitCode = 10;\n    return true;\n  },\n\n  afterTrigger: async function bail(hookContext: HookTriggerContext<[models.ProcessorContext], boolean>) {\n    const context = hookContext.args[0];\n    const hasFailedTestResult = context.httpRegion.testResults?.some?.(\n      obj => obj.status === models.TestResultStatus.FAILED\n    );\n    if (hasFailedTestResult) {\n      process.exitCode = 20;\n    }\n    return true;\n  },\n};\n", "import { HttpyacHooksApi } from '../../../models';\nimport { bailOnFailedTestInterceptor } from './bailOnFailedTestInterceptor';\nimport { loggerFlushInterceptor } from './loggerFlushInterceptor';\nimport { testExitCodeInterceptor } from './testExitCodeInterceptor';\n\nexport function createCliPluginRegister(bail: boolean) {\n  return function registerCliPlugin(api: HttpyacHooksApi) {\n    api.hooks.execute.addInterceptor(loggerFlushInterceptor);\n    api.hooks.execute.addInterceptor(testExitCodeInterceptor);\n    if (bail) {\n      api.hooks.execute.addInterceptor(bailOnFailedTestInterceptor);\n    }\n  };\n}\n", "import { DOMImplementation } from '@xmldom/xmldom';\nimport { EOL } from 'os';\nimport { formatXml } from 'xmldom-format';\nimport { TestResult, TestResultStatus } from '../../models';\nimport * as utils from '../../utils';\nimport { SendJsonOutput, SendOutputRequest } from './jsonOutput';\n\n/**\n * output in junit format\n * @param output json object with all test results\n * @returns xml in junit format (https://github.com/junit-team/junit5/blob/main/platform-tests/src/test/resources/jenkins-junit.xsd)\n */\nexport function transformToJunit(output: SendJsonOutput): string {\n  const dom = new DOMImplementation();\n  const document = dom.createDocument('', '');\n\n  const xmlNode = document.createProcessingInstruction('xml', 'version=\"1.0\" encoding=\"UTF-8\"');\n  document.appendChild(xmlNode);\n  const root = document.createElement('testsuites');\n  document.appendChild(root);\n  root.setAttribute('name', `httpyac`);\n  root.setAttribute('tests', `${output.summary.totalTests}`);\n  root.setAttribute('errors', `${output.summary.erroredTests}`);\n  root.setAttribute('disabled', `${output.summary.skippedTests}`);\n  root.setAttribute('failures', `${output.summary.failedTests}`);\n  root.setAttribute('time', `${toFloatSeconds(output.requests.reduce(sumDuration, 0))}`);\n\n  for (const request of output.requests) {\n    root.appendChild(transformRequest(document, request));\n  }\n\n  return formatXml(document, {\n    indentation: '  ',\n    eol: EOL,\n  });\n}\n\n// eslint-disable-next-line no-undef\nfunction transformRequest(document: XMLDocument, request: SendOutputRequest) {\n  const testSuiteNode = document.createElement('testsuite');\n  setAttribute(testSuiteNode, 'name', request.name);\n  setAttribute(testSuiteNode, 'tests', request.summary?.totalTests || 0);\n  setAttribute(testSuiteNode, 'errors', request.summary?.erroredTests || 0);\n  setAttribute(testSuiteNode, 'failures', request.summary?.failedTests || 0);\n  setAttribute(testSuiteNode, 'skipped', request.summary?.skippedTests || 0);\n\n  let fileRelativeToCwd = request.fileName.replace(process.cwd(), '');\n  fileRelativeToCwd = fileRelativeToCwd.startsWith('/') ? fileRelativeToCwd.slice(1) : fileRelativeToCwd;\n  setAttribute(testSuiteNode, 'package', fileRelativeToCwd);\n  const requestDurationMillis = request.duration || 0;\n  setAttribute(testSuiteNode, 'time', toFloatSeconds(requestDurationMillis));\n\n  const propertiesNode = transformToProperties(document, {\n    title: request.title,\n    description: request.description,\n    line: request.line,\n    timestamp: request.timestamp,\n    file: fileRelativeToCwd,\n  });\n  if (propertiesNode) {\n    testSuiteNode.appendChild(propertiesNode);\n  }\n\n  if (request.testResults) {\n    const testCaseDurationMillis =\n      requestDurationMillis / (request.testResults.length === 0 ? 1 : request.testResults.length);\n    for (const testResult of request.testResults) {\n      const child = transformTestResultToTestcase(document, testResult, {\n        classname: request.name,\n        time: toFloatSeconds(testCaseDurationMillis),\n      });\n      testSuiteNode.appendChild(child);\n    }\n  }\n\n  return testSuiteNode;\n}\nfunction transformTestResultToTestcase(\n  // eslint-disable-next-line no-undef\n  document: XMLDocument,\n  testResult: TestResult,\n  attributes: Record<string, string | number>\n) {\n  const root = document.createElement('testcase');\n  setAttribute(root, 'name', testResult.message);\n  for (const [key, value] of Object.entries(attributes)) {\n    setAttribute(root, key, value);\n  }\n  setAttribute(root, 'assertions', 1);\n\n  if (testResult.error) {\n    const propertiesNode = transformToProperties(document, {\n      displayMessage: testResult.error?.displayMessage,\n      file: testResult.error?.file,\n      line: testResult.error?.line,\n      offset: testResult.error?.offset,\n      errorType: testResult.error?.errorType,\n      message: testResult.error?.message,\n    });\n    if (propertiesNode) {\n      root.appendChild(propertiesNode);\n    }\n  }\n\n  if ([TestResultStatus.ERROR, TestResultStatus.FAILED].includes(testResult.status)) {\n    const failureNode = document.createElement('failure');\n    root.appendChild(failureNode);\n    setAttribute(failureNode, 'message', testResult.message);\n    setAttribute(failureNode, 'type', testResult.error?.errorType ?? 'unknown');\n    failureNode.textContent = utils.errorToString(testResult.error?.error) || '';\n  } else if (testResult.status === TestResultStatus.SKIPPED) {\n    root.appendChild(document.createElement('skipped'));\n  }\n\n  return root;\n}\n\n// eslint-disable-next-line no-undef\nfunction transformToProperties(document: XMLDocument, properties: Record<string, string | number | undefined>) {\n  let hasChild = false;\n  const root = document.createElement('properties');\n  for (const [key, value] of Object.entries(properties)) {\n    if (value) {\n      hasChild = true;\n      const propertyNode = document.createElement('property');\n      propertyNode.setAttribute('name', key);\n      propertyNode.setAttribute('value', utils.toString(value) || '');\n      root.appendChild(propertyNode);\n    }\n  }\n\n  if (hasChild) {\n    return root;\n  }\n  return undefined;\n}\nfunction sumDuration(x: number, y: SendOutputRequest) {\n  return x + (y.duration || 0);\n}\n\nfunction toFloatSeconds(durationMillis: number): string {\n  return (durationMillis / 1000).toFixed(3);\n}\n\n// eslint-disable-next-line no-undef\nfunction setAttribute(node: HTMLElement, key: string, value: string | number | undefined) {\n  if (value || value === 0) {\n    node.setAttribute(key, `${value}`);\n  }\n}\n", "import * as models from '../../models';\nimport * as utils from '../../utils';\nimport { SendOptions } from './options';\n\ntype SelectActionResult = Array<{ httpRegions?: Array<models.HttpRegion>; httpFile: models.HttpFile }>;\n\nexport async function selectHttpFiles(\n  httpFiles: Array<models.HttpFile>,\n  cliOptions: SendOptions\n): Promise<SelectActionResult> {\n  if (cliOptions.all) {\n    return httpFiles.map(httpFile => ({\n      httpFile,\n    }));\n  }\n  const resultWithArgs = selectHttpFilesWithArgs(httpFiles, cliOptions);\n  if (resultWithArgs.length > 0) {\n    return resultWithArgs;\n  }\n  return await selectManualHttpFiles(httpFiles);\n}\n\nfunction selectHttpFilesWithArgs(httpFiles: Array<models.HttpFile>, cliOptions: SendOptions) {\n  const result: SelectActionResult = [];\n\n  for (const httpFile of httpFiles) {\n    const httpRegions = httpFile.httpRegions.filter(h => {\n      if (hasName(h, cliOptions.name)) {\n        return true;\n      }\n      if (hasTag(h, cliOptions.tag)) {\n        return true;\n      }\n      if (isLine(h, cliOptions.line)) {\n        return true;\n      }\n      return false;\n    });\n    if (httpRegions.length > 0) {\n      result.push({\n        httpFile,\n        httpRegions,\n      });\n    }\n  }\n  return result;\n}\n\nfunction hasName(httpRegion: models.HttpRegion, name: string | undefined) {\n  if (name) {\n    return httpRegion.metaData?.name === name;\n  }\n  return false;\n}\n\nfunction isLine(httpRegion: models.HttpRegion, line: number | undefined) {\n  if (line !== undefined) {\n    return line && httpRegion.symbol.startLine <= line && httpRegion.symbol.endLine >= line;\n  }\n  return false;\n}\n\nfunction hasTag(httpRegion: models.HttpRegion, tags: Array<string> | undefined) {\n  if (tags && utils.isString(httpRegion.metaData?.tag)) {\n    const metaDataTag = httpRegion.metaData.tag?.split(',').map(t => t.trim());\n    return tags.some(t => metaDataTag.includes(t));\n  }\n  return false;\n}\n\nasync function selectManualHttpFiles(httpFiles: Array<models.HttpFile>): Promise<SelectActionResult> {\n  const httpRegionMap: Record<string, SelectActionResult> = {};\n  const hasManyFiles = httpFiles.length > 1;\n  const cwd = `${process.cwd()}`;\n  for (const httpFile of httpFiles) {\n    const fileName = utils.ensureString(httpFile.fileName)?.replace(cwd, '.');\n    httpRegionMap[hasManyFiles ? `${fileName}: all` : 'all'] = [{ httpFile }];\n\n    for (const httpRegion of httpFile.httpRegions) {\n      if (!httpRegion.isGlobal()) {\n        const name = httpRegion.symbol.name;\n        httpRegionMap[hasManyFiles ? `${fileName}: ${name}` : name] = [\n          {\n            httpRegions: [httpRegion],\n            httpFile,\n          },\n        ];\n      }\n    }\n  }\n  const inquirer = await import('inquirer');\n  const answer = await inquirer.default.prompt([\n    {\n      type: 'list',\n      name: 'region',\n      message: 'please choose which region to use',\n      choices: Object.entries(httpRegionMap).map(([key]) => key),\n    },\n  ]);\n  if (answer.region && httpRegionMap[answer.region]) {\n    return httpRegionMap[answer.region];\n  }\n  return [];\n}\n"],
  "mappings": "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a,+DACf,EACA,CACE,KAAM,cACN,YAAa,8EACf,EACA,CACE,KAAM,eACN,YAAa,oFACf,EACA,CACE,KAAM,SACN,YAAa,mFACf,EACA,CACE,KAAM,OACN,YACE,4HACJ,EACA,CACE,KAAM,SACN,YAAa,wEACf,EACA,CACE,KAAM,YACN,YAAa,6FACf,EACA,CACE,KAAM,OACN,YAAa,mDACf,EACA,CACE,KAAM,OACN,YACE,8TACJ,EACA,CACE,KAAM,iBACN,YACE,6TACJ,EACA,CACE,KAAM,WACN,YACE,wNACJ,EACA,CACE,KAAM,oBACN,YAAa,yEACf,EACA,CACE,KAAM,gBACN,YAAa,2FACf,EACA,CACE,KAAM,WACN,YACE,8GACJ,EACA,CACE,KAAM,sBACN,YAAa,mFACf,EACA,CACE,KAAM,eACN,YAAa,qFACf,EACA,CACE,KAAM,SACN,YACE,uHACJ,EACA,CACE,KAAM,SACN,YACE,yGACJ,EACA,CACE,KAAM,sBACN,YAAa,sDACf,EACA,CACE,KAAM,QACN,YAAa,iFACf,EACA,CACE,KAAM,UACN,YACE,2RACJ,EACA,CACE,KAAM,KACN,YACE,6WACJ,EACA,CACE,KAAM,UACN,YACE,+JACJ,EACA,CACE,KAAM,oBACN,YACE,uLACJ,EACA,CACE,KAAM,aACN,YAAa,gDACf,EACA,CACE,KAAM,UACN,YAAa,4EACf,EACA,CACE,KAAM,MACN,YAAa,mEACf,EACA,CACE,KAAM,UACN,YAAa,iEACf,EACA,CACE,KAAM,4BACN,YACE,sPACJ,EACA,CACE,KAAM,mBACN,YACE,4KACJ,EACA,CACE,KAAM,MACN,YACE,4WACJ,EACA,CACE,KAAM,kBACN,YACE,8LACJ,EACA,CACE,KAAM,mBACN,YACE,kSACJ,EACA,CACE,KAAM,oBACN,YACE,oXACJ,EACA,CACE,KAAM,kBACN,YAAa,6EACf,EACA,CACE,KAAM,yBACN,YACE,wbACJ,EACA,CACE,KAAM,iBACN,YACE,gHACJ,EACA,CACE,KAAM,gBACN,YACE,2LACJ,EACA,CACE,KAAM,mBACN,YACE,oOAC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",
  "names": ["src_exports", "__export", "AbstractRequestClient", "ExecuteHook", "HookCancel", "HttpSymbol", "HttpSymbolKind", "LogLevel", "OnRequestHook", "OnResponseHook", "OnStreaming", "ParseEndRegionHook", "ParseHook", "ParseMetaDataHook", "ProtoDefinition", "ProvideAssertValue", "ProvideEnvironmentsHook", "ProvideVariablesHook", "RepeatOrder", "ReplaceVariableHook", "RequestClientEvent", "ResponseLoggingHook", "TestResultStatus", "VariableType", "cli_exports", "createEmptyProcessorContext", "getEnvironments", "getVariables", "io_exports", "send", "store_exports", "testSymbols", "utils_exports", "__toCommonJS", "cli_exports", "__export", "createProgram", "execute", "initFileProvider", "initIOProvider", "import_commander", "import_path", "utils_exports", "__export", "ENVIRONMENT_NONE", "HandlebarsSingleLine", "OAuth2Regex", "RegionSeparator", "addHttpFileRequestClientHooks", "addSkippedTestResult", "addTestResultToHttpRegion", "assertHasNoResponseBody", "assertHasResponseBody", "assertHeaderContains", "assertHeaderEquals", "assertMaxTotalTime", "assertResponseBodyEquals", "assertStatusEquals", "cleanVariables", "cloneRequest", "cloneResponse", "createResponseProxy", "decodeJWT", "defaultConfigFiles", "deleteHeader", "deleteVariableInContext", "distinct", "ensureString", "equalsPath", "errorToString", "executeGlobalScripts", "executeRequestClientFactory", "expandVariable", "extensionName", "findHttpRegionInContext", "findRootDir", "findRootDirOfFile", "getBufferEncoding", "getDisplayName", "getHeader", "getHeaderArray", "getHeaderBoolean", "getHeaderNumber", "getHeaderString", "getHttpyacConfig", "getMarkdownSyntax", "getPartOfBody", "getPlugins", "getRegionDescription", "importHttpFileInContext", "isBufferEncoding", "isError", "isHttpRegionSendContext", "isHttpRegionsSendContext", "isHttpRequest", "isHttpRequestMethod", "isHttpResponse", "isMimeTypeCSS", "isMimeTypeFormUrlEncoded", "isMimeTypeHtml", "isMimeTypeImage", "isMimeTypeJSON", "isMimeTypeJavascript", "isMimeTypeMarkdown", "isMimeTypeMultiPartFormData", "isMimeTypeMultiPartMixed", "isMimeTypeNewlineDelimitedJSON", "isMimeTypePdf", "isMimeTypeXml", "isOpenIdInformation", "isProcessorContext", "isPromise", "isString", "isStringEmpty", "isUndefined", "iterateDirectoryTree", "iterateUntilRoot", "joinMarkdown", "knownMetaData", "logResponse", "mergeRawHttpHeaders", "mergeResponses", "parseComments", "parseContentType", "parseDefaultHeadersFactory", "parseError", "parseFileImport", "parseHandlebarsString", "parseHandlebarsSymbols", "parseInlineResponse", "parseJson", "parseMimeType", "parseQueryLineFactory", "parseRequestHeaderFactory", "parseRequestLineFactory", "parseSubsequentLines", "parseUrlLineFactory", "promiseQueue", "randomArrayValue", "randomData", "randomEmail", "randomText", "repeat", "replaceFilePath", "replaceInvalidChars", "replaceVariables", "report", "requestLoggerFactory", "resolveClientCertificates", "setVariableInContext", "shortenFileName", "shrinkCloneResponse", "sleep", "stateGenerator", "stringifySafe", "testFactory", "testFactoryAsync", "toAbsoluteFilename", "toBoolean", "toBufferLike", "toEnvironmentKey", "toHttpString", "toHttpStringHeader", "toHttpStringRequest", "toHttpStringResponse", "toMarkdown", "toMarkdownHeader", "toMarkdownMeta", "toMarkdownRequest", "toMarkdownResponse", "toMarkdownTestResults", "toMarkdownTimings", "toMultiLineArray", "toMultiLineString", "toNumber", "toQueryParams", "toString", "unsetVariableInContext", "useDefaultOnError", "distinct", "array", "onlyUnique", "value", "index", "self", "import_chalk", "import_util", "io_exports", "__export", "Logger", "completionItemProvider", "fileProvider", "httpClientProvider", "javascriptProvider", "log", "userInteractionProvider", "completionItemProvider", "fileProvider", "toString", "fileName", "httpClientProvider", "javascriptProvider", "expression", "context", "import_hookpoint", "ParseHook", "obj", "ParseMetaDataHook", "ProvideAssertValue", "ParseEndRegionHook", "ProvideVariablesHook", "ProvideEnvironmentsHook", "ReplaceVariableHook", "OnRequestHook", "OnResponseHook", "OnStreaming", "ResponseLoggingHook", "ExecuteHook", "import_hookpoint", "HookCancel", "hookPointHookCancel", "HttpSymbol", "options", "line", "result", "child", "predicate", "HttpSymbolKind", "LogLevel", "ProtoDefinition", "fileName", "RepeatOrder", "RequestClientEvent", "message", "detail", "AbstractRequestClient", "type", "listener", "evt", "response", "percent", "testSymbols", "TestResultStatus", "VariableType", "Logger", "options", "cache", "action", "logLevel", "params", "_a", "_b", "log", "msg", "userInteractionProvider", "toMultiLineString", "lines", "fileProvider", "toMultiLineArray", "text", "isUndefined", "obj", "isString", "isStringEmpty", "stateGenerator", "length", "chars", "result", "i", "toString", "value", "jsonData", "stringifySafe", "indent", "err", "log", "seen", "_key", "ensureString", "toBoolean", "value", "defaultValue", "_a", "stringValue", "ensureString", "numberValue", "toNumber", "toBufferLike", "toString", "parseMimeType", "contentType", "_a", "_b", "mimeType", "parameters", "v", "charset", "p", "boundary", "isMimeTypeJSON", "isMimeTypeJavascript", "isMimeTypeXml", "isMimeTypeHtml", "isMimeTypeCSS", "isMimeTypeMarkdown", "isMimeTypeMultiPartFormData", "isMimeTypeMultiPartMixed", "isMimeTypeNewlineDelimitedJSON", "isMimeTypeFormUrlEncoded", "isMimeTypePdf", "isMimeTypeImage", "isHttpRequestMethod", "method", "isHttpRequest", "request", "deleteHeader", "headers", "headerNames", "headerName", "entry", "key", "getHeaderString", "value", "getHeader", "isString", "getHeaderBoolean", "defaultValue", "toBoolean", "getHeaderNumber", "toNumber", "getHeaderArray", "parseContentType", "contentType", "parseMimeType", "decodeJWT", "str", "jwtComponents", "payload", "result", "err", "log", "toQueryParams", "params", "val", "requestLoggerFactory", "options", "optionsFailed", "response", "httpRegion", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "_h", "_i", "_j", "_k", "opt", "obj", "title", "chalk", "logRequest", "m", "logResponseHeader", "logTimings", "body", "getPartOfBody", "toMultiLineString", "testResult", "message", "testSymbols", "errorMessage", "length", "cloneRequest", "isHttpResponse", "shrinkCloneResponse", "clone", "cloneResponse", "mergeRawHttpHeaders", "rawHeaders", "mergedHeaders", "i", "headerRawName", "headerRawValue", "assert", "condition", "message", "assertStatusEquals", "response", "status", "assertMaxTotalTime", "maxTotalTime", "_a", "_b", "assertHeaderEquals", "headerKey", "val", "headerValue", "getHeader", "assertHeaderContains", "isString", "assertHasResponseBody", "assertHasNoResponseBody", "assertResponseBodyEquals", "isBufferEncoding", "encoding", "getBufferEncoding", "toAbsoluteFilename", "fileName", "baseName", "fileProvider", "isString", "absolute", "extensionName", "file", "dotIndex", "replaceInvalidChars", "obj", "shortenFileName", "maxChars", "result", "charLength", "item", "joinedString", "findRootDirOfFile", "filename", "workingDir", "files", "fsPath", "dirName", "findRootDir", "currentDir", "iterateDirectoryTree", "dir", "dirFiles", "iterateUntilRoot", "rootDir", "action", "equalsPath", "predicate", "path", "path2", "getHttpyacConfig", "filename", "rootDir", "result", "loadFileConfig", "loadPackageJsonConig", "resolveClientCertificates", "defaultConfigFiles", "fileConfigPath", "fileName", "resolvedPath", "fileProvider", "fsRoot", "javascriptProvider", "fileConfig", "iterateUntilRoot", "dir", "_a", "config", "parseJson", "text", "log", "value", "toAbsoluteFilename", "getPlugins", "packageJson", "getPackageJson", "hooks", "plugins", "isPlugin", "dep", "fsPath", "hook", "packageDir", "findRootDir", "ENVIRONMENT_NONE", "toEnvironmentKey", "env", "isError", "val", "err", "parseError", "_a", "match", "errorToString", "stringifySafe", "toString", "useDefaultOnError", "promise", "defaultVal", "log", "import_hookpoint", "import_hookpoint", "report", "context", "message", "_a", "_b", "log", "repeat", "load", "context", "_a", "_b", "loader", "repeatCount", "index", "responses", "obj", "result", "response", "mergeResponses", "cloneResponse", "parsedBody", "responseTimings", "statusString", "mergeTimings", "stringifySafe", "timings", "dns", "download", "firstByte", "request", "tcp", "tls", "total", "wait", "timing", "sum", "arr", "filtered", "prev", "curr", "import_hookpoint", "replaceVariables", "text", "type", "context", "_a", "_b", "log", "replaceFilePath", "fileName", "action", "_c", "_d", "file", "isString", "normalizedPath", "toAbsoluteFilename", "fileProvider", "message", "userInteractionProvider", "expandVariable", "value", "variables", "result", "match", "variableRegex", "searchValue", "variableName", "val", "setVariableInContext", "checkedVariables", "cleanVariables", "envKey", "toEnvironmentKey", "key", "javascriptProvider", "deleteVariableInContext", "unsetVariableInContext", "envVariables", "import_uuid", "executeRequestClientFactory", "requestClientFactory", "sessionStore", "context", "_a", "request", "onRequest", "requestClient", "setVariableInContext", "dispose", "registerCancellation", "connectionId", "connectionSession", "getConnectionSession", "messagePromises", "addProgressEvent", "addMessageEvent", "addMetaDataEvent", "report", "newClient", "log", "repeat", "onStreaming", "messageResponses", "response", "mergeResponses", "toResponses", "onResponse", "shouldDisconnectConnection", "err", "isError", "toString", "deleteVariableInContext", "responses", "result", "client", "_b", "prevPercent", "evt", "percent", "newData", "divider", "loadingPromises", "type", "createIsCanceledInterceptor", "createResponseProxy", "isCanceled", "args", "target", "property", "value", "id", "disconnect", "newSession", "getDisplayName", "httpRegion", "defaultName", "_a", "_b", "_c", "_d", "isString", "indexQuery", "line", "obj", "getRegionDescription", "logResponse", "response", "context", "clone", "cloneResponse", "createResponseProxy", "executeGlobalScripts", "addHttpFileRequestClientHooks", "requestClientHooks", "httpFile", "toHttpString", "response", "options", "result", "toHttpStringRequest", "toHttpStringResponse", "toMultiLineString", "toHttpStringHeader", "isString", "request", "headers", "key", "value", "val", "stringifySafe", "toMarkdown", "response", "options", "result", "toMarkdownRequest", "toMarkdownResponse", "toMarkdownTestResults", "toMarkdownTimings", "toMarkdownMeta", "joinMarkdown", "toMarkdownHeader", "isString", "getMarkdownSyntax", "body", "toMultiLineArray", "contentType", "isMimeTypeJSON", "isMimeTypeXml", "isMimeTypeHtml", "isMimeTypeJavascript", "isMimeTypeCSS", "isMimeTypeMarkdown", "request", "testResults", "testResult", "message", "testSymbols", "headers", "key", "value", "val", "stringifySafe", "meta", "timings", "lines", "fileProvider", "isOpenIdInformation", "userSession", "guard", "isProcessorContext", "context", "HandlebarsSingleLine", "RegionSeparator", "OAuth2Regex", "parseSubsequentLines", "lineReader", "requestLineParser", "context", "result", "next", "hasResult", "lineParser", "parseResult", "parseRequestHeaderFactory", "headers", "httpLine", "_a", "headerMatch", "headerName", "headerValue", "existingHeader", "valueOffset", "HttpSymbol", "parseHandlebarsSymbols", "s", "parseDefaultHeadersFactory", "setHeaders", "parserContext", "fileHeaders", "defaultsHeadersAction", "DefaultHeadersAction", "obj", "val", "data", "report", "javascriptProvider", "parseUrlLineFactory", "attachUrl", "parseQueryLineFactory", "parseComments", "metaRegex", "match", "key", "value", "knownMetaData", "maxNestedVariables", "parseHandlebarsString", "text", "evalExpression", "isString", "start", "infiniteLoopStopper", "searchValue", "variable", "valueString", "toString", "line", "startLine", "offset", "symbols", "parseInlineResponse", "getLineReader", "regex", "_b", "responseSymbol", "headersResult", "child", "parseFileImport", "fileImport", "getBufferEncoding", "parseRequestLineFactory", "requestContext", "getLineReader", "context", "_a", "_b", "_c", "lineReader", "next", "isValidRequestLine", "requestLine", "getRequestParseLine", "requestSymbol", "HttpSymbol", "result", "headers", "headersResult", "parseSubsequentLines", "parseComments", "parseRequestHeaderFactory", "parseDefaultHeadersFactory", "parseQueryLineFactory", "url", "parseUrlLineFactory", "parseResult", "contentType", "getHeader", "isString", "parseMimeType", "executeRequestClientFactory", "httpLine", "_d", "lineMatch", "parseHandlebarsSymbols", "protocolMatch", "isStringEmpty", "isHttpRegionSendContext", "context", "guard", "isHttpRegionsSendContext", "findHttpRegionInContext", "name", "refHttpRegion", "ref", "obj", "reference", "importHttpFileInContext", "fileName", "httpFileStore", "_a", "_b", "httpFile", "replaceFilePath", "absoluteFileName", "log", "importedHttpFiles", "fileProvider", "addHttpFileRequestClientHooks", "cloneContext", "executeGlobalScripts", "isPromise", "obj", "guard", "sleep", "timeout", "resolve", "promiseQueue", "batchSize", "promises", "result", "queue", "promise", "queuePromises", "index", "import_dayjs", "import_uuid", "randomData", "length", "randomText", "randomEmail", "from", "to", "date", "format", "dayjs", "randomArrayValue", "chars", "result", "abc", "index", "values", "testFactoryAsync", "httpRegion", "message", "testMethod", "testResult", "err", "setErrorInTestResult", "addTestResultToHttpRegion", "isError", "parseError", "testFactory", "variables", "testFunction", "getHttpResponse", "isHttpResponse", "status", "response", "assertStatusEquals", "maxTotalTime", "assertMaxTotalTime", "headerKey", "val", "assertHeaderEquals", "assertHeaderContains", "assertResponseBodyEquals", "assertHasResponseBody", "assertHasNoResponseBody", "addSkippedTestResult", "import_fs", "import_os", "import_path", "initIOProvider", "initFileProvider", "initUserInteractionProvider", "initFixTestSymbols", "testSymbols", "fileProvider", "path", "fileName", "extensions", "extension", "joinPath", "fs", "encoding", "file", "stream", "toBuffer", "buffer", "dirname", "resolve", "reject", "buffers", "obj", "error", "inquirer", "userInteractionProvider", "note", "message", "defaultValue", "maskedInput", "values", "err", "log", "import_commander", "import_assert", "EndsWithPredicate", "value", "expected", "valString", "toString", "expectedString", "EqualsPredicate", "value", "expected", "stringifySafe", "ExistsPredicate", "value", "GreaterEqualsPredicate", "value", "expected", "valNumber", "toNumber", "expectedNumber", "GreaterPredicate", "value", "expected", "valNumber", "toNumber", "expectedNumber", "IncludesPredicate", "value", "expected", "valString", "toString", "expectedString", "IsArrayPredicate", "value", "IsBooleanPredicate", "value", "IsFalsePredicate", "value", "IsNumberPredicate", "value", "IsStringPredicate", "value", "LowerEqualsPredicate", "value", "expected", "valNumber", "toNumber", "expectedNumber", "LowerPredicate", "value", "expected", "valNumber", "toNumber", "expectedNumber", "MatchesPredicate", "value", "expected", "valString", "toString", "expectedString", "import_crypto", "MD5Predicate", "value", "expected", "val", "toBufferLike", "NotEqualsPredicate", "value", "expected", "import_crypto", "SHA256Predicate", "value", "expected", "val", "toBufferLike", "import_crypto", "SHA512Predicate", "value", "expected", "val", "toBufferLike", "StartsWithPredicate", "value", "expected", "valString", "toString", "expectedString", "predicates", "EndsWithPredicate", "EqualsPredicate", "ExistsPredicate", "GreaterEqualsPredicate", "GreaterPredicate", "IncludesPredicate", "IsArrayPredicate", "IsBooleanPredicate", "IsNumberPredicate", "IsStringPredicate", "LowerEqualsPredicate", "LowerPredicate", "MatchesPredicate", "NotEqualsPredicate", "StartsWithPredicate", "SHA256Predicate", "MD5Predicate", "SHA512Predicate", "IsFalsePredicate", "parseAssertLine", "getLineReader", "httpRegion", "next", "textLine", "regex", "prev", "curr", "match", "type", "valueString", "expectedString", "predicate", "obj", "_a", "response", "context", "testFactoryAsync", "testResult", "value", "expected", "replaceVariables", "expectedConverted", "convertToType", "toString", "HttpSymbol", "target", "toNumber", "toBoolean", "completionItemProvider", "provideAssertValueDuration", "type", "value", "response", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "provideAssertValueHeader", "type", "value", "response", "getHeader", "provideAssertValueJavascript", "type", "value", "response", "context", "javascriptProvider", "provideAssertValueStatus", "type", "_value", "response", "TestFailedInterceptor", "err", "hookContext", "isError", "httpRegion", "addTestResultToHttpRegion", "parseError", "registerAssertPlugin", "api", "TestFailedInterceptor", "provideAssertValueStatus", "provideAssertValueHeader", "provideAssertValueJavascript", "provideAssertValueDuration", "parseAssertLine", "completionItemProvider", "DEFAULT_ENV", "SHARED_ENV", "provideConfigEnvironments", "context", "_a", "envs", "obj", "log", "provideConfigVariables", "variables", "environments", "env", "store_exports", "__export", "HttpFile", "HttpFileStore", "HttpRegion", "UserSessionStore", "closeHttpRegion", "createReaderFactory", "getEnvironmentConfig", "parseHttpFile", "pluginStore", "setSource", "userSessionStore", "import_chalk", "import_merge", "getEnvironmentConfig", "config", "httpFile", "environmentConfigs", "fileConfig", "getHttpyacConfig", "result", "merge", "refreshStaticConfig", "_a", "_b", "_c", "log", "chalk", "HttpFile", "fileName", "rootDir", "ParseHook", "ParseMetaDataHook", "ParseEndRegionHook", "ProvideAssertValue", "ReplaceVariableHook", "ProvideEnvironmentsHook", "ProvideVariablesHook", "ExecuteHook", "OnStreaming", "OnRequestHook", "OnResponseHook", "ResponseLoggingHook", "name", "obj", "_a", "import_hookpoint", "closeHttpRegion", "parserContext", "httpRegion", "getDisplayName", "getRegionDescription", "createReaderFactory", "startLine", "lines", "noStopOnMetaTag", "line", "textLine", "RegionSeparator", "import_hookpoint", "import_hookpoint", "HttpRegion", "_HttpRegion", "httpFile", "start", "ExecuteHook", "OnRequestHook", "OnStreaming", "OnResponseHook", "ResponseLoggingHook", "HttpSymbol", "httpRegion", "context", "isMainContext", "_a", "_b", "_c", "executeHook", "globalRegion", "obj", "result", "addHttpFileRequestClientHooks", "toEnvironmentKey", "err", "isError", "envKey", "refRegion", "visitedDependents", "unvisitedDependents", "d", "setSource", "httpRegions", "lines", "httpRegion", "setSymbolSource", "symbol", "toMultiLineString", "endOffset", "child", "parseHttpFile", "httpFile", "text", "httpFileStore", "lines", "toMultiLineArray", "parserContext", "HttpRegion", "line", "httpRegionParserResult", "createReaderFactory", "closeHttpRegion", "setSource", "pluginStore", "HttpFileStore", "plugins", "fileName", "version", "cacheKey", "fileProvider", "httpFileStoreEntry", "obj", "_a", "result", "store", "getText", "options", "text", "httpFile", "httpRegion", "prevHttpRegion", "err", "parseHttpFile", "index", "oldFileName", "newFileName", "oldCacheKey", "_b", "absoluteFileName", "toAbsoluteFilename", "rootDir", "findRootDirOfFile", "defaultConfigFiles", "HttpFile", "getEnvironmentConfig", "hooks", "pluginStore", "getPlugins", "envPluginLocation", "envHook", "log", "api", "userSessionStore", "userInteractionProvider", "httpClientProvider", "javascriptProvider", "utils_exports", "plugin", "hook", "isPromise", "UserSessionStore", "listener", "index", "userSession", "id", "obj", "session", "userSessionStore", "provideLastResponseVariables", "userSession", "userSessionStore", "import_cloneDeep", "CreateRequestInterceptor", "hookContext", "context", "report", "cloneDeep", "import_hookpoint", "VariableHookId", "LazyVariableInterceptor", "hookContext", "context", "_a", "key", "value", "result", "replaceVariables", "LogResponseInterceptor", "hookContext", "context", "clone", "cloneResponse", "logResponse", "ProcessedHttpRegionInterceptor", "hookContext", "context", "processedHttpRegion", "_err", "_a", "_b", "obj", "response", "RegionScopedVariablesInterceptor", "hookContext", "_a", "context", "env", "toEnvironmentKey", "regionScopedVariables", "obj", "newVariables", "variables", "key", "value", "disabledMetaDataHandler", "type", "value", "context", "result", "javascriptProvider", "addSkippedTestResult", "hookContext", "httpRegion", "forceRegionDelimiterMetaDataHandler", "type", "_value", "context", "importMetaDataHandler", "type", "value", "context", "obj", "ImportMetaAction", "fileName", "httpFileStore", "importHttpFileInContext", "jwtMetaDataHandler", "type", "value", "context", "response", "body", "entries", "checkEntries", "key", "val", "parseJwtToken", "result", "resultString", "stringifySafe", "isString", "decodeJWT", "import_uuid", "keepStreamingMetaDataHandler", "type", "_value", "context", "id", "uuid", "report", "resolve", "userSessionStore", "import_hookpoint", "import_uuid", "loopMetaDataHandler", "type", "value", "context", "_a", "_b", "_c", "_d", "forOfMatch", "addHook", "forMatch", "whileMatch", "data", "loopAction", "LoopMetaInterceptor", "obj", "LoopMetaInterceptor", "data", "uuid", "hookContext", "obj", "context", "responses", "iteration", "next", "report", "loopContext", "setVariableInContext", "_a", "array", "javascriptProvider", "iterable", "index", "variable", "variables", "httpRegion", "clone", "noRedirectMetaDataHandler", "type", "_value", "context", "request", "noRejectUnauthorizedMetaDataHandler", "type", "_value", "context", "request", "noteMetaDataHandler", "type", "value", "context", "note", "getDisplayName", "userInteractionProvider", "proxyMetaDataHandler", "type", "value", "context", "request", "rateLimitMetaDataHandler", "type", "value", "httpRegion", "match", "slot", "minIdleTime", "max", "expire", "context", "rateLimitSession", "getRateLimitSession", "checkRateLimit", "currentRequest", "removeExpiredRequests", "first", "freeSlotTime", "report", "log", "sleep", "lastRequest", "isRateLimitSession", "session", "sessionId", "userSessionStore", "description", "result", "requests", "current", "index", "request", "refMetaDataHandler", "type", "name", "context", "obj", "RefMetaAction", "data", "_a", "replaceVariables", "log", "result", "report", "reference", "findHttpRegionInContext", "envKey", "toEnvironmentKey", "setVariableInContext", "isUndefined", "t", "addSkippedTestResult", "responseRefMetaDataHandler", "type", "value", "context", "sleepMetaDataHandler", "type", "value", "context", "ctx", "timeout", "javascriptProvider", "report", "sleep", "timeoutMetaDataHandler", "type", "value", "context", "val", "toNumber", "request", "verboseMetaDataHandler", "type", "_value", "context", "level", "log", "parseComment", "getLineReader", "httpRegion", "lineReader", "comment", "getCommentContent", "HttpSymbol", "_a", "next", "startLine", "singleLineMatch", "lines", "toMultiLineString", "MetaDataRegex", "parseMetaData", "getLineReader", "context", "_a", "_b", "lineReader", "httpRegion", "data", "next", "textLine", "isMarkdownRequest", "log", "result", "delimiterMatch", "RegionSeparator", "HttpSymbol", "commentResult", "parseComments", "contentType", "parseContentType", "isMimeTypeMarkdown", "parseRequestBody", "getLineReader", "context", "_a", "_b", "_c", "lineReader", "requestBody", "getRequestBody", "next", "isStringEmpty", "symbols", "HttpSymbol", "parseHandlebarsSymbols", "fileImport", "parseFileImport", "result", "MultipartMixedInterceptor", "hookContext", "_a", "context", "isMimeTypeMultiPartMixed", "boundary", "lastline", "getRequestBody", "isString", "parseOutputRedirection", "getLineReader", "httpRegion", "_a", "next", "textLine", "match", "fileName", "force", "response", "context", "fileNameReplaced", "toString", "replaceVariables", "file", "getOutputRedirectionFileName", "fileProvider", "log", "err", "HttpSymbol", "baseName", "toAbsoluteFileName", "dotIndex", "path", "extension", "index", "dirName", "parseHttpRequestLine", "parseRequestLineFactory", "request", "context", "httpClientProvider", "isHttpRequest", "parseProtocol", "userSessionStore", "_a", "match", "parseResponse", "getLineReader", "context", "parseInlineResponse", "parseResponseRef", "getLineReader", "httpRegion", "_a", "next", "textLine", "match", "filename", "HttpSymbol", "parseVariable", "getLineReader", "httpRegion", "next", "textLine", "match", "key", "isLazy", "useGlobal", "value", "context", "result", "replaceVariables", "globalVar", "setVariableInContext", "HttpSymbol", "registerCancelExecutionInterceptor", "parserContext", "hookContext", "_a", "_b", "log", "attachDefaultHeaders", "request", "context", "_a", "report", "defaultHeaders", "key", "value", "getHeader", "import_encodeurl", "encodeRequestBody", "request", "isString", "isMimeTypeFormUrlEncoded", "encodeUrl", "excludeProxyInterceptor", "hookContext", "_a", "_b", "request", "context", "proxyExclude", "isTrustedInterceptor", "hookContext", "userInteractionProvider", "request", "import_hookpoint", "requestVariableReplacer", "request", "context", "report", "result", "replaceVariables", "isString", "replaceVariablesInBody", "replaceVariablesInHeader", "toString", "replacedBody", "obj", "headerName", "headerValue", "headerVal", "value", "resolveRequestBody", "request", "context", "buffers", "obj", "isString", "result", "setDefaultHttpyacHeaders", "request", "httpyacHeaders", "key", "value", "getHeader", "setEnvRequestOptions", "request", "variables", "setEnvRejectUnauthorized", "setEnvNoRedirect", "setEnvProxy", "setEnvRequestTimeout", "toBoolean", "isString", "timeout", "toNumber", "transformRequestBodyToBuffer", "request", "context", "transformToBufferOrString", "body", "isString", "normalizeBody", "buffers", "obj", "result", "transfromMultilineFormUrlEncoded", "request", "isString", "isMimeTypeFormUrlEncoded", "lines", "toMultiLineArray", "result", "line", "t", "closeRequestBody", "context", "_a", "requestBody", "getAndRemoveRequestBody", "request", "removeTrailingEmptyLines", "requestBodyLines", "toHttpRequestBodyLineArray", "requestContents", "splitRequestContents", "createStreamingBodySendFactory", "transformLinesToBody", "contentType", "isMimeTypeFormUrlEncoded", "formUrlEncodedJoin", "addLineForNewlineDelimitedJSON", "concatStrings", "body", "strings", "lineEnding", "isMimeTypeMultiPartFormData", "fileProvider", "line", "isString", "result", "obj", "isMimeTypeNewlineDelimitedJSON", "lines", "isStringEmpty", "lastLine", "rawBody", "injectVariables", "fileName", "forceInjectVariables", "file", "extname", "extensionName", "replaceFilePath", "path", "previousValue", "currentValue", "currentIndex", "prev", "store", "wait", "match", "separatorMatch", "streamingContents", "resolve", "sendStreamingContents", "messageWaitCount", "streamingContent", "isLast", "sendWithRequestClient", "count", "messageCount", "replaceVariablesInBody", "transformToBufferOrString", "closeResponseBody", "context", "response", "body", "toMultiLineString", "parseContentType", "symbol", "lastLine", "HttpSymbol", "escapeVariableInterceptor", "hookContext", "text", "isString", "escapeRegex", "match", "result", "searchValue", "variable", "replaceFileImport", "text", "type", "context", "parseHandlebarsString", "variable", "fileImport", "parseFileImport", "fileContent", "replaceFilePath", "path", "fileProvider", "replaceVariables", "hostVariableReplacer", "text", "type", "variables", "request", "isString", "host", "getHeader", "port", "replaceVariableNames", "text", "_type", "context", "parseHandlebarsString", "variable", "import_dayjs", "import_utc", "import_uuid", "dayjs", "utc", "restClientVariableReplacer", "text", "_type", "variables", "parseHandlebarsString", "variable", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "_h", "_i", "_j", "_k", "_l", "trimmedVariable", "uuid", "valMatch", "min", "toNumber", "max", "temp", "date", "import_hookpoint", "showInputBoxVariableReplacer", "text", "_type", "variables", "parseHandlebarsString", "variable", "_a", "matchInput", "placeholder", "inputType", "id", "session", "userSessionStore", "isPassword", "answer", "userInteractionProvider", "import_hookpoint", "showQuickpickVariableReplacer", "text", "_type", "context", "parseHandlebarsString", "variable", "_a", "_b", "matchInput", "placeholder", "id", "session", "userSessionStore", "items", "getArray", "answer", "userInteractionProvider", "value", "result", "jsResult", "javascriptProvider", "err", "log", "handleNameMetaData", "response", "context", "httpRegion", "isString", "name", "value", "setVariableInContext", "jsonResponseInterceptor", "hookContext", "response", "isMimeTypeJSON", "isString", "stringifySafe", "err", "log", "setLastResponseInVariables", "response", "context", "cloneResponse", "shrinkCloneResponse", "userSessionStore", "registerCorePlugins", "api", "initOnRequestHook", "initOnResponseHook", "initParseHook", "initExecuteInterceptor", "initParseMetData", "initParseEndHook", "initProvideEnvironmentsHook", "initReplaceVariableHook", "attachDefaultHeaders", "setEnvRequestOptions", "resolveRequestBody", "setDefaultHttpyacHeaders", "requestVariableReplacer", "transformRequestBodyToBuffer", "transfromMultilineFormUrlEncoded", "encodeRequestBody", "isTrustedInterceptor", "excludeProxyInterceptor", "handleNameMetaData", "setLastResponseInVariables", "jsonResponseInterceptor", "parseMetaData", "parseComment", "parseVariable", "parseHttpRequestLine", "parseOutputRedirection", "parseResponseRef", "parseResponse", "parseRequestBody", "MultipartMixedInterceptor", "registerCancelExecutionInterceptor", "closeResponseBody", "closeRequestBody", "hostVariableReplacer", "replaceVariableNames", "replaceFileImport", "showInputBoxVariableReplacer", "showQuickpickVariableReplacer", "restClientVariableReplacer", "escapeVariableInterceptor", "disabledMetaDataHandler", "importMetaDataHandler", "jwtMetaDataHandler", "keepStreamingMetaDataHandler", "loopMetaDataHandler", "noRedirectMetaDataHandler", "noRejectUnauthorizedMetaDataHandler", "timeoutMetaDataHandler", "noteMetaDataHandler", "proxyMetaDataHandler", "rateLimitMetaDataHandler", "refMetaDataHandler", "responseRefMetaDataHandler", "sleepMetaDataHandler", "verboseMetaDataHandler", "forceRegionDelimiterMetaDataHandler", "processedHttpRegionInterceptor", "ProcessedHttpRegionInterceptor", "RegionScopedVariablesInterceptor", "CreateRequestInterceptor", "LazyVariableInterceptor", "LogResponseInterceptor", "provideConfigEnvironments", "provideConfigVariables", "provideLastResponseVariables", "import_dotenv", "envFileName", "provideDotenvEnvironments", "context", "files", "fileProvider", "err", "log", "dirOfFile", "iterateUntilRoot", "dir", "readEnvDir", "getEnvdirname", "useDefaultOnError", "envs", "file", "val", "rootDir", "absoluteDir", "toAbsoluteFilename", "provideDotenvVariables", "env", "searchFiles", "getSearchFiles", "variables", "getEnvVariables", "vars", "getEnvFolderVariables", "_a", "environment", "envDirName", "absolute", "foundFiles", "fileName", "content", "registerDotenvPlugin", "api", "provideDotenvEnvironments", "provideDotenvVariables", "isEventSourceRequest", "request", "completionItemProvider", "request", "result", "isEventSourceRequest", "import_eventsource", "EventSourceRequestClient", "AbstractRequestClient", "request", "isEventSourceRequest", "EventSource", "log", "_a", "options", "headers", "deleteHeader", "client", "events", "getHeaderArray", "event", "message", "err", "errorToString", "metaDataEvents", "parseEventSource", "parseRequestLineFactory", "request", "EventSourceRequestClient", "userSessionStore", "parseEventSourceResponse", "getLineReader", "context", "parseInlineResponse", "eventSource", "registerEventSourcePlugin", "api", "parseEventSource", "parseEventSourceResponse", "javascriptProvider", "eventSource", "GqlAction", "gqlData", "request", "context", "_a", "_b", "_c", "_d", "_e", "report", "query", "isString", "result", "message", "userInteractionProvider", "log", "key", "value", "fragment", "toMultiLineString", "replacedQuery", "replaceVariables", "gqlRequestBody", "stringifySafe", "EmptyLine", "parseGraphql", "getLineReader", "context", "lineReader", "gqlContent", "getGQLContent", "gqlData", "getGqlFragments", "removeDirectives", "obj", "GqlAction", "operationName", "name", "result", "_a", "_b", "_c", "next", "startLine", "fileMatches", "parserPath", "HttpSymbol", "replaceFilePath", "path", "fileProvider", "queryMatch", "matchGqlContent", "fragmentMatch", "value", "prevReader", "gqlLines", "toMultiLineString", "graphqlProtocolReplacer", "request", "_a", "getHeader", "registerGraphQL", "api", "parseGraphql", "graphqlProtocolReplacer", "isGrpcRequest", "request", "callOptionsRequestHook", "request", "context", "_a", "_b", "isGrpcRequest", "report", "timeout", "toNumber", "import_grpc_js", "channelCredentialsRequestHook", "request", "isGrpcRequest", "channelCredentials", "getHeader", "isString", "deleteHeader", "channelOptionsRequestHook", "request", "context", "isGrpcRequest", "report", "key", "value", "deleteHeader", "isString", "toNumber", "completionItemProvider", "request", "result", "isGrpcRequest", "GrpcUrlRegex", "getSerivceData", "url", "protoDefinitions", "_a", "urlMatch", "server", "path", "service", "method", "protocol", "flatServices", "flattenProtoDefinitions", "ServiceClass", "serviceKey", "key", "log", "methodDefinition", "value", "flatServiceKeys", "result", "protoDefinition", "grpcObject", "getFlatGrpcObject", "prev", "curr", "isGrpcObject", "name", "obj", "grpc", "import_stream", "grpc", "PathAwareChannel", "address", "credentials", "options", "path", "method", "deadline", "host", "parentCall", "propagateFlags", "import_connectivity_state", "log", "GrpcRequestClient", "AbstractRequestClient", "request", "context", "_a", "_b", "_c", "_d", "serviceData", "options", "address", "credentials", "nextOptions", "PathAwareChannel", "err", "replaceInvalidChars", "prevClient", "isGrpcRequest", "connectivityState", "protoDefinitions", "getSerivceData", "body", "resolve", "data", "initNewStream", "methodName", "method", "methodArgs", "result", "isString", "client", "stream", "metaData", "chunk", "metaDataEvents", "event", "message", "key", "value", "stringifySafe", "response", "parseGrpcLine", "parseRequestLineFactory", "request", "context", "GrpcRequestClient", "userSessionStore", "parseGrpcResponse", "getLineReader", "context", "parseInlineResponse", "import_grpc_js", "import_proto_loader", "ProtoImport", "parseProtoImport", "getLineReader", "context", "_a", "lineReader", "next", "matchProto", "filename", "protoDefinition", "ProtoDefinition", "symbols", "HttpSymbol", "result", "headersResult", "parseSubsequentLines", "parseComments", "parseRequestHeaderFactory", "parseDefaultHeadersFactory", "headers", "_b", "loaderOptions", "parseResult", "obj", "ProtoImportAction", "ProtoDefinitionCreationInterceptor", "report", "definition", "userInteractionProvider", "options", "replaceFilePath", "path", "fsPath", "fileProvider", "message", "log", "optionsScript", "toMultiLineString", "value", "isString", "key", "javascriptProvider", "err", "hookContext", "grpc", "import_grpc_js_reflection_client", "import_grpc_js", "grpcReflectionMetaDataHandler", "type", "server", "context", "request", "isGrpcRequest", "report", "protoDefinitions", "loadGrpcProtoDefinitionsWithReflection", "err", "log", "host", "reflectionClient", "serviceNames", "serviceName", "packageDefinition", "grpcObject", "grpc", "grpcReflectionRequestHook", "request", "context", "_a", "_b", "isGrpcRequest", "report", "host", "GrpcUrlRegex", "protoDefinitions", "loadGrpcProtoDefinitionsWithReflection", "err", "log", "registerGrpcPlugin", "api", "grpcReflectionMetaDataHandler", "parseProtoImport", "parseGrpcLine", "parseGrpcResponse", "channelOptionsRequestHook", "channelCredentialsRequestHook", "callOptionsRequestHook", "grpcReflectionRequestHook", "javascriptProvider", "grpc", "import_aws4", "import_url", "awsAuthVariableReplacer", "text", "type", "context", "_a", "request", "isString", "isHttpRequest", "match", "report", "credentials", "url", "requestOptions", "result", "aws4", "BasicAuth", "BasicAuthColon", "basicAuthVariableReplacer", "text", "type", "isString", "match", "import_url", "clientCertVariableReplacer", "text", "type", "context", "_a", "_b", "_c", "request", "httpRegion", "httpFile", "isString", "isHttpRequest", "addClientCertificateForUrl", "match", "setClientCertificateOptions", "urlString", "url", "createUrl", "clientCertificateOptions", "dir", "fileProvider", "resolveFile", "fileName", "file", "toAbsoluteFilename", "completionItemProvider", "request", "isHttpRequest", "import_tough_cookie", "CookieJarInterceptor", "hookContext", "request", "httpRegion", "config", "options", "isHttpRequest", "idPrefix", "cookieSessions", "userSessionStore", "obj", "memoryStore", "cookieSession", "err", "log", "cookieJarOptions", "jar", "cookies", "cookie", "key", "value", "context", "_a", "_b", "toEnvironmentKey", "import_tough_cookie", "cookieVariableReplacer", "text", "type", "context", "_a", "request", "isHttpRequest", "isString", "val", "import_crypto", "import_url", "import_uuid", "import_filesize", "import_got", "import_http_proxy_agent", "import_https_proxy_agent", "import_merge", "import_socks_proxy_agent", "gotHttpClient", "request", "context", "options", "getClientOptions", "response", "got", "toHttpResponse", "err", "_a", "config", "merge", "initProxy", "ensureStringHeaders", "log", "proxy", "socksProxy", "headers", "header", "val", "result", "obj", "toString", "getBody", "parseContentType", "size", "current", "body", "DigestAuth", "DigestAuthColon", "digestAuthVariableReplacer", "text", "type", "context", "request", "isString", "isHttpRequest", "match", "digestFactory", "username", "password", "response", "retryWithMergedOptions", "wwwAuthenticate", "httpResponse", "toHttpResponse", "logResponse", "url", "challenge", "updateChallenge", "qop", "nc", "cnonce", "uuid", "ha1", "ha1Compute", "ha2", "md5", "digestResponse", "createDigestHeader", "authValues", "authParams", "key", "value", "algorithm", "realm", "nonce", "item", "import_got", "HttpRequestClient", "AbstractRequestClient", "request", "context", "got", "body", "isHttpRequest", "options", "getClientOptions", "toBufferLike", "response", "toHttpResponse", "err", "_a", "cancelableRequest", "data", "metaDataFactory", "event", "args", "toString", "logHttpRedirect", "request", "context", "_a", "_b", "isHttpRequest", "currentRequest", "options", "getBody", "response", "httpResponse", "toHttpResponse", "toString", "logResponse", "postRedirectGetMetaDataHandler", "type", "_value", "context", "request", "isHttpRequest", "options", "httpClientProvider", "gotHttpClient", "request", "context", "HttpRequestClient", "registerHttpPlugin", "api", "postRedirectGetMetaDataHandler", "CookieJarInterceptor", "awsAuthVariableReplacer", "basicAuthVariableReplacer", "clientCertVariableReplacer", "digestAuthVariableReplacer", "cookieVariableReplacer", "logHttpRedirect", "CodeBlockInterceptor", "extensions", "beginCodeBlock", "endCodeBlock", "hookContext", "getLineReader", "context", "fileProvider", "httpBlockLines", "noStopOnMetaTag", "lineReader", "line", "httpBlock", "obj", "RegionSeparator", "lines", "data", "result", "startLine", "lineNumber", "textLine", "regex", "index", "AsciidocInterceptor", "CodeBlockInterceptor", "MarkdownInterceptor", "CodeBlockInterceptor", "registerInjectionPlugin", "api", "MarkdownInterceptor", "AsciidocInterceptor", "import_crypto", "IntellijCryptoSupport", "IntellijHmacSupport", "IntellijDigestBuilder", "_IntellijDigestBuilder", "hash", "textInput", "encoding", "bufferEncoding", "getBufferEncoding", "result", "hexInput", "base64Input", "urlSafe", "IntellijDigest", "IntellijHmacInitializer", "algorithm", "textSecret", "hmac", "hexSecret", "base64Secret", "import_assert", "IntellijVariables", "context", "id", "userSession", "userSessionStore", "intellijSession", "value", "varName", "varValue", "setVariableInContext", "deleteVariableInContext", "key", "IntellijHttpClient", "context", "IntellijVariables", "testName", "func", "testFactory", "condition", "message", "text", "_a", "import_crypto", "import_open", "import_lodash", "import_get", "import_url", "DEFAULT_CALLBACK_URI", "DefaultOAuthVariablePrefix", "getVariableRaw", "variables", "name", "variablePrefix", "variableName", "varValue", "caseInsensitiveVariables", "key", "value", "get", "getVariableUnknown", "getter", "prefix", "expandVariable", "getOpenIdConfiguration", "getString", "expandedValue", "ensureString", "getArrayOrString", "v", "getUrl", "defaultUrl", "url", "getFunction", "getBoolean", "defaultValue", "toBoolean", "getNumber", "toNumber", "isOpenIdConfigurationEqual", "config1", "config2", "prop1", "prop2", "obj", "assertConfiguration", "config", "keys", "missingKeys", "message", "log", "import_http", "listeners", "server", "serverTimeout", "serverTimeoutTime", "registerListener", "listener", "initServer", "unregisterListener", "id", "listenerIndex", "obj", "resetServer", "clearServerTimeout", "seconds", "timeout", "closeServer", "err", "log", "port", "callbackPath", "req", "res", "statusMessage", "statusCode", "responseContent", "queryParams", "parseQueryParams", "path", "result", "getMessageHtml", "getServerStatus", "getHtml", "address", "url", "prev", "current", "key", "value", "message", "valid", "lines", "toTimeString", "minutes", "sec", "requestOpenIdInformation", "request", "options", "context", "_a", "_b", "time", "toQueryParams", "addConfigRequestOptions", "response", "httpClientProvider", "isProcessorContext", "logResponse", "isString", "toOpenIdInformation", "config", "_c", "_d", "toBoolean", "jwtToken", "session", "isAuthToken", "parsedToken", "decodeJWT", "log", "stringifySafe", "obj", "guard", "AuthorizationCodeFlow", "flow", "config", "assertConfiguration", "context", "id", "resolve", "reject", "_a", "_b", "_c", "state", "stateGenerator", "code_verifier", "report", "authUrl", "toQueryParams", "unregisterProgress", "unregisterListener", "registerListener", "params", "openIdInformation", "requestOpenIdInformation", "open", "err", "verifier", "authorizationCodeFlow", "ClientCredentialsFlow", "flow", "config", "assertConfiguration", "context", "id", "report", "requestOpenIdInformation", "toQueryParams", "clientCredentialsFlow", "import_open", "DeviceCodeFlow", "flow", "config", "assertConfiguration", "context", "_a", "_b", "_c", "_d", "id", "report", "deviceCodeTime", "deviceCodeResponse", "isProcessorContext", "logResponse", "isString", "deviceCodeBody", "intervalInMs", "toNumber", "sleep", "log", "time", "response", "parsedBody", "toOpenIdInformation", "userInteractionProvider", "err", "request", "toQueryParams", "addConfigRequestOptions", "httpClientProvider", "message", "openVerificationUri", "open", "button", "deviceCodeFlow", "import_open", "ImplicitFlow", "flow", "config", "assertConfiguration", "context", "id", "resolve", "reject", "_a", "_b", "_c", "report", "state", "stateGenerator", "authUrl", "toQueryParams", "unregisterProgress", "unregisterListener", "registerListener", "params", "openIdInformation", "requestOpenIdInformation", "toOpenIdInformation", "log", "open", "err", "implicitFlow", "PasswordFlow", "flow", "config", "assertConfiguration", "context", "id", "report", "requestOpenIdInformation", "toQueryParams", "passwordFlow", "RefreshTokenFlow", "time", "timeSkew", "expiresIn", "openIdInformation", "context", "report", "tokenEndpoint", "scope", "resource", "audience", "requestOpenIdInformation", "toQueryParams", "refreshTokenFlow", "import_encodeurl", "TokenExchangeFlow", "config", "assertConfiguration", "openIdInformation", "context", "report", "jwtToken", "decodeJWT", "requestOpenIdInformation", "toQueryParams", "encodeUrl", "import_hookpoint", "oauth2VariableReplacer", "text", "type", "context", "isString", "match", "OAuth2Regex", "flow", "report", "openIdInformation", "getOAuth2Response", "addTestResultToHttpRegion", "prefix", "tokenExchangePrefix", "openIdFlow", "getOpenIdFlow", "config", "getOpenIdConfiguration", "cacheKey", "tokenExchangeConfig", "getSessionOpenIdInformation", "userSessionStore", "log", "refreshTokenFlow", "TokenExchangeFlow", "isProcessorContext", "setVariableInContext", "keepAlive", "obj", "isOpenIdInformation", "isOpenIdConfigurationEqual", "flowType", "authorizationCodeFlow", "clientCredentialsFlow", "deviceCodeFlow", "passwordFlow", "implicitFlow", "variables", "timeoutId", "result", "registerOAuth2Plugin", "api", "oauth2VariableReplacer", "getOAuth2Response", "replaceIntellijVariableAuth", "variable", "context", "trimmedVariable", "token", "getOAuthToken", "_a", "_b", "match", "authConfig", "getOpenIdConfiguration", "setVariableInContext", "openIdInformation", "getOAuth2Response", "name", "variables", "_c", "_d", "isIntellijAuth", "log", "auth", "config", "transformCustomRequestParamterToString", "mapGrantType", "val", "v", "type", "obj", "sec", "import_uuid", "replaceIntellijVariableRandom", "variable", "trimmedVariable", "toString", "float", "randomFloat", "randomAlphabetic", "randomAlphanumeric", "randomHexadecimal", "randomEmail", "_a", "_b", "_c", "_d", "match", "from", "toNumber", "to", "temp", "length", "randomText", "replaceDynamicIntellijVariables", "text", "_type", "context", "parseHandlebarsString", "variable", "randomResult", "replaceIntellijVariableRandom", "replaceIntellijVariableAuth", "IntellijHttpClientRequest", "context", "_a", "_b", "_c", "_d", "toString", "IntellijRequestHeaders", "IntellijRequestEnvironment", "IntellijVariables", "IntellijPreRequestHttpClientRequest", "IntellijRequestUrl", "IntellijRequestBody", "result", "tryGetSubstituted", "name", "IntellijRequestHeader", "getHeader", "deleteHeader", "variables", "isUndefined", "value", "replacers", "replaceIntellijVariableRandom", "variable", "obj", "replacer", "parseHandlebars", "text", "evalExpression", "isString", "match", "start", "infiniteLoopStopper", "HandlebarsSingleLine", "searchValue", "valueString", "IntellijHttpResponse", "response", "toContentType", "IntellijHeaders", "contentType", "headers", "headerName", "obj", "getHeader", "isString", "IntellijTextStreamResponse", "requestClient", "resolve", "args", "subscriber", "onFinish", "subscriberHandler", "evt", "message", "toString", "answer", "completionItemProvider", "IntellijAction", "scriptData", "beforeReqeust", "obj", "_request", "context", "report", "intellijVars", "initIntellijVariables", "requestClient", "resolve", "IntellijTextStreamResponse", "response", "IntellijHttpResponse", "javascriptProvider", "replaceFilePath", "path", "fileProvider", "err", "log", "variables", "IntellijHttpClient", "IntellijCryptoSupport", "IntellijHttpClientRequest", "IntellijPreRequestHttpClientRequest", "provideIntellijGlobalVariables", "userSession", "userSessionStore", "parseIntellijScript", "getLineReader", "httpRegion", "lineReader", "intellijContent", "getIntellijContent", "intellijAction", "IntellijAction", "obj", "HttpSymbol", "hasRequest", "_a", "_b", "_c", "next", "startLine", "fileMatches", "fileName", "singleLineMatch", "multiLineMatch", "scriptLines", "toMultiLineString", "replaceIntellijProjectContext", "text", "_type", "context", "parseHandlebarsString", "variable", "provideIntellijEnvironments", "context", "envs", "getAllEnvironmentVariables", "log", "_a", "envJsonFiles", "envJsonFilter", "file", "globalEnv", "isString", "globalEnvAbsolute", "toAbsoluteFilename", "readAbsoluteDirs", "absolute", "dirOfFile", "fileProvider", "iterateUntilRoot", "dir", "environments", "path1", "path2", "path1String", "path2String", "path1Private", "path2Private", "getEnvironmentVariables", "key", "value", "filter", "useDefaultOnError", "provideIntellijVariables", "variables", "env", "fileName", "content", "err", "registerIntellijPlugin", "api", "parseIntellijScript", "provideIntellijEnvironments", "provideIntellijVariables", "provideIntellijGlobalVariables", "replaceDynamicIntellijVariables", "replaceIntellijProjectContext", "completionItemProvider", "provideGlobalVariableStore", "env", "id", "getGlobalUserSessionId", "userSession", "userSessionStore", "GlobalVariablesInterceptor", "hookContext", "context", "global", "toEnvironmentKey", "HttpyacJsApi", "context", "httpFileStore", "name", "findHttpRegionInContext", "fileName", "importHttpFileInContext", "vars", "setVariableInContext", "httpRegion", "obj", "isString", "envKey", "toEnvironmentKey", "import_module", "import_path", "import_vm", "resolveModule", "request", "context", "resolvedPath", "Module", "path", "e", "log", "loadModule", "force", "userInteractionProvider", "clearModule", "clearRequireCache", "createModule", "filename", "source", "mod", "id", "map", "module", "child", "runScript", "options", "toModuleFilename", "extendedRequire", "proivderRequire", "javascriptProvider", "validContent", "checkVariableNames", "contextKeys", "sourceAsync", "fileProvider", "vm", "deleteVariables", "result", "isPromise", "key", "value", "fileName", "deleteVariable", "err", "evalExpression", "expression", "scriptContext", "script", "lineOffset", "index", "toMultiLineArray", "line", "randomData", "name", "val", "JAVASCRIPT_KEYWORDS", "isAllowedKeyword", "HTTPYAC_KEYWORDS", "JavaScriptStart", "JavaScriptEnd", "parseJavascript", "getLineReader", "httpRegion", "httpFile", "httpFileStore", "lineReader", "next", "match", "lineOffset", "script", "scriptData", "toMultiLineString", "isOnEveryRequest", "addRequestHook", "addStreamingHook", "addResponseHook", "addExecuteAfterInterceptor", "addResponseLoggingHook", "addExecuteHook", "HttpSymbol", "hooks", "context", "executeScriptData", "HookCancel", "_request", "response", "originalResponse", "AfterJavascriptHookInterceptor", "eventName", "report", "result", "runScript", "sleep", "testFactory", "HttpyacJsApi", "randomData", "key", "deleteVariableInContext", "cancel", "addSkippedTestResult", "setVariableInContext", "replaceJavascriptExpressions", "text", "type", "context", "parseHandlebarsString", "variable", "searchValue", "evalExpression", "err", "log", "import_dayjs", "import_open", "uuid", "io_exports", "loadModule", "registerJavascriptPlugin", "api", "replaceJavascriptExpressions", "parseJavascript", "GlobalVariablesInterceptor", "provideGlobalVariableStore", "addDefaultRequire", "evalExpression", "runScript", "isAllowedKeyword", "src_exports", "dayjs", "open", "uuid", "isMQTTRequest", "request", "completionItemProvider", "request", "isMQTTRequest", "import_mqtt", "MQTTRequestClient", "AbstractRequestClient", "request", "context", "isMQTTRequest", "getHeaderArray", "options", "body", "toString", "promise", "index", "obj", "err", "close", "_a", "log", "client", "topic", "message", "packet", "errorToString", "metaDataEvents", "event", "isString", "config", "configOptions", "timeout", "toNumber", "isUndefined", "toBoolean", "headers", "key", "topics", "getHeaderString", "header", "getHeader", "qos", "defaultVal", "parseMqttLine", "parseRequestLineFactory", "request", "context", "MQTTRequestClient", "userSessionStore", "parseMQTTResponse", "getLineReader", "context", "parseInlineResponse", "mqtt", "registerMqttPlugin", "api", "parseMqttLine", "parseMQTTResponse", "javascriptProvider", "mqtt", "AmqpChannelId", "AmqpQueue", "AmqpExchange", "AmqpMethod", "AmqpExchangeDestination", "AmqpRoutingKey", "AmqpTag", "AmqpNoAck", "AmqpExclusive", "AmqpMandatory", "AmqpInternal", "AmqpCorrelationId", "AmqpContentType", "AmqpContentEncoding", "AmqpDeliveryMode", "AmqpExpiration", "AmqpMessageId", "AmqpPriority", "AmqpReplyTo", "AmqpType", "AmqpUserId", "AmqpRequeue", "AmqpMultiple", "AmqpIfUnused", "AmqpIfEmpty", "AmqpPassive", "AmqpDurable", "AmqpAutoDelete", "getAmqpMethod", "request", "method", "utils_exports", "isAmqpRequest", "request", "import_amqp_client", "amqpMethods_exports", "__export", "AmqpAutoDelete", "AmqpChannelId", "AmqpContentEncoding", "AmqpContentType", "AmqpCorrelationId", "AmqpDeliveryMode", "AmqpDurable", "AmqpExchange", "AmqpExchangeDestination", "AmqpExclusive", "AmqpExpiration", "AmqpIfEmpty", "AmqpIfUnused", "AmqpInternal", "AmqpMandatory", "AmqpMessageId", "AmqpMethod", "AmqpMultiple", "AmqpNoAck", "AmqpPassive", "AmqpPriority", "AmqpQueue", "AmqpReplyTo", "AmqpRequeue", "AmqpRoutingKey", "AmqpTag", "AmqpType", "AmqpUserId", "ack", "bind", "cancel", "consume", "declare", "deleteMessage", "errorToHttpResponse", "getAmqpMethod", "getNonAmqpHeaders", "isAmqpError", "nack", "publish", "purge", "unbind", "ack", "channel", "request", "tags", "getHeaderArray", "AmqpTag", "tag", "result", "getHeaderBoolean", "AmqpMultiple", "stringifySafe", "getNonAmqpHeaders", "headers", "key", "isAmqpError", "obj", "guard", "errorToHttpResponse", "err", "request", "isError", "stringifySafe", "toString", "bind", "channel", "request", "onMessage", "exchanges", "getHeaderArray", "AmqpExchange", "queues", "AmqpQueue", "destinationExchanges", "AmqpExchangeDestination", "routingKey", "getHeaderString", "AmqpRoutingKey", "exchange", "queue", "result", "getNonAmqpHeaders", "stringifySafe", "destination", "cancel", "channel", "request", "tags", "getHeaderArray", "AmqpTag", "tag", "result", "stringifySafe", "consume", "channel", "request", "onMessage", "_a", "_b", "queues", "getHeaderArray", "AmqpQueue", "options", "getHeaderString", "AmqpTag", "getHeaderBoolean", "AmqpNoAck", "AmqpExclusive", "getNonAmqpHeaders", "queue", "message", "userInteractionProvider", "log", "declare", "channel", "request", "onMessage", "exchanges", "getHeaderArray", "AmqpExchange", "options", "getHeaderBoolean", "AmqpPassive", "AmqpDurable", "AmqpAutoDelete", "AmqpInternal", "exchange", "type", "getHeaderString", "AmqpType", "result", "stringifySafe", "queues", "AmqpQueue", "queue", "deleteMessage", "channel", "request", "onMessage", "exchanges", "getHeaderArray", "AmqpExchange", "options", "getHeaderBoolean", "AmqpIfUnused", "AmqpIfEmpty", "exchange", "result", "stringifySafe", "queues", "AmqpQueue", "queue", "nack", "channel", "request", "tags", "getHeaderArray", "AmqpTag", "tag", "result", "getHeaderBoolean", "AmqpRequeue", "AmqpMultiple", "stringifySafe", "publish", "channel", "request", "onMessage", "_a", "_b", "_c", "_d", "properties", "getHeaderString", "AmqpCorrelationId", "AmqpContentType", "AmqpContentEncoding", "getHeaderNumber", "AmqpDeliveryMode", "AmqpExpiration", "AmqpMessageId", "AmqpPriority", "AmqpReplyTo", "AmqpType", "AmqpUserId", "getNonAmqpHeaders", "exchanges", "getHeaderArray", "AmqpExchange", "routingKey", "AmqpRoutingKey", "exchange", "getHeaderBoolean", "AmqpMandatory", "stringifySafe", "queues", "AmqpQueue", "queue", "message", "userInteractionProvider", "log", "purge", "channel", "request", "onMessage", "queues", "getHeaderArray", "AmqpQueue", "queue", "result", "stringifySafe", "unbind", "channel", "request", "onMessage", "exchanges", "getHeaderArray", "AmqpExchange", "queues", "AmqpQueue", "destinationExchanges", "AmqpExchangeDestination", "routingKey", "getHeaderString", "AmqpRoutingKey", "nonAmqpHeaders", "getNonAmqpHeaders", "exchange", "queue", "result", "stringifySafe", "destination", "AmqpRequestClient", "AbstractRequestClient", "request", "context", "replaceInvalidChars", "obj", "isAmqpRequest", "channelId", "getHeaderNumber", "AmqpChannelId", "body", "toBufferLike", "type", "msg", "getAmqpMethod", "err", "errorToHttpResponse", "_a", "_b", "_c", "_d", "methodName", "result", "ack", "bind", "cancel", "consume", "declare", "deleteMessage", "nack", "publish", "purge", "unbind", "amqpMethods_exports", "key", "parseAmqpLine", "parseRequestLineFactory", "request", "context", "AmqpRequestClient", "isAmqpRequest", "getAmqpMethod", "userSessionStore", "parseAmqpResponse", "getLineReader", "context", "parseInlineResponse", "completionItemProvider", "request", "result", "isAmqpRequest", "method", "getHeader", "isString", "amqpClient", "registerAmqpPlugin", "api", "parseAmqpLine", "parseAmqpResponse", "javascriptProvider", "amqpClient", "completionItemProvider", "ws", "isWebsocketRequest", "request", "hasValidBody", "isString", "setWebsocketEnvRejectUnauthorized", "request", "variables", "isWebsocketRequest", "rejectUnauthorized", "toBoolean", "import_http_proxy_agent", "import_https_proxy_agent", "import_socks_proxy_agent", "import_ws", "WEBSOCKET_CLOSE_NORMAL", "WEBSOCKET_CLOSE_GOING_AWAY", "WebsocketRequestClient", "AbstractRequestClient", "request", "context", "replaceInvalidChars", "obj", "isWebsocketRequest", "WebSocket", "resolve", "_a", "_b", "resolveListener", "body", "sendBody", "toBufferLike", "err", "errorToString", "client", "toString", "message", "statusCode", "reason", "metaDataEvents", "event", "isString", "config", "configOptions", "toNumber", "isUndefined", "toBoolean", "metaDataOptions", "options", "proxy", "socksProxy", "parseWebsocketLine", "parseRequestLineFactory", "request", "context", "WebsocketRequestClient", "userSessionStore", "parseWebSocketResponse", "getLineReader", "context", "parseInlineResponse", "registerWebsocketPlugin", "api", "setWebsocketEnvRejectUnauthorized", "parseWebsocketLine", "parseWebSocketResponse", "javascriptProvider", "ws", "import_xmldom", "getNode", "variableName", "variables", "xml", "variable", "isString", "isHttpResponse", "isNode", "response", "isMimeTypeXml", "parseFromString", "obj", "node", "mimeType", "level", "message", "log", "import_xpath", "provideAssertValueXPath", "type", "value", "response", "context", "body", "toString", "node", "parseFromString", "evaluate", "results", "getSelectReturnType", "err", "log", "resultNode", "getTextContent", "obj", "isNode", "xmldom", "xpath", "import_os", "import_xmldom_format", "xmlResponseInterceptor", "hookContext", "_a", "response", "isMimeTypeXml", "isString", "document", "parseFromString", "err", "log", "parseXpathNamespace", "getLineReader", "httpRegion", "next", "textLine", "match", "key", "value", "context", "namespace", "replaceVariables", "isString", "HttpSymbol", "import_xpath", "xpathVariableReplacer", "text", "_type", "variables", "scriptConsole", "options", "parseHandlebarsString", "variable", "_a", "match", "node", "getNode", "evaluate", "results", "getSelectReturnType", "err", "log", "registerXmlPuglin", "api", "parseXpathNamespace", "xmlResponseInterceptor", "provideAssertValueXPath", "xpathVariableReplacer", "javascriptProvider", "xpath", "xmldom", "pluginStore", "registerCorePlugins", "registerDotenvPlugin", "registerEventSourcePlugin", "registerGraphQL", "registerGrpcPlugin", "registerHttpPlugin", "registerIntellijPlugin", "registerInjectionPlugin", "registerJavascriptPlugin", "registerMqttPlugin", "registerOAuth2Plugin", "registerAmqpPlugin", "registerAssertPlugin", "registerWebsocketPlugin", "registerXmlPuglin", "import_hookpoint", "send", "context", "result", "isHttpRegionSendContext", "sendHttpRegion", "isHttpRegionsSendContext", "sendHttpRegions", "sendHttpFile", "processorContext", "createEmptyProcessorContext", "executeGlobalScripts", "httpRegion", "httpRegions", "log", "getVariables", "getEnvironmentConfig", "vars", "variables", "cleanVariables", "getEnvironments", "prev", "current", "cur", "oauth2Command", "execute", "options", "httpFileStore", "HttpFileStore", "context", "createEmptyProcessorContext", "obj", "split", "result", "getOAuth2Response", "import_chalk", "import_commander", "import_fs", "import_path", "getLogLevel", "cliOptions", "sum", "x", "y", "toSendJsonOutput", "processedHttpRegions", "options", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "_h", "_i", "_j", "_k", "_l", "_m", "_n", "requests", "httpRegion", "output", "test", "result", "fileProvider", "convertResponse", "toString", "t", "resultRequests", "obj", "createTestSummary", "response", "bailInBeforeLoop", "bailOnFailedTestInterceptor", "hookContext", "context", "addSkippedTestResult", "_a", "_b", "obj", "loggerFlushInterceptor", "hookContext", "_a", "_b", "context", "testExitCodeInterceptor", "hookContext", "_a", "_b", "obj", "createCliPluginRegister", "bail", "api", "loggerFlushInterceptor", "testExitCodeInterceptor", "bailOnFailedTestInterceptor", "import_xmldom", "import_os", "import_xmldom_format", "transformToJunit", "output", "document", "xmlNode", "root", "toFloatSeconds", "sumDuration", "request", "transformRequest", "_a", "_b", "_c", "_d", "testSuiteNode", "setAttribute", "fileRelativeToCwd", "requestDurationMillis", "propertiesNode", "transformToProperties", "testCaseDurationMillis", "testResult", "child", "transformTestResultToTestcase", "attributes", "_e", "_f", "_g", "_h", "key", "value", "failureNode", "errorToString", "properties", "hasChild", "propertyNode", "toString", "x", "y", "durationMillis", "node", "selectHttpFiles", "httpFiles", "cliOptions", "httpFile", "resultWithArgs", "selectHttpFilesWithArgs", "selectManualHttpFiles", "result", "httpRegions", "h", "hasName", "hasTag", "isLine", "httpRegion", "name", "_a", "line", "tags", "_b", "isString", "metaDataTag", "t", "httpRegionMap", "hasManyFiles", "cwd", "fileName", "ensureString", "answer", "key", "sendCommand", "toNumber", "execute", "fileNames", "options", "_a", "_b", "context", "convertCliOptionsToContext", "httpFiles", "config", "getHttpFiles", "initRequestLogger", "isFirstRequest", "selection", "selectHttpFiles", "sendFuncs", "httpFile", "httpRegions", "send", "promiseQueue", "reportOutput", "processedHttpRegions", "cliJsonOutput", "toSendJsonOutput", "stringifySafe", "transformToJunit", "requestCounts", "chalk", "cliOptions", "getLogLevel", "obj", "split", "scriptConsole", "Logger", "getStreamLogger", "logger", "getRequestLogger", "response", "httpRegion", "httpFileStore", "HttpFileStore", "createCliPluginRegister", "parseOptions", "paths", "fileName", "queryGlobbyPattern", "path", "fs", "globOptions", "globby", "type", "data", "cliLoggerOptions", "requestLoggerOptions", "getRequestLoggerOptions", "requestFailedLoggerOptions", "requestLoggerFactory", "args", "output", "result", "createProgram", "program", "packageJson", "parseJson", "oauth2Command", "sendCommand", "execute", "rawArgs", "initIOProvider", "err"]
}
